(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"+lcs":function(l,n,e){"use strict";e.d(n,"a",function(){return a});var t=e("gIcY"),u=e("K9Ia"),i=(e("F83c"),e("sne2"),e("QFaf")),o=e("kvvV"),a=(e("9nlD"),e("VXsX"),function(){function l(l,n,e,t,u,i){this.modalRef=l,this.rbdService=n,this.taskManagerService=e,this.notificationService=t,this.i18n=u,this.actionLabels=i,this.editing=!1,this.action=this.actionLabels.CREATE,this.resource=this.i18n("RBD Snapshot"),this.createForm()}return l.prototype.createForm=function(){this.snapshotForm=new i.a({snapshotName:new t.i("",{validators:[t.A.required]})})},l.prototype.ngOnInit=function(){this.onSubmit=new u.a},l.prototype.setSnapName=function(l){this.snapName=l,this.snapshotForm.get("snapshotName").setValue(l)},l.prototype.setEditing=function(l){void 0===l&&(l=!0),this.editing=l,this.action=this.editing?this.actionLabels.RENAME:this.actionLabels.CREATE},l.prototype.editAction=function(){var l=this,n=this.snapshotForm.getValue("snapshotName"),e=new o.a;e.name="rbd/snap/edit",e.metadata={pool_name:this.poolName,image_name:this.imageName,snapshot_name:n},this.rbdService.renameSnapshot(this.poolName,this.imageName,this.snapName,n).toPromise().then(function(){l.taskManagerService.subscribe(e.name,e.metadata,function(n){l.notificationService.notifyTask(n)}),l.modalRef.hide(),l.onSubmit.next(l.snapName)}).catch(function(){l.snapshotForm.setErrors({cdSubmitButton:!0})})},l.prototype.createAction=function(){var l=this,n=this.snapshotForm.getValue("snapshotName"),e=new o.a;e.name="rbd/snap/create",e.metadata={pool_name:this.poolName,image_name:this.imageName,snapshot_name:n},this.rbdService.createSnapshot(this.poolName,this.imageName,n).toPromise().then(function(){l.taskManagerService.subscribe(e.name,e.metadata,function(n){l.notificationService.notifyTask(n)}),l.modalRef.hide(),l.onSubmit.next(n)}).catch(function(){l.snapshotForm.setErrors({cdSubmitButton:!0})})},l.prototype.submit=function(){this.editing?this.editAction():this.createAction()},l}())},"0rTx":function(l,n,e){"use strict";var t=e("CcnG"),u=e("EEJc"),i=e("ajRT"),o=e("gIcY"),a=e("Ip0R"),r=e("IZUe"),s=e("ANnk"),d=e("f/UV"),c=e("aexS"),p=e("gp3X"),m=e("sb0X"),f=e("KVJa"),g=e("Z21x"),h=e("sne2"),v=e("2GqK"),b=e("F83c"),y=e("DQlY"),C=e("2EZI"),_=e("kn/O");e.d(n,"a",function(){return k});var w=t["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function R(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"span",[["class","help-block"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["This field is required."]))],null,null)}function I(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,45,"cd-modal",[],null,null,null,u.c,u.b)),t["\u0275did"](1,49152,null,0,i.a,[],{modalRef:[0,"modalRef"]},null),(l()(),t["\u0275eld"](2,0,null,0,1,null,null,null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Restore Image"])),(l()(),t["\u0275eld"](4,0,null,1,41,null,null,null,null,null,null,null)),(l()(),t["\u0275eld"](5,0,null,null,40,"form",[["class","form"],["name","restoreForm"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,e){var u=!0;return"submit"===n&&(u=!1!==t["\u0275nov"](l,7).onSubmit(e)&&u),"reset"===n&&(u=!1!==t["\u0275nov"](l,7).onReset()&&u),u},null,null)),t["\u0275did"](6,16384,null,0,o.D,[],null,null),t["\u0275did"](7,540672,[["formDir",4]],0,o.l,[[8,null],[8,null]],{form:[0,"form"]},null),t["\u0275prd"](2048,null,o.d,null,[o.l]),t["\u0275did"](9,16384,null,0,o.s,[[4,o.d]],null,null),(l()(),t["\u0275eld"](10,0,null,null,28,"div",[["class","modal-body"]],null,null,null,null,null)),(l()(),t["\u0275eld"](11,0,null,null,12,"p",[],null,null,null,null,null)),(l()(),t["\u0275eld"](12,0,null,null,1,null,null,null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["To restore"])),(l()(),t["\u0275ted"](-1,null,["\xa0 "])),(l()(),t["\u0275eld"](15,0,null,null,1,"kbd",[],null,null,null,null,null)),(l()(),t["\u0275ted"](16,null,["","/","@",""])),(l()(),t["\u0275ted"](-1,null,[",\xa0 "])),(l()(),t["\u0275eld"](18,0,null,null,1,null,null,null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["type the image's new name and click"])),(l()(),t["\u0275ted"](-1,null,["\xa0 "])),(l()(),t["\u0275eld"](21,0,null,null,1,"kbd",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Restore Image"])),(l()(),t["\u0275ted"](-1,null,[". "])),(l()(),t["\u0275eld"](24,0,null,null,14,"div",[["class","form-group"]],null,null,null,null,null)),t["\u0275did"](25,278528,null,0,a.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](26,{"has-error":0}),(l()(),t["\u0275eld"](27,0,null,null,1,"label",[["for","name"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["New Name"])),(l()(),t["\u0275eld"](29,0,null,null,7,"input",[["autocomplete","off"],["autofocus",""],["class","form-control"],["formControlName","name"],["id","name"],["name","name"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,e){var u=!0;return"input"===n&&(u=!1!==t["\u0275nov"](l,30)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,30).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,30)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,30)._compositionEnd(e.target.value)&&u),u},null,null)),t["\u0275did"](30,16384,null,0,o.e,[t.Renderer2,t.ElementRef,[2,o.b]],null,null),t["\u0275prd"](1024,null,o.p,function(l){return[l]},[o.e]),t["\u0275did"](32,671744,null,0,o.j,[[3,o.d],[8,null],[8,null],[6,o.p],[2,o.F]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,o.q,null,[o.j]),t["\u0275did"](34,16384,null,0,o.r,[[4,o.q]],null,null),t["\u0275did"](35,4210688,null,0,r.a,[t.ElementRef],null,null),t["\u0275did"](36,4210688,null,0,s.a,[[2,d.a],c.a,t.ElementRef],null,null),(l()(),t["\u0275and"](16777216,null,null,1,null,R)),t["\u0275did"](38,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](39,0,null,null,6,"div",[["class","modal-footer"]],null,null,null,null,null)),(l()(),t["\u0275eld"](40,0,null,null,5,"div",[["class","button-group text-right"]],null,null,null,null,null)),(l()(),t["\u0275eld"](41,0,null,null,2,"cd-submit-button",[],null,[[null,"submitAction"]],function(l,n,e){var t=!0;return"submitAction"===n&&(t=!1!==l.component.restore()&&t),t},p.b,p.a)),t["\u0275did"](42,114688,null,0,m.a,[t.ElementRef],{form:[0,"form"]},{submitAction:"submitAction"}),(l()(),t["\u0275ted"](-1,0,["Restore Image"])),(l()(),t["\u0275eld"](44,0,null,null,1,"cd-back-button",[["name","Cancel"]],null,null,null,f.b,f.a)),t["\u0275did"](45,49152,null,0,g.a,[a.Location,h.b],{name:[0,"name"],back:[1,"back"]},null)],function(l,n){var e=n.component;l(n,1,0,e.modalRef),l(n,7,0,e.restoreForm);var u=l(n,26,0,e.restoreForm.showError("name",t["\u0275nov"](n,7)));l(n,25,0,"form-group",u),l(n,32,0,"name"),l(n,38,0,e.restoreForm.showError("name",t["\u0275nov"](n,7),"required")),l(n,42,0,e.restoreForm),l(n,45,0,"Cancel",e.modalRef.hide)},function(l,n){var e=n.component;l(n,5,0,t["\u0275nov"](n,9).ngClassUntouched,t["\u0275nov"](n,9).ngClassTouched,t["\u0275nov"](n,9).ngClassPristine,t["\u0275nov"](n,9).ngClassDirty,t["\u0275nov"](n,9).ngClassValid,t["\u0275nov"](n,9).ngClassInvalid,t["\u0275nov"](n,9).ngClassPending),l(n,16,0,e.poolName,e.imageName,e.imageId),l(n,29,0,t["\u0275nov"](n,34).ngClassUntouched,t["\u0275nov"](n,34).ngClassTouched,t["\u0275nov"](n,34).ngClassPristine,t["\u0275nov"](n,34).ngClassDirty,t["\u0275nov"](n,34).ngClassValid,t["\u0275nov"](n,34).ngClassInvalid,t["\u0275nov"](n,34).ngClassPending)})}function S(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"cd-rbd-trash-restore-modal",[],null,null,null,I,w)),t["\u0275did"](1,114688,null,0,v.a,[b.a,y.a,C.a,_.a],null,null)],function(l,n){l(n,1,0)},null)}var k=t["\u0275ccf"]("cd-rbd-trash-restore-modal",v.a,S,{},{},[])},"2GqK":function(l,n,e){"use strict";e.d(n,"a",function(){return u}),e("F83c"),e("2EZI");var t=e("kvvV"),u=(e("kn/O"),function(){function l(l,n,e,t){this.rbdService=l,this.modalRef=n,this.fb=e,this.taskWrapper=t}return l.prototype.ngOnInit=function(){this.restoreForm=this.fb.group({name:this.imageName})},l.prototype.restore=function(){var l=this,n=this.restoreForm.getValue("name");this.taskWrapper.wrapTaskAroundCall({task:new t.a("rbd/trash/restore",{pool_name:this.poolName,image_id:this.imageId,new_image_name:n}),call:this.rbdService.restoreTrash(this.poolName,this.imageId,n)}).subscribe(void 0,function(){l.restoreForm.setErrors({cdSubmitButton:!0})},function(){l.modalRef.hide()})},l}())},"2JDI":function(l,n,e){"use strict";e.d(n,"a",function(){return o});var t=e("wd/R"),u=(e("F83c"),e("2EZI"),e("1Ni5")),i=e("kvvV"),o=(e("kn/O"),function(){function l(l,n,e,t){this.rbdService=l,this.modalRef=n,this.fb=e,this.taskWrapper=t,this.minDate=new Date,this.bsConfig={dateInputFormat:"YYYY-MM-DD HH:mm:ss",containerClass:"theme-default"},this.createForm()}return l.prototype.createForm=function(){this.moveForm=this.fb.group({expiresAt:["",[u.a.custom("format",function(l){return!(""===l||t(l,"YYYY-MM-DD HH:mm:ss").isValid())}),u.a.custom("expired",function(l){return t().isAfter(l)})]]})},l.prototype.ngOnInit=function(){this.pattern=this.poolName+"/"+this.imageName},l.prototype.moveImage=function(){var l=this,n=0,e=this.moveForm.getValue("expiresAt");e&&(n=t(e).diff(t(),"seconds",!0)),n<0&&(n=0),this.taskWrapper.wrapTaskAroundCall({task:new i.a("rbd/trash/move",{pool_name:this.poolName,image_name:this.imageName}),call:this.rbdService.moveTrash(this.poolName,this.imageName,n)}).subscribe(void 0,void 0,function(){l.modalRef.hide()})},l}())},"3ris":function(l,n,e){"use strict";e.d(n,"a",function(){return u});var t=e("LvDl"),u=(e("uIqm"),e("vCyI"),e("iExv"),e("uYzU"),function(){function l(l,n,e){this.i18n=l,this.iscsiBackstorePipe=n,this.booleanTextPipe=e,this.metadata={}}return Object.defineProperty(l.prototype,"content",{set:function(l){this.detailTable=l,l&&l.updateColumns()},enumerable:!0,configurable:!0}),l.prototype.ngOnInit=function(){this.columns=[{prop:"displayName",name:this.i18n("Name"),flexGrow:1,cellTemplate:this.highlightTpl},{prop:"current",name:this.i18n("Current"),flexGrow:1,cellTemplate:this.highlightTpl},{prop:"default",name:this.i18n("Default"),flexGrow:1,cellTemplate:this.highlightTpl}]},l.prototype.ngOnChanges=function(){this.selection.hasSelection&&(this.selectedItem=this.selection.first(),this.generateTree()),this.data=void 0},l.prototype.generateTree=function(){var l=this,n=t.cloneDeep(this.selectedItem.target_controls);this.cephIscsiConfigVersion>10&&t.extend(n,t.cloneDeep(this.selectedItem.auth)),this.metadata={root:n};var e={target:{expanded:this.selectedItem.cdExecuting?"fa fa-fw fa-spinner fa-spin fa-lg":"fa fa-fw fa-bullseye fa-lg"},initiators:{expanded:"fa fa-fw fa-user fa-lg",leaf:"fa fa-fw fa-user"},groups:{expanded:"fa fa-fw fa-users fa-lg",leaf:"fa fa-fw fa-users"},disks:{expanded:"fa fa-fw fa-hdd-o fa-lg",leaf:"fa fa-fw fa-hdd-o"},portals:{expanded:"fa fa-fw fa-server fa-lg",leaf:"fa fa-fw fa-server fa-lg"}},u=[];t.forEach(this.selectedItem.disks,function(n){var e="disk_"+n.pool+"_"+n.image;l.metadata[e]={controls:n.controls,backstore:n.backstore},["wwn","lun"].forEach(function(t){t in n&&(l.metadata[e][t]=n[t])}),u.push({value:n.pool+"/"+n.image,id:e})});var i=[];t.forEach(this.selectedItem.portals,function(l){i.push({value:l.host+":"+l.ip})});var o=[];t.forEach(this.selectedItem.clients,function(n){var u=t.cloneDeep(n.auth);n.info&&(t.extend(u,n.info),delete u.state,t.forEach(Object.keys(n.info.state),function(l){u[l.toLowerCase()]=n.info.state[l]})),l.metadata["client_"+n.client_iqn]=u;var i=[];n.luns.forEach(function(l){i.push({value:l.pool+"/"+l.image,id:"disk_"+l.pool+"_"+l.image,settings:{cssClasses:e.disks}})});var a="";n.info&&(a=Object.keys(n.info.state).includes("LOGGED_IN")?"logged_in":"logged_out"),o.push({value:n.client_iqn,status:a,id:"client_"+n.client_iqn,children:i})});var a=[];t.forEach(this.selectedItem.groups,function(l){var n=[];l.disks.forEach(function(l){n.push({value:l.pool+"/"+l.image,id:"disk_"+l.pool+"_"+l.image})});var t=[];l.members.forEach(function(l){t.push({value:l,id:"client_"+l})}),a.push({value:l.group_id,children:[{value:"Disks",children:n,settings:{selectionAllowed:!1,cssClasses:e.disks}},{value:"Initiators",children:t,settings:{selectionAllowed:!1,cssClasses:e.initiators}}]})}),this.tree={value:this.selectedItem.target_iqn,id:"root",settings:{static:!0,cssClasses:e.target},children:[{value:"Disks",children:u,settings:{selectionAllowed:!1,cssClasses:e.disks}},{value:"Portals",children:i,settings:{selectionAllowed:!1,cssClasses:e.portals}},{value:"Initiators",children:o,settings:{selectionAllowed:!1,cssClasses:e.initiators}},{value:"Groups",children:a,settings:{selectionAllowed:!1,cssClasses:e.groups}}]}},l.prototype.format=function(l){return"boolean"==typeof l?this.booleanTextPipe.transform(l):l},l.prototype.onNodeSelected=function(l){var n=this;if(l.node.id){this.title=l.node.value;var e=this.metadata[l.node.id]||{};"root"===l.node.id?(this.columns[2].isHidden=!1,this.data=t.map(this.settings.target_default_controls,function(l,u){return{displayName:u,default:l=n.format(l),current:t.isUndefined(e[u])?l:n.format(e[u])}}),this.cephIscsiConfigVersion>10&&["user","password","mutual_user","mutual_password"].forEach(function(l){n.data.push({displayName:l,default:null,current:e[l]})})):l.node.id.toString().startsWith("disk_")?(this.columns[2].isHidden=!1,this.data=t.map(this.settings.disk_default_controls[e.backstore],function(l,u){return{displayName:u,default:l=n.format(l),current:t.isUndefined(e.controls[u])?l:n.format(e.controls[u])}}),this.data.push({displayName:"backstore",default:this.iscsiBackstorePipe.transform(this.settings.default_backstore),current:this.iscsiBackstorePipe.transform(e.backstore)}),["wwn","lun"].forEach(function(l){l in e&&n.data.push({displayName:l,default:void 0,current:e[l]})})):(this.columns[2].isHidden=!0,this.data=t.map(e,function(l,e){return{displayName:e,default:void 0,current:n.format(l)}}))}else this.data=void 0;this.detailTable&&this.detailTable.updateColumns()},l}())},BH9v:function(l,n,e){"use strict";var t=e("CcnG"),u=e("gIcY"),i=e("aXbf"),o=function(){function l(l,n){this.control=l,this.formatter=n}return l.prototype.setValue=function(l){var n=this.formatter.toMilliseconds(l);this.control.control.setValue(n+" ms")},l.prototype.ngOnInit=function(){var l=this;this.setValue(this.control.value),this.ngDataReady&&this.ngDataReady.subscribe(function(){return l.setValue(l.control.value)})},l.prototype.onUpdate=function(l){this.setValue(l)},l}(),a=e("ANnk"),r=e("f/UV"),s=e("aexS"),d=e("LvDl"),c=e("IzCI"),p=function(){function l(l,n,e,u){this.elementRef=l,this.control=n,this.dimlessBinaryPerSecondPipe=e,this.formatter=u,this.ngModelChange=new t.EventEmitter,this.el=this.elementRef.nativeElement}return l.prototype.ngOnInit=function(){var l=this;this.setValue(this.el.value),this.ngDataReady&&this.ngDataReady.subscribe(function(){return l.setValue(l.el.value)})},l.prototype.setValue=function(l){/^[\d.]+$/.test(l)&&(l+=this.defaultUnit||"m");var n=this.formatter.toBytes(l,0),e=this.round(n);this.el.value=this.dimlessBinaryPerSecondPipe.transform(e),null!==n?(this.ngModelChange.emit(this.el.value),this.control.control.setValue(this.el.value)):(this.ngModelChange.emit(null),this.control.control.setValue(null))},l.prototype.round=function(l){if(null!==l&&0!==l){if(!d.isUndefined(this.minBytes)&&l<this.minBytes)return this.minBytes;if(!d.isUndefined(this.maxBytes)&&l>this.maxBytes)return this.maxBytes;if(!d.isUndefined(this.roundPower)){var n=Math.round(Math.log(l)/Math.log(this.roundPower));return Math.pow(this.roundPower,n)}}return l},l.prototype.onBlur=function(l){this.setValue(l)},l}(),m=function(){function l(l,n){this.formatter=l,this.ngControl=n}return l.prototype.setValue=function(l){var n=this.formatter.toIops(l);this.ngControl.control.setValue(n+" IOPS")},l.prototype.ngOnInit=function(){var l=this;this.setValue(this.ngControl.value),this.ngDataReady&&this.ngDataReady.subscribe(function(){return l.setValue(l.ngControl.value)})},l.prototype.onUpdate=function(l){this.setValue(l)},l}(),f=e("Ip0R"),g=e("4HWh"),h=e("p4Cf");e("rFfW"),e("o8EM"),e.d(n,"a",function(){return v}),e.d(n,"b",function(){return I});var v=t["\u0275crt"]({encapsulation:0,styles:[[".collapsible[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}"]],data:{}});function b(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,8,null,null,null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,7,"input",[["cdMilliseconds",""],["class","form-control"],["type","text"]],[[8,"id",0],[8,"name",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,e){var u=!0;return"input"===n&&(u=!1!==t["\u0275nov"](l,2)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,2).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,2)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,2)._compositionEnd(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,7).onUpdate(e.target.value)&&u),u},null,null)),t["\u0275did"](2,16384,null,0,u.e,[t.Renderer2,t.ElementRef,[2,u.b]],null,null),t["\u0275prd"](1024,null,u.p,function(l){return[l]},[u.e]),t["\u0275did"](4,671744,null,0,u.j,[[3,u.d],[8,null],[8,null],[6,u.p],[2,u.F]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,u.q,null,[u.j]),t["\u0275did"](6,16384,null,0,u.r,[[4,u.q]],null,null),t["\u0275did"](7,81920,null,0,o,[u.q,i.a],{ngDataReady:[0,"ngDataReady"]},null),t["\u0275did"](8,4210688,null,0,a.a,[[2,r.a],s.a,t.ElementRef],null,null)],function(l,n){var e=n.component;l(n,4,0,n.parent.context.$implicit.name),l(n,7,0,e.ngDataReady)},function(l,n){l(n,1,0,n.parent.context.$implicit.name,n.parent.context.$implicit.name,t["\u0275nov"](n,6).ngClassUntouched,t["\u0275nov"](n,6).ngClassTouched,t["\u0275nov"](n,6).ngClassPristine,t["\u0275nov"](n,6).ngClassDirty,t["\u0275nov"](n,6).ngClassValid,t["\u0275nov"](n,6).ngClassInvalid,t["\u0275nov"](n,6).ngClassPending)})}function y(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,8,null,null,null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,7,"input",[["cdDimlessBinaryPerSecond",""],["class","form-control"],["defaultUnit","b"],["type","text"]],[[8,"id",0],[8,"name",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,e){var u=!0;return"input"===n&&(u=!1!==t["\u0275nov"](l,2)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,2).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,2)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,2)._compositionEnd(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,7).onBlur(e.target.value)&&u),u},null,null)),t["\u0275did"](2,16384,null,0,u.e,[t.Renderer2,t.ElementRef,[2,u.b]],null,null),t["\u0275prd"](1024,null,u.p,function(l){return[l]},[u.e]),t["\u0275did"](4,671744,null,0,u.j,[[3,u.d],[8,null],[8,null],[6,u.p],[2,u.F]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,u.q,null,[u.j]),t["\u0275did"](6,16384,null,0,u.r,[[4,u.q]],null,null),t["\u0275did"](7,81920,null,0,p,[t.ElementRef,u.q,c.a,i.a],{ngDataReady:[0,"ngDataReady"],defaultUnit:[1,"defaultUnit"]},null),t["\u0275did"](8,4210688,null,0,a.a,[[2,r.a],s.a,t.ElementRef],null,null)],function(l,n){var e=n.component;l(n,4,0,n.parent.context.$implicit.name),l(n,7,0,e.ngDataReady,"b")},function(l,n){l(n,1,0,n.parent.context.$implicit.name,n.parent.context.$implicit.name,t["\u0275nov"](n,6).ngClassUntouched,t["\u0275nov"](n,6).ngClassTouched,t["\u0275nov"](n,6).ngClassPristine,t["\u0275nov"](n,6).ngClassDirty,t["\u0275nov"](n,6).ngClassValid,t["\u0275nov"](n,6).ngClassInvalid,t["\u0275nov"](n,6).ngClassPending)})}function C(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,8,null,null,null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,7,"input",[["cdIops",""],["class","form-control"],["type","text"]],[[8,"id",0],[8,"name",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,e){var u=!0;return"input"===n&&(u=!1!==t["\u0275nov"](l,2)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,2).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,2)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,2)._compositionEnd(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,7).onUpdate(e.target.value)&&u),u},null,null)),t["\u0275did"](2,16384,null,0,u.e,[t.Renderer2,t.ElementRef,[2,u.b]],null,null),t["\u0275prd"](1024,null,u.p,function(l){return[l]},[u.e]),t["\u0275did"](4,671744,null,0,u.j,[[3,u.d],[8,null],[8,null],[6,u.p],[2,u.F]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,u.q,null,[u.j]),t["\u0275did"](6,16384,null,0,u.r,[[4,u.q]],null,null),t["\u0275did"](7,81920,null,0,m,[i.a,u.q],{ngDataReady:[0,"ngDataReady"]},null),t["\u0275did"](8,4210688,null,0,a.a,[[2,r.a],s.a,t.ElementRef],null,null)],function(l,n){var e=n.component;l(n,4,0,n.parent.context.$implicit.name),l(n,7,0,e.ngDataReady)},function(l,n){l(n,1,0,n.parent.context.$implicit.name,n.parent.context.$implicit.name,t["\u0275nov"](n,6).ngClassUntouched,t["\u0275nov"](n,6).ngClassTouched,t["\u0275nov"](n,6).ngClassPristine,t["\u0275nov"](n,6).ngClassDirty,t["\u0275nov"](n,6).ngClassValid,t["\u0275nov"](n,6).ngClassInvalid,t["\u0275nov"](n,6).ngClassPending)})}function _(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"span",[["class","help-block"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["The mininum value is 0"]))],null,null)}function w(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,24,"div",[["class","form-group"]],null,null,null,null,null)),t["\u0275did"](1,278528,null,0,f.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](2,{"has-error":0}),(l()(),t["\u0275eld"](3,0,null,null,4,"label",[["class","control-label col-sm-3"]],[[8,"htmlFor",0]],null,null,null,null)),(l()(),t["\u0275ted"](4,null,["",""])),(l()(),t["\u0275eld"](5,0,null,null,2,"cd-helper",[],null,null,null,g.b,g.a)),t["\u0275did"](6,49152,null,0,h.a,[],null,null),(l()(),t["\u0275ted"](7,0,["",""])),(l()(),t["\u0275eld"](8,0,null,null,16,"div",[],[[8,"className",0]],null,null,null,null)),(l()(),t["\u0275eld"](9,0,null,null,13,"div",[["class","input-group"]],null,null,null,null,null)),(l()(),t["\u0275eld"](10,0,null,null,7,null,null,null,null,null,null,null)),t["\u0275did"](11,16384,null,0,f.NgSwitch,[],{ngSwitch:[0,"ngSwitch"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,b)),t["\u0275did"](13,278528,null,0,f.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,f.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,y)),t["\u0275did"](15,278528,null,0,f.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,f.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,C)),t["\u0275did"](17,278528,null,0,f.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,f.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),t["\u0275eld"](18,0,null,null,4,"span",[["class","input-group-btn"]],null,null,null,null,null)),(l()(),t["\u0275eld"](19,0,null,null,3,"button",[["class","btn btn-default"],["data-toggle","button"],["title","Remove the local configuration value. The parent configuration value will be inherited and used instead."],["type","button"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.reset(l.context.$implicit.name)&&t),t},null,null)),t["\u0275did"](20,278528,null,0,f.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](21,{active:0}),(l()(),t["\u0275eld"](22,0,null,null,0,"i",[["aria-hidden","true"],["class","fa fa-eraser"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,_)),t["\u0275did"](24,16384,null,0,f.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(l,n){var e=n.component,u=l(n,2,0,e.form.showError("configuration."+n.context.$implicit.name,t["\u0275nov"](n.parent.parent,0)));l(n,1,0,"form-group",u),l(n,11,0,n.context.$implicit.type),l(n,13,0,e.configurationType.milliseconds),l(n,15,0,e.configurationType.bps),l(n,17,0,e.configurationType.iops);var i=l(n,21,0,e.isDisabled(n.context.$implicit.name));l(n,20,0,"btn btn-default",i),l(n,24,0,e.form.showError("configuration."+n.context.$implicit.name,t["\u0275nov"](n.parent.parent,0),"min"))},function(l,n){l(n,3,0,n.context.$implicit.name),l(n,4,0,n.context.$implicit.displayName),l(n,7,0,n.context.$implicit.description),l(n,8,0,t["\u0275inlineInterpolate"](1,"col-sm-9 ",n.parent.context.$implicit.heading,""))})}function R(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,9,"div",[],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,5,"h3",[["class","page-header"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,4,"span",[["class","collapsible"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.toggleSectionVisibility(l.context.$implicit.class)&&t),t},null,null)),(l()(),t["\u0275ted"](3,null,[""," "])),(l()(),t["\u0275eld"](4,0,null,null,2,"i",[["aria-hidden","true"],["class","fa"]],null,null,null,null,null)),t["\u0275did"](5,278528,null,0,f.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](6,{"fa-plus-circle":0,"fa-minus-circle":1}),(l()(),t["\u0275eld"](7,0,null,null,2,"div",[],[[8,"className",0],[8,"hidden",0]],null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,w)),t["\u0275did"](9,278528,null,0,f.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(l,n){var e=n.component,t=l(n,6,0,!e.sectionVisibility[n.context.$implicit.class],e.sectionVisibility[n.context.$implicit.class]);l(n,5,0,"fa",t),l(n,9,0,n.context.$implicit.options)},function(l,n){var e=n.component;l(n,3,0,n.context.$implicit.heading),l(n,7,0,t["\u0275inlineInterpolate"](1,"",n.context.$implicit.class,""),!e.sectionVisibility[n.context.$implicit.class])})}function I(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,[["cfgFormGroup",1]],null,7,"fieldset",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,e){var u=!0;return"submit"===n&&(u=!1!==t["\u0275nov"](l,1).onSubmit(e)&&u),"reset"===n&&(u=!1!==t["\u0275nov"](l,1).onReset()&&u),u},null,null)),t["\u0275did"](1,540672,null,0,u.l,[[8,null],[8,null]],{form:[0,"form"]},null),t["\u0275prd"](2048,null,u.d,null,[u.l]),t["\u0275did"](3,16384,null,0,u.s,[[4,u.d]],null,null),(l()(),t["\u0275eld"](4,0,null,null,1,"legend",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["RBD Configuration"])),(l()(),t["\u0275and"](16777216,null,null,1,null,R)),t["\u0275did"](7,278528,null,0,f.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(l,n){var e=n.component;l(n,1,0,e.form.get("configuration")),l(n,7,0,e.rbdConfigurationService.sections)},function(l,n){l(n,0,0,t["\u0275nov"](n,3).ngClassUntouched,t["\u0275nov"](n,3).ngClassTouched,t["\u0275nov"](n,3).ngClassPristine,t["\u0275nov"](n,3).ngClassDirty,t["\u0275nov"](n,3).ngClassValid,t["\u0275nov"](n,3).ngClassInvalid,t["\u0275nov"](n,3).ngClassPending)})}},EFGL:function(l,n,e){"use strict";var t=e("CcnG"),u=e("Ip0R"),i=e("IzCI"),o=e("aXbf"),a=e("dEH0"),r=e("BQkM"),s=e("25BL"),d=e("uIqm");e("aAWM"),e("o8EM"),e("Jm/i"),e.d(n,"a",function(){return c}),e.d(n,"b",function(){return _});var c=t["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function p(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Global"]))],null,null)}function m(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Image"]))],null,null)}function f(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Pool"]))],null,null)}function g(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,7,"div",[],null,null,null,null,null)),t["\u0275did"](1,16384,null,0,u.NgSwitch,[],{ngSwitch:[0,"ngSwitch"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,p)),t["\u0275did"](3,278528,null,0,u.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,u.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,m)),t["\u0275did"](5,278528,null,0,u.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,u.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,f)),t["\u0275did"](7,278528,null,0,u.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,u.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null)],function(l,n){l(n,1,0,n.context.value),l(n,3,0,"global"),l(n,5,0,"image"),l(n,7,0,"pool")},null)}function h(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"span",[],null,null,null,null,null)),(l()(),t["\u0275ted"](1,null,["",""])),t["\u0275ppd"](2,1)],null,function(l,n){var e=t["\u0275unv"](n,1,0,l(n,2,0,t["\u0275nov"](n.parent.parent,0),n.parent.context.value));l(n,1,0,e)})}function v(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"span",[],null,null,null,null,null)),(l()(),t["\u0275ted"](1,null,["",""])),t["\u0275ppd"](2,1)],null,function(l,n){var e=t["\u0275unv"](n,1,0,l(n,2,0,t["\u0275nov"](n.parent.parent,1),n.parent.context.value));l(n,1,0,e)})}function b(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"span",[],null,null,null,null,null)),(l()(),t["\u0275ted"](1,null,["",""])),t["\u0275ppd"](2,1)],null,function(l,n){var e=t["\u0275unv"](n,1,0,l(n,2,0,t["\u0275nov"](n.parent.parent,2),n.parent.context.value));l(n,1,0,e)})}function y(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t["\u0275ted"](1,null,["",""]))],null,function(l,n){l(n,1,0,n.parent.context.value)})}function C(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,9,"div",[],null,null,null,null,null)),t["\u0275did"](1,16384,null,0,u.NgSwitch,[],{ngSwitch:[0,"ngSwitch"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,h)),t["\u0275did"](3,278528,null,0,u.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,u.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,v)),t["\u0275did"](5,278528,null,0,u.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,u.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,b)),t["\u0275did"](7,278528,null,0,u.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,u.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,y)),t["\u0275did"](9,16384,null,0,u.NgSwitchDefault,[t.ViewContainerRef,t.TemplateRef,u.NgSwitch],null,null)],function(l,n){var e=n.component;l(n,1,0,n.context.row.type),l(n,3,0,e.typeField.bps),l(n,5,0,e.typeField.milliseconds),l(n,7,0,e.typeField.iops)},null)}function _(l){return t["\u0275vid"](0,[t["\u0275pid"](0,i.a,[o.a]),t["\u0275pid"](0,a.a,[]),t["\u0275pid"](0,r.a,[]),t["\u0275qud"](402653184,1,{configurationSourceTpl:0}),t["\u0275qud"](402653184,2,{configurationValueTpl:0}),t["\u0275qud"](402653184,3,{poolConfTable:0}),(l()(),t["\u0275eld"](6,0,null,null,1,"cd-table",[["identifier","name"]],null,null,null,s.b,s.a)),t["\u0275did"](7,2867200,[[3,4],["poolConfTable",4]],0,d.a,[t.NgZone,t.ChangeDetectorRef],{data:[0,"data"],columns:[1,"columns"],identifier:[2,"identifier"]},null),(l()(),t["\u0275and"](0,[[1,2],["configurationSourceTpl",2]],null,0,null,g)),(l()(),t["\u0275and"](0,[[2,2],["configurationValueTpl",2]],null,0,null,C))],function(l,n){var e=n.component;l(n,7,0,e.data,e.poolConfigurationColumns,"name")},null)}},Ekvf:function(l,n,e){"use strict";e.d(n,"a",function(){return d});var t=e("mrSG"),u=e("t/Na"),i=e("67Y/"),o=e("xTzq"),a=e("o8EM"),r=e("CcnG"),s=e("pL04"),d=function(){function l(l,n){this.http=l,this.rbdConfigurationService=n,this.apiPath="api/pool"}return l.prototype.create=function(l){return this.http.post(this.apiPath,l,{observe:"response"})},l.prototype.update=function(l){var n;return l.hasOwnProperty("srcpool")?(n=l.srcpool,delete l.srcpool):(n=l.pool,delete l.pool),this.http.put(this.apiPath+"/"+encodeURIComponent(n),l,{observe:"response"})},l.prototype.delete=function(l){return this.http.delete(this.apiPath+"/"+l,{observe:"response"})},l.prototype.get=function(l){return this.http.get(this.apiPath+"/"+l)},l.prototype.getList=function(){return this.http.get(this.apiPath+"?stats=true")},l.prototype.getConfiguration=function(l){var n=this;return this.http.get(this.apiPath+"/"+l+"/configuration").pipe(Object(i.a)(function(l){return l.map(function(l){return Object.assign(l,n.rbdConfigurationService.getOptionByName(l.name))})}))},l.prototype.getInfo=function(l){return this.http.get(this.apiPath+"/_info"+(l?"?pool_name="+l:""))},l.prototype.list=function(l){void 0===l&&(l=[]);var n=l.join(",");return this.http.get(this.apiPath+"?attrs="+n).toPromise().then(function(l){return l})},l.ngInjectableDef=r.defineInjectable({factory:function(){return new l(r.inject(u.c),r.inject(a.a))},token:l,providedIn:s.a}),l=t.__decorate([o.a,t.__metadata("design:paramtypes",[u.c,a.a])],l)}()},EmSq:function(l,n,e){"use strict";e.d(n,"a",function(){return i});var t=e("CcnG"),u=e("LvDl"),i=(e("Fgil"),e("aXbf"),function(){function l(l,n,e,u){this.elementRef=l,this.control=n,this.dimlessBinaryPipe=e,this.formatter=u,this.ngModelChange=new t.EventEmitter,this.el=this.elementRef.nativeElement}return l.prototype.ngOnInit=function(){this.setValue(this.el.value)},l.prototype.setValue=function(l){/^[\d.]+$/.test(l)&&(l+=this.defaultUnit||"m");var n=this.formatter.toBytes(l),e=this.round(n);this.el.value=this.dimlessBinaryPipe.transform(e),null!==n?(this.ngModelChange.emit(this.el.value),this.control.control.setValue(this.el.value)):(this.ngModelChange.emit(null),this.control.control.setValue(null))},l.prototype.round=function(l){if(null!==l&&0!==l){if(!u.isUndefined(this.minBytes)&&l<this.minBytes)return this.minBytes;if(!u.isUndefined(this.maxBytes)&&l>this.maxBytes)return this.maxBytes;if(!u.isUndefined(this.roundPower)){var n=Math.round(Math.log(l)/Math.log(this.roundPower));return Math.pow(this.roundPower,n)}}return l},l.prototype.onBlur=function(l){this.setValue(l)},l}())},F83c:function(l,n,e){"use strict";e.d(n,"a",function(){return d});var t=e("mrSG"),u=e("t/Na"),i=e("67Y/"),o=e("xTzq"),a=e("o8EM"),r=e("CcnG"),s=e("pL04"),d=function(){function l(l,n){this.http=l,this.rbdConfigurationService=n}return l.prototype.create=function(l){return this.http.post("api/block/image",l,{observe:"response"})},l.prototype.delete=function(l,n){return this.http.delete("api/block/image/"+l+"/"+n,{observe:"response"})},l.prototype.update=function(l,n,e){return this.http.put("api/block/image/"+l+"/"+n,e,{observe:"response"})},l.prototype.get=function(l,n){return this.http.get("api/block/image/"+l+"/"+n)},l.prototype.list=function(){var l=this;return this.http.get("api/block/image").pipe(Object(i.a)(function(n){return n.map(function(n){return n.value.map(function(n){return n.configuration?(n.configuration.map(function(n){return Object.assign(n,l.rbdConfigurationService.getOptionByName(n.name))}),n):n}),n})}))},l.prototype.copy=function(l,n,e){return this.http.post("api/block/image/"+l+"/"+n+"/copy",e,{observe:"response"})},l.prototype.flatten=function(l,n){return this.http.post("api/block/image/"+l+"/"+n+"/flatten",null,{observe:"response"})},l.prototype.defaultFeatures=function(){return this.http.get("api/block/image/default_features")},l.prototype.createSnapshot=function(l,n,e){return this.http.post("api/block/image/"+l+"/"+n+"/snap",{snapshot_name:e},{observe:"response"})},l.prototype.renameSnapshot=function(l,n,e,t){return this.http.put("api/block/image/"+l+"/"+n+"/snap/"+e,{new_snap_name:t},{observe:"response"})},l.prototype.protectSnapshot=function(l,n,e,t){return this.http.put("api/block/image/"+l+"/"+n+"/snap/"+e,{is_protected:t},{observe:"response"})},l.prototype.rollbackSnapshot=function(l,n,e){return this.http.post("api/block/image/"+l+"/"+n+"/snap/"+e+"/rollback",null,{observe:"response"})},l.prototype.cloneSnapshot=function(l,n,e,t){return this.http.post("api/block/image/"+l+"/"+n+"/snap/"+e+"/clone",t,{observe:"response"})},l.prototype.deleteSnapshot=function(l,n,e){return this.http.delete("api/block/image/"+l+"/"+n+"/snap/"+e,{observe:"response"})},l.prototype.listTrash=function(){return this.http.get("api/block/image/trash/")},l.prototype.moveTrash=function(l,n,e){return this.http.post("api/block/image/"+l+"/"+n+"/move_trash",{delay:e},{observe:"response"})},l.prototype.purgeTrash=function(l){return this.http.post("api/block/image/trash/purge/?pool_name="+l,null,{observe:"response"})},l.prototype.restoreTrash=function(l,n,e){return this.http.post("api/block/image/trash/"+l+"/"+n+"/restore",{new_image_name:e},{observe:"response"})},l.prototype.removeTrash=function(l,n,e,t){return void 0===t&&(t=!1),this.http.delete("api/block/image/trash/"+l+"/"+n+"/?image_name="+e+"&force="+t,{observe:"response"})},l.ngInjectableDef=r.defineInjectable({factory:function(){return new l(r.inject(u.c),r.inject(a.a))},token:l,providedIn:s.a}),t.__decorate([t.__param(2,o.b),t.__metadata("design:type",Function),t.__metadata("design:paramtypes",[Object,Object,Object]),t.__metadata("design:returntype",void 0)],l.prototype,"createSnapshot",null),t.__decorate([t.__param(3,o.b),t.__metadata("design:type",Function),t.__metadata("design:paramtypes",[Object,Object,Object,Object]),t.__metadata("design:returntype",void 0)],l.prototype,"renameSnapshot",null),t.__decorate([t.__param(3,o.b),t.__metadata("design:type",Function),t.__metadata("design:paramtypes",[Object,Object,Object,Object]),t.__metadata("design:returntype",void 0)],l.prototype,"protectSnapshot",null),t.__decorate([t.__param(2,o.b),t.__metadata("design:type",Function),t.__metadata("design:paramtypes",[Object,Object,Object]),t.__metadata("design:returntype",void 0)],l.prototype,"restoreTrash",null),l=t.__decorate([o.a,t.__metadata("design:paramtypes",[u.c,a.a])],l)}()},I4Qz:function(l,n,e){"use strict";var t=e("CcnG"),u=e("EEJc"),i=e("ajRT"),o=e("gIcY"),a=e("Ip0R"),r=e("ARl4"),s=e("lqqz"),d=e("ANnk"),c=e("f/UV"),p=e("aexS"),m=e("gp3X"),f=e("sb0X"),g=e("KVJa"),h=e("Z21x"),v=e("sne2"),b=e("2JDI"),y=e("F83c"),C=e("DQlY"),_=e("2EZI"),w=e("kn/O");e.d(n,"a",function(){return F});var R=t["\u0275crt"]({encapsulation:0,styles:[[".bs-datepicker-head bs-datepicker-navigation-view{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between}"]],data:{}});function I(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"span",[["class","help-block"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,['Wrong date format. Please use "YYYY-MM-DD HH:mm:ss".']))],null,null)}function S(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"span",[["class","help-block"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Protection has already expired. Please pick a future date or leave it empty."]))],null,null)}function k(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,44,"cd-modal",[],null,null,null,u.c,u.b)),t["\u0275did"](1,49152,null,0,i.a,[],{modalRef:[0,"modalRef"]},null),(l()(),t["\u0275eld"](2,0,null,0,1,null,null,null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Move an image to trash"])),(l()(),t["\u0275eld"](4,0,null,1,40,null,null,null,null,null,null,null)),(l()(),t["\u0275eld"](5,0,null,null,39,"form",[["class","form"],["name","moveForm"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,e){var u=!0;return"submit"===n&&(u=!1!==t["\u0275nov"](l,7).onSubmit(e)&&u),"reset"===n&&(u=!1!==t["\u0275nov"](l,7).onReset()&&u),u},null,null)),t["\u0275did"](6,16384,null,0,o.D,[],null,null),t["\u0275did"](7,540672,[["formDir",4]],0,o.l,[[8,null],[8,null]],{form:[0,"form"]},null),t["\u0275prd"](2048,null,o.d,null,[o.l]),t["\u0275did"](9,16384,null,0,o.s,[[4,o.d]],null,null),(l()(),t["\u0275eld"](10,0,null,null,27,"div",[["class","modal-body"]],null,null,null,null,null)),(l()(),t["\u0275eld"](11,0,null,null,7,"p",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["To move "])),(l()(),t["\u0275eld"](13,0,null,null,1,"kbd",[],null,null,null,null,null)),(l()(),t["\u0275ted"](14,null,["","/",""])),(l()(),t["\u0275ted"](-1,null,[" to trash, click "])),(l()(),t["\u0275eld"](16,0,null,null,1,"kbd",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Move Image"])),(l()(),t["\u0275ted"](-1,null,[". Optionally, you can pick an expiration date."])),(l()(),t["\u0275eld"](19,0,null,null,18,"div",[["class","form-group"]],null,null,null,null,null)),t["\u0275did"](20,278528,null,0,a.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](21,{"has-error":0}),(l()(),t["\u0275eld"](22,0,null,null,1,"label",[["for","expires"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Protection expires at"])),(l()(),t["\u0275eld"](24,16777216,null,null,9,"input",[["bsDatepicker",""],["class","form-control"],["formControlName","expiresAt"],["placeholder","NOT PROTECTED"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"],[null,"keyup.esc"]],function(l,n,e){var u=!0;return"input"===n&&(u=!1!==t["\u0275nov"](l,25)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,25).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,25)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,25)._compositionEnd(e.target.value)&&u),"change"===n&&(u=!1!==t["\u0275nov"](l,27).onChange(e)&&u),"keyup.esc"===n&&(u=!1!==t["\u0275nov"](l,27).hide()&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,27).onBlur()&&u),u},null,null)),t["\u0275did"](25,16384,null,0,o.e,[t.Renderer2,t.ElementRef,[2,o.b]],null,null),t["\u0275did"](26,737280,null,0,r.c,[r.a,t.ElementRef,t.Renderer2,t.ViewContainerRef,s.a],{bsConfig:[0,"bsConfig"],minDate:[1,"minDate"]},null),t["\u0275did"](27,16384,null,0,r.f,[r.c,r.j,t.Renderer2,t.ElementRef,t.ChangeDetectorRef],null,null),t["\u0275prd"](1024,null,o.o,function(l){return[l]},[r.f]),t["\u0275prd"](1024,null,o.p,function(l,n){return[l,n]},[o.e,r.f]),t["\u0275did"](30,671744,null,0,o.j,[[3,o.d],[6,o.o],[8,null],[6,o.p],[2,o.F]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,o.q,null,[o.j]),t["\u0275did"](32,16384,null,0,o.r,[[4,o.q]],null,null),t["\u0275did"](33,4210688,null,0,d.a,[[2,c.a],p.a,t.ElementRef],null,null),(l()(),t["\u0275and"](16777216,null,null,1,null,I)),t["\u0275did"](35,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,S)),t["\u0275did"](37,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](38,0,null,null,6,"div",[["class","modal-footer"]],null,null,null,null,null)),(l()(),t["\u0275eld"](39,0,null,null,5,"div",[["class","button-group text-right"]],null,null,null,null,null)),(l()(),t["\u0275eld"](40,0,null,null,2,"cd-submit-button",[],null,[[null,"submitAction"]],function(l,n,e){var t=!0;return"submitAction"===n&&(t=!1!==l.component.moveImage()&&t),t},m.b,m.a)),t["\u0275did"](41,114688,null,0,f.a,[t.ElementRef],{form:[0,"form"]},{submitAction:"submitAction"}),(l()(),t["\u0275ted"](-1,0,["Move Image"])),(l()(),t["\u0275eld"](43,0,null,null,1,"cd-back-button",[["name","Cancel"]],null,null,null,g.b,g.a)),t["\u0275did"](44,49152,null,0,h.a,[a.Location,v.b],{name:[0,"name"],back:[1,"back"]},null)],function(l,n){var e=n.component;l(n,1,0,e.modalRef),l(n,7,0,e.moveForm);var u=l(n,21,0,e.moveForm.showError("expiresAt",t["\u0275nov"](n,7)));l(n,20,0,"form-group",u),l(n,26,0,e.bsConfig,e.minDate),l(n,30,0,"expiresAt"),l(n,35,0,e.moveForm.showError("expiresAt",t["\u0275nov"](n,7),"format")),l(n,37,0,e.moveForm.showError("expiresAt",t["\u0275nov"](n,7),"expired")),l(n,41,0,e.moveForm),l(n,44,0,"Cancel",e.modalRef.hide)},function(l,n){var e=n.component;l(n,5,0,t["\u0275nov"](n,9).ngClassUntouched,t["\u0275nov"](n,9).ngClassTouched,t["\u0275nov"](n,9).ngClassPristine,t["\u0275nov"](n,9).ngClassDirty,t["\u0275nov"](n,9).ngClassValid,t["\u0275nov"](n,9).ngClassInvalid,t["\u0275nov"](n,9).ngClassPending),l(n,14,0,e.poolName,e.imageName),l(n,24,0,t["\u0275nov"](n,32).ngClassUntouched,t["\u0275nov"](n,32).ngClassTouched,t["\u0275nov"](n,32).ngClassPristine,t["\u0275nov"](n,32).ngClassDirty,t["\u0275nov"](n,32).ngClassValid,t["\u0275nov"](n,32).ngClassInvalid,t["\u0275nov"](n,32).ngClassPending)})}function E(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"cd-rbd-trash-move-modal",[],null,null,null,k,R)),t["\u0275did"](1,114688,null,0,b.a,[y.a,C.a,_.a,w.a],null,null)],function(l,n){l(n,1,0)},null)}var F=t["\u0275ccf"]("cd-rbd-trash-move-modal",b.a,E,{},{},[])},JBea:function(l,n,e){"use strict";e.d(n,"a",function(){return t}),e("vCyI");var t=function(){function l(){}return l.prototype.ngOnChanges=function(){this.selection.hasSelection&&(this.selectedItem=this.selection.first())},l}()},"JIi+":function(l,n,e){"use strict";var t=e("CcnG"),u=e("eajB"),i=e("lqqz"),o=e("NJnL"),a=e("pKUh"),r=e("YAQW"),s=e("Ip0R"),d=e("25BL"),c=e("uIqm"),p=e("NUGo"),m=e("S7zO"),f=e("VTlA"),g=e("ufoC"),h=e("mSOc"),v=e("wd/R"),b=e("F/XL"),y=e("F83c"),C=e("OLbh"),_=e("0+/T"),w=e("sne2"),R=e("x38r"),I=e("vCyI"),S=e("QTAa"),k=e("kvvV"),E=e("a0VL"),F=e("Fgil"),D=e("aexS"),V=e("9nlD"),T=e("VXsX"),N=e("+lcs"),P=function(){return function(l,n){this.i18n=l,this.create={permission:"create",icon:"fa-plus",name:n.CREATE},this.rename={permission:"update",icon:"fa-pencil",name:n.RENAME},this.protect={permission:"update",icon:"fa-lock",visible:function(l){return l.hasSingleSelection&&!l.first().is_protected},name:n.PROTECT},this.unprotect={permission:"update",icon:"fa-unlock",visible:function(l){return l.hasSingleSelection&&l.first().is_protected},name:n.UNPROTECT},this.clone={permission:"create",canBePrimary:function(l){return l.hasSingleSelection},disable:function(l){return!l.hasSingleSelection||l.first().cdExecuting},icon:"fa-clone",name:n.CLONE},this.copy={permission:"create",canBePrimary:function(l){return l.hasSingleSelection},disable:function(l){return!l.hasSingleSelection||l.first().cdExecuting},icon:"fa-copy",name:n.COPY},this.rollback={permission:"update",icon:"fa-undo",name:n.ROLLBACK},this.deleteSnap={permission:"delete",icon:"fa-times",disable:function(l){var n=l.first();return!l.hasSingleSelection||n.cdExecuting||n.is_protected},name:n.DELETE},this.ordering=[this.create,this.rename,this.protect,this.unprotect,this.clone,this.copy,this.rollback,this.deleteSnap]}}(),x=function(){return function(){}}(),O=function(){function l(l,n,e,t,u,i,o,a,r,s,d){var c=this;this.authStorageService=l,this.modalService=n,this.dimlessBinaryPipe=e,this.cdDatePipe=t,this.rbdService=u,this.taskManagerService=i,this.notificationService=o,this.summaryService=a,this.taskListService=r,this.i18n=s,this.actionLabels=d,this.snapshots=[],this.selection=new I.a,this.builders={"rbd/snap/create":function(l){var n=new x;return n.name=l.snapshot_name,n}},this.permission=this.authStorageService.getPermissions().rbdImage;var p=new P(this.i18n,this.actionLabels);p.create.click=function(){return c.openCreateSnapshotModal()},p.rename.click=function(){return c.openEditSnapshotModal()},p.protect.click=function(){return c.toggleProtection()},p.unprotect.click=function(){return c.toggleProtection()};var m=function(){return c.selection.first()&&encodeURIComponent(c.poolName)+"/"+encodeURIComponent(c.rbdName)+"/"+encodeURIComponent(c.selection.first().name)};p.clone.routerLink=function(){return"/block/rbd/clone/"+m()},p.copy.routerLink=function(){return"/block/rbd/copy/"+m()},p.rollback.click=function(){return c.rollbackModal()},p.deleteSnap.click=function(){return c.deleteSnapshotModal()},this.tableActions=p.ordering}return l.prototype.ngOnInit=function(){this.columns=[{name:this.i18n("Name"),prop:"name",cellTransformation:R.a.executing,flexGrow:2},{name:this.i18n("Size"),prop:"size",flexGrow:1,cellClass:"text-right",pipe:this.dimlessBinaryPipe},{name:this.i18n("Provisioned"),prop:"disk_usage",flexGrow:1,cellClass:"text-right",pipe:this.dimlessBinaryPipe},{name:this.i18n("State"),prop:"is_protected",flexGrow:1,cellClass:"text-center",cellTemplate:this.protectTpl},{name:this.i18n("Created"),prop:"timestamp",flexGrow:1,pipe:this.cdDatePipe}]},l.prototype.ngOnChanges=function(){var l=this;this.taskListService.init(function(){return Object(b.a)(l.snapshots)},null,function(n){return l.data=n},function(){return l.data=l.snapshots},function(n){return["rbd/snap/create","rbd/snap/delete","rbd/snap/edit","rbd/snap/rollback"].includes(n.name)&&l.poolName===n.metadata.pool_name&&l.rbdName===n.metadata.image_name},function(l,n){return l.name===n.metadata.snapshot_name},this.builders)},l.prototype.openSnapshotModal=function(l,n){var e=this;void 0===n&&(n=null),this.modalRef=this.modalService.show(N.a),this.modalRef.content.poolName=this.poolName,this.modalRef.content.imageName=this.rbdName,n?this.modalRef.content.setEditing():n=this.rbdName+"_"+v().toISOString(!0),this.modalRef.content.setSnapName(n),this.modalRef.content.onSubmit.subscribe(function(n){var t=new S.a;t.name=l,t.metadata={image_name:e.rbdName,pool_name:e.poolName,snapshot_name:n},e.summaryService.addRunningTask(t),e.ngOnChanges()})},l.prototype.openCreateSnapshotModal=function(){this.openSnapshotModal("rbd/snap/create")},l.prototype.openEditSnapshotModal=function(){this.openSnapshotModal("rbd/snap/edit",this.selection.first().name)},l.prototype.toggleProtection=function(){var l=this,n=this.selection.first().name,e=this.selection.first().is_protected,t=new k.a;t.name="rbd/snap/edit",t.metadata={pool_name:this.poolName,image_name:this.rbdName,snapshot_name:n},this.rbdService.protectSnapshot(this.poolName,this.rbdName,n,!e).toPromise().then(function(){var n=new S.a;n.name=t.name,n.metadata=t.metadata,l.summaryService.addRunningTask(n),l.ngOnChanges(),l.taskManagerService.subscribe(t.name,t.metadata,function(n){l.notificationService.notifyTask(n)})})},l.prototype._asyncTask=function(l,n,e){var t=this,u=new k.a;u.name=n,u.metadata={pool_name:this.poolName,image_name:this.rbdName,snapshot_name:e},this.rbdService[l](this.poolName,this.rbdName,e).toPromise().then(function(){var l=new S.a;l.name=u.name,l.metadata=u.metadata,t.summaryService.addRunningTask(l),t.modalRef.hide(),t.ngOnChanges(),t.taskManagerService.subscribe(l.name,l.metadata,function(l){t.notificationService.notifyTask(l)})}).catch(function(){t.modalRef.content.stopLoadingSpinner()})},l.prototype.rollbackModal=function(){var l=this,n=this.selection.selected[0].name,e={titleText:this.i18n("RBD snapshot rollback"),buttonText:this.i18n("Rollback"),bodyTpl:this.rollbackTpl,bodyData:{snapName:this.poolName+"/"+this.rbdName+"@"+n},onSubmit:function(){l._asyncTask("rollbackSnapshot","rbd/snap/rollback",n)}};this.modalRef=this.modalService.show(C.a,{initialState:e})},l.prototype.deleteSnapshotModal=function(){var l=this,n=this.selection.selected[0].name;this.modalRef=this.modalService.show(_.a,{initialState:{itemDescription:this.i18n("RBD snapshot"),itemNames:[n],submitAction:function(){return l._asyncTask("deleteSnapshot","rbd/snap/delete",n)}}})},l.prototype.updateSelection=function(l){this.selection=l},l}(),q=e("DQlY"),M=e("Jm/i"),A=t["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function B(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"span",[["class","label label-success"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["PROTECTED"]))],null,null)}function j(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"span",[["class","label label-info"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["UNPROTECTED"]))],null,null)}function U(l){return t["\u0275vid"](0,[(l()(),t["\u0275and"](16777216,null,null,1,null,B)),t["\u0275did"](1,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,j)),t["\u0275did"](3,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](0,null,null,0))],function(l,n){l(n,1,0,n.context.value),l(n,3,0,!n.context.value)},null)}function G(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,null,null,null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["You are about to rollback"])),(l()(),t["\u0275eld"](2,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),t["\u0275ted"](3,null,["",""])),(l()(),t["\u0275ted"](-1,null,[".\n"]))],null,function(l,n){l(n,3,0,n.context.$implicit.snapName)})}function L(l){return t["\u0275vid"](0,[t["\u0275qud"](402653184,1,{nameTpl:0}),t["\u0275qud"](402653184,2,{protectTpl:0}),t["\u0275qud"](402653184,3,{rollbackTpl:0}),(l()(),t["\u0275eld"](3,0,null,null,3,"cd-table",[["columnMode","flex"],["selectionType","single"]],null,[[null,"updateSelection"]],function(l,n,e){var t=!0;return"updateSelection"===n&&(t=!1!==l.component.updateSelection(e)&&t),t},d.b,d.a)),t["\u0275did"](4,2867200,null,0,c.a,[t.NgZone,t.ChangeDetectorRef],{data:[0,"data"],columns:[1,"columns"],columnMode:[2,"columnMode"],selectionType:[3,"selectionType"]},{updateSelection:"updateSelection"}),(l()(),t["\u0275eld"](5,0,null,0,1,"cd-table-actions",[["class","table-actions"]],null,null,null,p.b,p.a)),t["\u0275did"](6,114688,null,0,m.a,[],{permission:[0,"permission"],selection:[1,"selection"],tableActions:[2,"tableActions"]},null),(l()(),t["\u0275and"](0,[[2,2],["protectTpl",2]],null,0,null,U)),(l()(),t["\u0275and"](0,[[3,2],["rollbackTpl",2]],null,0,null,G))],function(l,n){var e=n.component;l(n,4,0,e.data,e.columns,"flex","single"),l(n,6,0,e.permission,e.selection,e.tableActions)},null)}var z=e("EFGL"),W=e("aAWM"),$=e("aXbf"),X=e("o8EM"),Y=e("nSDx"),K=e("o4+5"),J=e("JBea");e.d(n,"b",function(){return Z}),e.d(n,"c",function(){return dl}),e.d(n,"a",function(){return pl});var Z=t["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function Q(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,4,null,null,null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Only available for RBD images with "])),(l()(),t["\u0275eld"](2,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["fast-diff"])),(l()(),t["\u0275ted"](-1,null,[" enabled"]))],null,null)}function H(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"span",[],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,1,"span",[["class","badge badge-pill badge-primary margin-right-sm"]],null,null,null,null,null)),(l()(),t["\u0275ted"](2,null,["",""]))],null,function(l,n){l(n,2,0,n.context.$implicit)})}function ll(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,3,"span",[],null,null,null,null,null)),(l()(),t["\u0275eld"](1,16777216,null,null,2,"span",[["class","text-muted"],["placement","top"]],[[1,"aria-describedby",0]],null,null,null,null)),t["\u0275did"](2,212992,null,0,u.c,[t.ViewContainerRef,i.a,u.a,t.ElementRef,t.Renderer2,o.a],{tooltip:[0,"tooltip"],placement:[1,"placement"]},null),(l()(),t["\u0275ted"](-1,null,["N/A"]))],function(l,n){l(n,2,0,t["\u0275nov"](n.parent.parent,5),"top")},function(l,n){l(n,1,0,t["\u0275nov"](n,2).ariaDescribedby)})}function nl(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"span",[],null,null,null,null,null)),(l()(),t["\u0275ted"](1,null,[" "," "])),t["\u0275ppd"](2,1)],null,function(l,n){var e=n.component,u=t["\u0275unv"](n,1,0,l(n,2,0,t["\u0275nov"](n.parent.parent,2),e.selectedItem.disk_usage));l(n,1,0,u)})}function el(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,3,"span",[],null,null,null,null,null)),(l()(),t["\u0275eld"](1,16777216,null,null,2,"span",[["class","text-muted"],["placement","top"]],[[1,"aria-describedby",0]],null,null,null,null)),t["\u0275did"](2,212992,null,0,u.c,[t.ViewContainerRef,i.a,u.a,t.ElementRef,t.Renderer2,o.a],{tooltip:[0,"tooltip"],placement:[1,"placement"]},null),(l()(),t["\u0275ted"](-1,null,["N/A"]))],function(l,n){l(n,2,0,t["\u0275nov"](n.parent.parent,5),"top")},function(l,n){l(n,1,0,t["\u0275nov"](n,2).ariaDescribedby)})}function tl(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"span",[],null,null,null,null,null)),(l()(),t["\u0275ted"](1,null,[" "," "])),t["\u0275ppd"](2,1)],null,function(l,n){var e=n.component,u=t["\u0275unv"](n,1,0,l(n,2,0,t["\u0275nov"](n.parent.parent,2),e.selectedItem.total_disk_usage));l(n,1,0,u)})}function ul(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t["\u0275ted"](1,null,[""," /"," @",""]))],null,function(l,n){var e=n.component;l(n,1,0,e.selectedItem.parent.pool_name,e.selectedItem.parent.image_name,e.selectedItem.parent.snap_name)})}function il(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["-"]))],null,null)}function ol(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,110,"tabset",[],[[2,"tab-container",null]],null,null,a.b,a.a)),t["\u0275did"](1,180224,null,0,r.d,[r.e,t.Renderer2,t.ElementRef],null,null),(l()(),t["\u0275eld"](2,0,null,0,99,"tab",[["heading","Details"]],[[1,"id",0],[2,"active",null],[2,"tab-pane",null]],null,null,null,null)),t["\u0275did"](3,212992,null,0,r.b,[r.d,t.ElementRef,t.Renderer2],{heading:[0,"heading"]},null),(l()(),t["\u0275eld"](4,0,null,null,97,"table",[["class","table table-striped table-bordered"]],null,null,null,null,null)),(l()(),t["\u0275eld"](5,0,null,null,96,"tbody",[],null,null,null,null,null)),(l()(),t["\u0275eld"](6,0,null,null,4,"tr",[],null,null,null,null,null)),(l()(),t["\u0275eld"](7,0,null,null,1,"td",[["class","bold col-sm-1"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Name"])),(l()(),t["\u0275eld"](9,0,null,null,1,"td",[["class","col-sm-3"]],null,null,null,null,null)),(l()(),t["\u0275ted"](10,null,["",""])),(l()(),t["\u0275eld"](11,0,null,null,4,"tr",[],null,null,null,null,null)),(l()(),t["\u0275eld"](12,0,null,null,1,"td",[["class","bold col-sm-1"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Pool"])),(l()(),t["\u0275eld"](14,0,null,null,1,"td",[["class","col-sm-3"]],null,null,null,null,null)),(l()(),t["\u0275ted"](15,null,["",""])),(l()(),t["\u0275eld"](16,0,null,null,5,"tr",[],null,null,null,null,null)),(l()(),t["\u0275eld"](17,0,null,null,1,"td",[["class","bold col-sm-1"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Data Pool"])),(l()(),t["\u0275eld"](19,0,null,null,2,"td",[["class","col-sm-3"]],null,null,null,null,null)),(l()(),t["\u0275ted"](20,null,["",""])),t["\u0275ppd"](21,1),(l()(),t["\u0275eld"](22,0,null,null,5,"tr",[],null,null,null,null,null)),(l()(),t["\u0275eld"](23,0,null,null,1,"td",[["class","bold col-sm-1"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Created"])),(l()(),t["\u0275eld"](25,0,null,null,2,"td",[["class","col-sm-3"]],null,null,null,null,null)),(l()(),t["\u0275ted"](26,null,["",""])),t["\u0275ppd"](27,1),(l()(),t["\u0275eld"](28,0,null,null,5,"tr",[],null,null,null,null,null)),(l()(),t["\u0275eld"](29,0,null,null,1,"td",[["class","bold col-sm-1"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Size"])),(l()(),t["\u0275eld"](31,0,null,null,2,"td",[["class","col-sm-3"]],null,null,null,null,null)),(l()(),t["\u0275ted"](32,null,["",""])),t["\u0275ppd"](33,1),(l()(),t["\u0275eld"](34,0,null,null,5,"tr",[],null,null,null,null,null)),(l()(),t["\u0275eld"](35,0,null,null,1,"td",[["class","bold col-sm-1"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Objects"])),(l()(),t["\u0275eld"](37,0,null,null,2,"td",[["class","col-sm-3"]],null,null,null,null,null)),(l()(),t["\u0275ted"](38,null,["",""])),t["\u0275ppd"](39,1),(l()(),t["\u0275eld"](40,0,null,null,5,"tr",[],null,null,null,null,null)),(l()(),t["\u0275eld"](41,0,null,null,1,"td",[["class","bold col-sm-1"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Object size"])),(l()(),t["\u0275eld"](43,0,null,null,2,"td",[["class","col-sm-3"]],null,null,null,null,null)),(l()(),t["\u0275ted"](44,null,["",""])),t["\u0275ppd"](45,1),(l()(),t["\u0275eld"](46,0,null,null,5,"tr",[],null,null,null,null,null)),(l()(),t["\u0275eld"](47,0,null,null,1,"td",[["class","bold col-sm-1"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Features"])),(l()(),t["\u0275eld"](49,0,null,null,2,"td",[["class","col-sm-3"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,H)),t["\u0275did"](51,278528,null,0,s.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(l()(),t["\u0275eld"](52,0,null,null,7,"tr",[],null,null,null,null,null)),(l()(),t["\u0275eld"](53,0,null,null,1,"td",[["class","bold col-sm-1"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Provisioned"])),(l()(),t["\u0275eld"](55,0,null,null,4,"td",[["class","col-sm-3"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,ll)),t["\u0275did"](57,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,nl)),t["\u0275did"](59,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](60,0,null,null,7,"tr",[],null,null,null,null,null)),(l()(),t["\u0275eld"](61,0,null,null,1,"td",[["class","bold col-sm-1"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Total provisioned"])),(l()(),t["\u0275eld"](63,0,null,null,4,"td",[["class","col-sm-3"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,el)),t["\u0275did"](65,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,tl)),t["\u0275did"](67,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](68,0,null,null,5,"tr",[],null,null,null,null,null)),(l()(),t["\u0275eld"](69,0,null,null,1,"td",[["class","bold col-sm-1"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Striping unit"])),(l()(),t["\u0275eld"](71,0,null,null,2,"td",[["class","col-sm-3"]],null,null,null,null,null)),(l()(),t["\u0275ted"](72,null,["",""])),t["\u0275ppd"](73,1),(l()(),t["\u0275eld"](74,0,null,null,4,"tr",[],null,null,null,null,null)),(l()(),t["\u0275eld"](75,0,null,null,1,"td",[["class","bold col-sm-1"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Striping count"])),(l()(),t["\u0275eld"](77,0,null,null,1,"td",[["class","col-sm-3"]],null,null,null,null,null)),(l()(),t["\u0275ted"](78,null,["",""])),(l()(),t["\u0275eld"](79,0,null,null,7,"tr",[],null,null,null,null,null)),(l()(),t["\u0275eld"](80,0,null,null,1,"td",[["class","bold col-sm-1"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Parent"])),(l()(),t["\u0275eld"](82,0,null,null,4,"td",[["class","col-sm-3"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,ul)),t["\u0275did"](84,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,il)),t["\u0275did"](86,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](87,0,null,null,4,"tr",[],null,null,null,null,null)),(l()(),t["\u0275eld"](88,0,null,null,1,"td",[["class","bold col-sm-1"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Block name prefix"])),(l()(),t["\u0275eld"](90,0,null,null,1,"td",[["class","col-sm-3"]],null,null,null,null,null)),(l()(),t["\u0275ted"](91,null,["",""])),(l()(),t["\u0275eld"](92,0,null,null,4,"tr",[],null,null,null,null,null)),(l()(),t["\u0275eld"](93,0,null,null,1,"td",[["class","bold col-sm-1"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Order"])),(l()(),t["\u0275eld"](95,0,null,null,1,"td",[["class","col-sm-3"]],null,null,null,null,null)),(l()(),t["\u0275ted"](96,null,["",""])),(l()(),t["\u0275eld"](97,0,null,null,4,"tr",[],null,null,null,null,null)),(l()(),t["\u0275eld"](98,0,null,null,1,"td",[["class","bold"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Format Version"])),(l()(),t["\u0275eld"](100,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),t["\u0275ted"](101,null,["",""])),(l()(),t["\u0275eld"](102,0,null,0,4,"tab",[["heading","Snapshots"]],[[1,"id",0],[2,"active",null],[2,"tab-pane",null]],null,null,null,null)),t["\u0275did"](103,212992,null,0,r.b,[r.d,t.ElementRef,t.Renderer2],{heading:[0,"heading"]},null),(l()(),t["\u0275eld"](104,0,null,null,2,"cd-rbd-snapshot-list",[],null,null,null,L,A)),t["\u0275prd"](131584,null,f.a,f.a,[g.a,h.a]),t["\u0275did"](106,638976,null,0,O,[D.a,q.b,F.a,E.a,y.a,T.a,V.a,h.a,f.a,M.a,w.b],{snapshots:[0,"snapshots"],poolName:[1,"poolName"],rbdName:[2,"rbdName"]},null),(l()(),t["\u0275eld"](107,0,null,0,3,"tab",[["heading","Configuration"]],[[1,"id",0],[2,"active",null],[2,"tab-pane",null]],null,null,null,null)),t["\u0275did"](108,212992,null,0,r.b,[r.d,t.ElementRef,t.Renderer2],{heading:[0,"heading"]},null),(l()(),t["\u0275eld"](109,0,null,null,1,"cd-rbd-configuration-table",[],null,null,null,z.b,z.a)),t["\u0275did"](110,638976,null,0,W.a,[$.a,X.a,M.a],{data:[0,"data"]},null)],function(l,n){var e=n.component;l(n,3,0,"Details"),l(n,51,0,e.selectedItem.features_name),l(n,57,0,-1===(null==e.selectedItem.features_name?null:e.selectedItem.features_name.indexOf("fast-diff"))),l(n,59,0,-1!==(null==e.selectedItem.features_name?null:e.selectedItem.features_name.indexOf("fast-diff"))),l(n,65,0,-1===(null==e.selectedItem.features_name?null:e.selectedItem.features_name.indexOf("fast-diff"))),l(n,67,0,-1!==(null==e.selectedItem.features_name?null:e.selectedItem.features_name.indexOf("fast-diff"))),l(n,84,0,e.selectedItem.parent),l(n,86,0,!e.selectedItem.parent),l(n,103,0,"Snapshots"),l(n,106,0,e.selectedItem.snapshots,e.selectedItem.pool_name,e.selectedItem.name),l(n,108,0,"Configuration"),l(n,110,0,e.selectedItem.configuration)},function(l,n){var e=n.component;l(n,0,0,t["\u0275nov"](n,1).clazz),l(n,2,0,t["\u0275nov"](n,3).id,t["\u0275nov"](n,3).active,t["\u0275nov"](n,3).addClass),l(n,10,0,e.selectedItem.name),l(n,15,0,e.selectedItem.pool_name);var u=t["\u0275unv"](n,20,0,l(n,21,0,t["\u0275nov"](n.parent,0),e.selectedItem.data_pool));l(n,20,0,u);var i=t["\u0275unv"](n,26,0,l(n,27,0,t["\u0275nov"](n.parent,1),e.selectedItem.timestamp));l(n,26,0,i);var o=t["\u0275unv"](n,32,0,l(n,33,0,t["\u0275nov"](n.parent,2),e.selectedItem.size));l(n,32,0,o);var a=t["\u0275unv"](n,38,0,l(n,39,0,t["\u0275nov"](n.parent,3),e.selectedItem.num_objs));l(n,38,0,a);var r=t["\u0275unv"](n,44,0,l(n,45,0,t["\u0275nov"](n.parent,2),e.selectedItem.obj_size));l(n,44,0,r);var s=t["\u0275unv"](n,72,0,l(n,73,0,t["\u0275nov"](n.parent,2),e.selectedItem.stripe_unit));l(n,72,0,s),l(n,78,0,e.selectedItem.stripe_count),l(n,91,0,e.selectedItem.block_name_prefix),l(n,96,0,e.selectedItem.order),l(n,101,0,e.selection.image_format),l(n,102,0,t["\u0275nov"](n,103).id,t["\u0275nov"](n,103).active,t["\u0275nov"](n,103).addClass),l(n,107,0,t["\u0275nov"](n,108).id,t["\u0275nov"](n,108).active,t["\u0275nov"](n,108).addClass)})}function al(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,3,null,null,null,null,null,null,null)),(l()(),t["\u0275eld"](1,16777216,null,null,2,"strong",[["tooltip","This setting overrides the global value"]],[[1,"aria-describedby",0]],null,null,null,null)),t["\u0275did"](2,212992,null,0,u.c,[t.ViewContainerRef,i.a,u.a,t.ElementRef,t.Renderer2,o.a],{tooltip:[0,"tooltip"]},null),(l()(),t["\u0275ted"](-1,null,["Image"])),(l()(),t["\u0275and"](0,null,null,0))],function(l,n){l(n,2,0,"This setting overrides the global value")},function(l,n){l(n,1,0,t["\u0275nov"](n,2).ariaDescribedby)})}function rl(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,16777216,null,null,2,"span",[["tooltip","This is the global value. No value for this option has been set for this image."]],[[1,"aria-describedby",0]],null,null,null,null)),t["\u0275did"](1,212992,null,0,u.c,[t.ViewContainerRef,i.a,u.a,t.ElementRef,t.Renderer2,o.a],{tooltip:[0,"tooltip"]},null),(l()(),t["\u0275ted"](-1,null,["Global"])),(l()(),t["\u0275and"](0,null,null,0))],function(l,n){l(n,1,0,"This is the global value. No value for this option has been set for this image.")},function(l,n){l(n,0,0,t["\u0275nov"](n,1).ariaDescribedby)})}function sl(l){return t["\u0275vid"](0,[(l()(),t["\u0275and"](16777216,null,null,1,null,al)),t["\u0275did"](1,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(l()(),t["\u0275and"](0,[["global",2]],null,0,null,rl))],function(l,n){l(n,1,0,n.context.value-0,t["\u0275nov"](n,2))},null)}function dl(l){return t["\u0275vid"](0,[t["\u0275pid"](0,Y.a,[]),t["\u0275pid"](0,E.a,[s.DatePipe]),t["\u0275pid"](0,F.a,[$.a]),t["\u0275pid"](0,K.a,[$.a]),t["\u0275qud"](402653184,1,{poolConfigurationSourceTpl:0}),(l()(),t["\u0275and"](0,[["usageNotAvailableTooltipTpl",2]],null,0,null,Q)),(l()(),t["\u0275and"](16777216,null,null,1,null,ol)),t["\u0275did"](7,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](0,[[1,2],["poolConfigurationSourceTpl",2]],null,0,null,sl))],function(l,n){var e=n.component;l(n,7,0,null==e.selection?null:e.selection.hasSingleSelection)},null)}function cl(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"cd-rbd-details",[],null,null,null,dl,Z)),t["\u0275did"](1,573440,null,0,J.a,[],null,null)],null,null)}var pl=t["\u0275ccf"]("cd-rbd-details",J.a,cl,{selection:"selection",images:"images"},{},[])},L4us:function(l,n,e){"use strict";var t=e("gIcY"),u=(e("XED3"),e("QFaf")),i=e("kvvV"),o=(e("kn/O"),function(){return function(){}}());e.d(n,"a",function(){return a});var a=function(){function l(l,n,e){this.modalRef=l,this.rbdMirroringService=n,this.taskWrapper=e,this.bsConfig={containerClass:"theme-default"},this.createForm()}return l.prototype.createForm=function(){this.editPeerForm=new u.a({clusterName:new t.i("",{validators:[t.A.required,this.validateClusterName]}),clientID:new t.i("",{validators:[t.A.required,this.validateClientID]}),monAddr:new t.i("",{validators:[this.validateMonAddr]}),key:new t.i("",{validators:[this.validateKey]})})},l.prototype.ngOnInit=function(){var l=this;this.pattern=this.poolName+"/"+this.peerUUID,"edit"===this.mode&&this.rbdMirroringService.getPeer(this.poolName,this.peerUUID).subscribe(function(n){l.setResponse(n)})},l.prototype.validateClusterName=function(l){if(!l.value.match(/^[\w\-_]*$/))return{invalidClusterName:{value:l.value}}},l.prototype.validateClientID=function(l){if(!l.value.match(/^(?!client\.)[\w\-_.]*$/))return{invalidClientID:{value:l.value}}},l.prototype.validateMonAddr=function(l){if(!l.value.match(/^[,; ]*([\w.\-_\[\]]+(:[\d]+)?[,; ]*)*$/))return{invalidMonAddr:{value:l.value}}},l.prototype.validateKey=function(l){try{if(""===l.value||atob(l.value))return null}catch(n){}return{invalidKey:{value:l.value}}},l.prototype.setResponse=function(l){this.response=l,this.editPeerForm.get("clusterName").setValue(l.cluster_name),this.editPeerForm.get("clientID").setValue(l.client_id),this.editPeerForm.get("monAddr").setValue(l.mon_host),this.editPeerForm.get("key").setValue(l.key)},l.prototype.update=function(){var l=this,n=new o;n.cluster_name=this.editPeerForm.getValue("clusterName"),n.client_id=this.editPeerForm.getValue("clientID"),n.mon_host=this.editPeerForm.getValue("monAddr"),n.key=this.editPeerForm.getValue("key"),this.taskWrapper.wrapTaskAroundCall("edit"===this.mode?{task:new i.a("rbd/mirroring/peer/edit",{pool_name:this.poolName}),call:this.rbdMirroringService.updatePeer(this.poolName,this.peerUUID,n)}:{task:new i.a("rbd/mirroring/peer/add",{pool_name:this.poolName}),call:this.rbdMirroringService.addPeer(this.poolName,n)}).subscribe(void 0,function(){return l.editPeerForm.setErrors({cdSubmitButton:!0})},function(){l.rbdMirroringService.refresh(),l.modalRef.hide()})},l}()},MyVl:function(l,n,e){"use strict";var t,u=e("CcnG"),i=e("gIcY"),o=e("LvDl"),a=e("svcd"),r=e("15JJ"),s=(e("Ekvf"),e("F83c"),e("sne2"),e("QFaf")),d=e("PhyI"),c=e("kvvV"),p=(e("Fgil"),e("aexS"),e("aXbf"),e("kn/O"),e("u0yg")),m=function(){return function(){this.features=[]}}(),f=function(){return function(){this.features=[]}}(),g=e("mrSG"),h=function(l){function n(){var n=null!==l&&l.apply(this,arguments)||this;return n.features=[],n}return g.__extends(n,l),n}(function(){return function(){}}()),v=function(){return function(){this.features=[]}}();!function(l){l.editing="editing",l.cloning="cloning",l.copying="copying"}(t||(t={})),e.d(n,"a",function(){return b});var b=function(){function l(l,n,e,i,o,r,s,d,c,p){this.authStorageService=l,this.route=n,this.poolService=e,this.rbdService=i,this.formatter=o,this.taskWrapper=r,this.dimlessBinaryPipe=s,this.i18n=d,this.actionLabels=c,this.router=p,this.pools=null,this.allPools=null,this.dataPools=null,this.allDataPools=null,this.featuresList=[],this.initializeConfigData=new u.EventEmitter,this.advancedEnabled=!1,this.rbdFormMode=t,this.defaultObjectSize="4 MiB",this.objectSizes=["4 KiB","8 KiB","16 KiB","32 KiB","64 KiB","128 KiB","256 KiB","512 KiB","1 MiB","2 MiB","4 MiB","8 MiB","16 MiB","32 MiB"],this.rbdImage=new a.a,this.poolPermission=this.authStorageService.getPermissions().pool,this.resource=this.i18n("RBD"),this.features={"deep-flatten":{desc:this.i18n("Deep flatten"),requires:null,allowEnable:!1,allowDisable:!0},layering:{desc:this.i18n("Layering"),requires:null,allowEnable:!1,allowDisable:!1},"exclusive-lock":{desc:this.i18n("Exclusive lock"),requires:null,allowEnable:!0,allowDisable:!0},"object-map":{desc:this.i18n("Object map (requires exclusive-lock)"),requires:"exclusive-lock",allowEnable:!0,allowDisable:!0,initDisabled:!0},journaling:{desc:this.i18n("Journaling (requires exclusive-lock)"),requires:"exclusive-lock",allowEnable:!0,allowDisable:!0,initDisabled:!0},"fast-diff":{desc:this.i18n("Fast diff (interlocked with object-map)"),requires:"object-map",allowEnable:!0,allowDisable:!0,interlockedWith:"object-map",initDisabled:!0}},this.featuresList=this.objToArray(this.features),this.createForm()}return l.prototype.objToArray=function(l){return o.map(l,function(l,n){return Object.assign(l,{key:n})})},l.prototype.createForm=function(){this.rbdForm=new s.a({parent:new i.i(""),name:new i.i("",{validators:[i.A.required,i.A.pattern(/^[^@\/]+?$/)]}),pool:new i.i(null,{validators:[i.A.required]}),useDataPool:new i.i(!1),dataPool:new i.i(null),size:new i.i(null,{updateOn:"blur"}),obj_size:new i.i(this.defaultObjectSize),features:new s.a(this.featuresList.reduce(function(l,n){return l[n.key]=new i.i({value:!1,disabled:!!n.initDisabled}),l},{})),stripingUnit:new i.i(null),stripingCount:new i.i(null,{updateOn:"blur"})},this.validateRbdForm(this.formatter))},l.prototype.disableForEdit=function(){var l=this;this.rbdForm.get("parent").disable(),this.rbdForm.get("pool").disable(),this.rbdForm.get("useDataPool").disable(),this.rbdForm.get("dataPool").disable(),this.rbdForm.get("obj_size").disable(),this.rbdForm.get("stripingUnit").disable(),this.rbdForm.get("stripingCount").disable(),this.rbdImage.subscribe(function(n){n.image_format===p.a.V1&&(l.rbdForm.get("deep-flatten").disable(),l.rbdForm.get("layering").disable(),l.rbdForm.get("exclusive-lock").disable())})},l.prototype.disableForClone=function(){this.rbdForm.get("parent").disable(),this.rbdForm.get("size").disable()},l.prototype.disableForCopy=function(){this.rbdForm.get("parent").disable(),this.rbdForm.get("size").disable()},l.prototype.ngOnInit=function(){var l=this;this.router.url.startsWith("/block/rbd/edit")?(this.mode=this.rbdFormMode.editing,this.action=this.actionLabels.EDIT,this.disableForEdit()):this.router.url.startsWith("/block/rbd/clone")?(this.mode=this.rbdFormMode.cloning,this.disableForClone(),this.action=this.actionLabels.CLONE):this.router.url.startsWith("/block/rbd/copy")?(this.mode=this.rbdFormMode.copying,this.action=this.actionLabels.COPY,this.disableForCopy()):this.action=this.actionLabels.CREATE,this.mode===this.rbdFormMode.editing||this.mode===this.rbdFormMode.cloning||this.mode===this.rbdFormMode.copying?this.route.params.subscribe(function(n){var e=decodeURIComponent(n.pool),t=decodeURIComponent(n.name);n.snap&&(l.snapName=decodeURIComponent(n.snap)),l.rbdService.get(e,t).subscribe(function(n){l.setResponse(n,l.snapName),l.rbdImage.next(n)})}):this.rbdService.defaultFeatures().subscribe(function(n){l.setFeatures(n)}),this.mode!==this.rbdFormMode.editing&&this.poolPermission.read&&this.poolService.list(["pool_name","type","flags_names","application_metadata"]).then(function(n){for(var e=[],t=[],u=0,i=n;u<i.length;u++){var a=i[u];-1!==o.indexOf(a.application_metadata,"rbd")&&(a.pool_name.includes("/")||("replicated"===a.type?(e.push(a),t.push(a)):"erasure"===a.type&&-1!==a.flags_names.indexOf("ec_overwrites")&&t.push(a)))}if(l.pools=e,l.allPools=e,l.dataPools=t,l.allDataPools=t,1===l.pools.length){var r=l.pools[0].pool_name;l.rbdForm.get("pool").setValue(r),l.onPoolChange(r)}}),o.each(this.features,function(n){l.rbdForm.get("features").get(n.key).valueChanges.subscribe(function(e){return l.featureFormUpdate(n.key,e)})})},l.prototype.onPoolChange=function(l){var n=this.allDataPools.filter(function(n){return n.pool_name!==l});this.rbdForm.getValue("dataPool")===l&&this.rbdForm.get("dataPool").setValue(null),this.dataPools=n},l.prototype.onUseDataPoolChange=function(){this.rbdForm.getValue("useDataPool")||(this.rbdForm.get("dataPool").setValue(null),this.onDataPoolChange(null))},l.prototype.onDataPoolChange=function(l){var n=this.allPools.filter(function(n){return n.pool_name!==l});this.rbdForm.getValue("pool")===l&&this.rbdForm.get("pool").setValue(null),this.pools=n},l.prototype.validateRbdForm=function(l){var n=this;return function(e){var t=e.get("useDataPool"),u=e.get("dataPool"),i=null;t.value&&null==u.value&&(i={required:!0}),u.setErrors(i);var o=e.get("size"),a=e.get("obj_size"),r=l.toBytes(null!=a.value?a.value:n.defaultObjectSize),s=e.get("stripingCount"),d=null!=s.value?s.value:1,c=null;null===o.value?c={required:!0}:d*r>l.toBytes(o.value)&&(c={invalidSizeObject:!0}),o.setErrors(c);var p=e.get("stripingUnit"),m=null;null===p.value&&null!==s.value?m={required:!0}:null!==p.value&&l.toBytes(p.value)>r&&(m={invalidStripingUnit:!0}),p.setErrors(m);var f=null;return null===s.value&&null!==p.value?f={required:!0}:d<1&&(f={min:!0}),s.setErrors(f),null}},l.prototype.getDependendChildFeatures=function(l){return o.filter(this.features,function(n){return n.requires===l})||[]},l.prototype.deepBoxCheck=function(l,n){var e=this;this.getDependendChildFeatures(l).forEach(function(l){var t=e.rbdForm.get(l.key);n?t.enable({emitEvent:!1}):(t.disable({emitEvent:!1}),t.setValue(!1,{emitEvent:!1}),e.deepBoxCheck(l.key,n));var u=e.rbdForm.get("features");e.mode===e.rbdFormMode.editing&&u.get(l.key).enabled&&((-1===e.response.features_name.indexOf(l.key)||l.allowDisable)&&(-1!==e.response.features_name.indexOf(l.key)||l.allowEnable)||u.get(l.key).disable())})},l.prototype.interlockCheck=function(l,n){var e=this,t=this.featuresList.find(function(n){return n.key===l});if(this.response){var u=null!=t.interlockedWith,i=this.featuresList.find(function(l){return l.interlockedWith===t.key}),a=!!this.response.features_name.find(function(l){return l===t.key});if(u){if(a!==!!this.response.features_name.find(function(l){return l===t.interlockedWith}))return}else if(i&&!!this.response.features_name.find(function(l){return l===i.key})!==a)return}n?o.filter(this.features,function(n){return n.interlockedWith===l}).forEach(function(l){return e.rbdForm.get(l.key).setValue(!0,{emitEvent:!1})}):t.interlockedWith&&this.rbdForm.get("features").get(t.interlockedWith).setValue(!1)},l.prototype.featureFormUpdate=function(l,n){if(n){var e=this.features[l].requires;if(e&&!this.rbdForm.getValue(e))return void this.rbdForm.get("features."+l).setValue(!1)}this.deepBoxCheck(l,n),this.interlockCheck(l,n)},l.prototype.setFeatures=function(l){var n=this,e=this.rbdForm.get("features");o.forIn(this.features,function(t){-1!==l.indexOf(t.key)&&e.get(t.key).setValue(!0),n.featureFormUpdate(t.key,e.get(t.key).value)})},l.prototype.setResponse=function(l,n){if(this.response=l,this.mode===this.rbdFormMode.cloning)this.rbdForm.get("parent").setValue(l.pool_name+"/"+l.name+"@"+n);else if(this.mode===this.rbdFormMode.copying)n?this.rbdForm.get("parent").setValue(l.pool_name+"/"+l.name+"@"+n):this.rbdForm.get("parent").setValue(l.pool_name+"/"+l.name);else if(l.parent){var e=l.parent;this.rbdForm.get("parent").setValue(e.pool_name+"/"+e.image_name+"@"+e.snap_name)}this.mode===this.rbdFormMode.editing&&this.rbdForm.get("name").setValue(l.name),this.rbdForm.get("pool").setValue(l.pool_name),l.data_pool&&(this.rbdForm.get("useDataPool").setValue(!0),this.rbdForm.get("dataPool").setValue(l.data_pool)),this.rbdForm.get("size").setValue(this.dimlessBinaryPipe.transform(l.size)),this.rbdForm.get("obj_size").setValue(this.dimlessBinaryPipe.transform(l.obj_size)),this.setFeatures(l.features_name),this.rbdForm.get("stripingUnit").setValue(this.dimlessBinaryPipe.transform(l.stripe_unit)),this.rbdForm.get("stripingCount").setValue(l.stripe_count),this.initializeConfigData.emit({initialData:this.response.configuration,sourceType:d.a.image})},l.prototype.createRequest=function(){var l=this,n=new h;return n.pool_name=this.rbdForm.getValue("pool"),n.name=this.rbdForm.getValue("name"),n.size=this.formatter.toBytes(this.rbdForm.getValue("size")),n.obj_size=this.formatter.toBytes(this.rbdForm.getValue("obj_size")),o.forIn(this.features,function(e){l.rbdForm.getValue(e.key)&&n.features.push(e.key)}),n.stripe_unit=this.formatter.toBytes(this.rbdForm.getValue("stripingUnit")),n.stripe_count=this.rbdForm.getValue("stripingCount"),n.data_pool=this.rbdForm.getValue("dataPool"),n.configuration=this.getDirtyConfigurationValues(),n},l.prototype.createAction=function(){var l=this.createRequest();return this.taskWrapper.wrapTaskAroundCall({task:new c.a("rbd/create",{pool_name:l.pool_name,image_name:l.name}),call:this.rbdService.create(l)})},l.prototype.editRequest=function(){var l=this,n=new v;return n.name=this.rbdForm.getValue("name"),n.size=this.formatter.toBytes(this.rbdForm.getValue("size")),o.forIn(this.features,function(e){l.rbdForm.getValue(e.key)&&n.features.push(e.key)}),n.configuration=this.getDirtyConfigurationValues(),n},l.prototype.cloneRequest=function(){var l=this,n=new m;return n.child_pool_name=this.rbdForm.getValue("pool"),n.child_image_name=this.rbdForm.getValue("name"),n.obj_size=this.formatter.toBytes(this.rbdForm.getValue("obj_size")),o.forIn(this.features,function(e){l.rbdForm.getValue(e.key)&&n.features.push(e.key)}),n.stripe_unit=this.formatter.toBytes(this.rbdForm.getValue("stripingUnit")),n.stripe_count=this.rbdForm.getValue("stripingCount"),n.data_pool=this.rbdForm.getValue("dataPool"),n.configuration=this.getDirtyConfigurationValues(!0,d.a.image),n},l.prototype.editAction=function(){return this.taskWrapper.wrapTaskAroundCall({task:new c.a("rbd/edit",{pool_name:this.response.pool_name,image_name:this.response.name}),call:this.rbdService.update(this.response.pool_name,this.response.name,this.editRequest())})},l.prototype.cloneAction=function(){var l=this.cloneRequest();return this.taskWrapper.wrapTaskAroundCall({task:new c.a("rbd/clone",{parent_pool_name:this.response.pool_name,parent_image_name:this.response.name,parent_snap_name:this.snapName,child_pool_name:l.child_pool_name,child_image_name:l.child_image_name}),call:this.rbdService.cloneSnapshot(this.response.pool_name,this.response.name,this.snapName,l)})},l.prototype.copyRequest=function(){var l=this,n=new f;return this.snapName&&(n.snapshot_name=this.snapName),n.dest_pool_name=this.rbdForm.getValue("pool"),n.dest_image_name=this.rbdForm.getValue("name"),n.obj_size=this.formatter.toBytes(this.rbdForm.getValue("obj_size")),o.forIn(this.features,function(e){l.rbdForm.getValue(e.key)&&n.features.push(e.key)}),n.stripe_unit=this.formatter.toBytes(this.rbdForm.getValue("stripingUnit")),n.stripe_count=this.rbdForm.getValue("stripingCount"),n.data_pool=this.rbdForm.getValue("dataPool"),n.configuration=this.getDirtyConfigurationValues(!0,d.a.image),n},l.prototype.copyAction=function(){var l=this.copyRequest();return this.taskWrapper.wrapTaskAroundCall({task:new c.a("rbd/copy",{src_pool_name:this.response.pool_name,src_image_name:this.response.name,dest_pool_name:l.dest_pool_name,dest_image_name:l.dest_image_name}),call:this.rbdService.copy(this.response.pool_name,this.response.name,l)})},l.prototype.submit=function(){var l=this;this.mode||this.rbdImage.next("create"),this.rbdImage.complete(),this.rbdImage.pipe(Object(r.a)(function(){return l.mode===l.rbdFormMode.editing?l.editAction():l.mode===l.rbdFormMode.cloning?l.cloneAction():l.mode===l.rbdFormMode.copying?l.copyAction():l.createAction()})).subscribe(function(){},function(){return l.rbdForm.setErrors({cdSubmitButton:!0})},function(){return l.router.navigate(["/block/rbd"])})},l}()},OcYo:function(l,n,e){"use strict";e.d(n,"a",function(){return t});var t=function(){function l(l,n,e){this.elementRef=l,this.renderer=n,this.toastr=e}return l.prototype.ngOnInit=function(){var l=this.renderer.createElement("i");this.renderer.addClass(l,"icon-prepend"),this.renderer.addClass(l,"fa"),this.renderer.addClass(l,"fa-clipboard"),this.renderer.appendChild(this.elementRef.nativeElement,l)},l.prototype.getInputElement=function(){return document.getElementById(this.cdCopy2ClipboardButton)},l.prototype.onClick=function(){try{var l=document.createElement("input");l.value=this.getInputElement().value,document.body.appendChild(l),l.select(),document.execCommand("copy"),document.body.removeChild(l),this.toastr.success("Copied text to the clipboard successfully.")}catch(n){this.toastr.error("Failed to copy text to the clipboard.")}},l}()},PhyI:function(l,n,e){"use strict";e.d(n,"a",function(){return t}),e.d(n,"b",function(){return u});var t=function(l){return l[l.global=0]="global",l[l.pool=1]="pool",l[l.image=2]="image",l}({}),u=function(l){return l[l.bps=0]="bps",l[l.iops=1]="iops",l[l.milliseconds=2]="milliseconds",l}({})},RIVN:function(l,n,e){"use strict";var t=e("CcnG"),u=e("C6Ij"),i=e("AWcq"),o=e("Ip0R"),a=function(){function l(){}return l.prototype.transform=function(l){return"warning"===l?"label label-warning":"error"===l?"label label-danger":"success"===l?"label label-success":"label label-info"},l}(),r=e("25BL"),s=e("uIqm"),d=e("XED3"),c=e("85J/"),p=function(){function l(l,n,e){this.rbdMirroringService=l,this.cephShortVersionPipe=n,this.i18n=e}return l.prototype.ngOnInit=function(){var l=this;this.columns=[{prop:"instance_id",name:this.i18n("Instance"),flexGrow:2},{prop:"id",name:this.i18n("ID"),flexGrow:2},{prop:"server_hostname",name:this.i18n("Hostname"),flexGrow:2},{prop:"version",name:this.i18n("Version"),pipe:this.cephShortVersionPipe,flexGrow:2},{prop:"health",name:this.i18n("Health"),cellTemplate:this.healthTmpl,flexGrow:1}],this.subs=this.rbdMirroringService.subscribeSummary(function(n){n&&(l.data=n.content_data.daemons)})},l.prototype.ngOnDestroy=function(){this.subs.unsubscribe()},l.prototype.refresh=function(){this.rbdMirroringService.refresh()},l}(),m=e("Jm/i"),f=t["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function g(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,3,"span",[],null,null,null,null,null)),t["\u0275did"](1,278528,null,0,o.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{ngClass:[0,"ngClass"]},null),t["\u0275ppd"](2,1),(l()(),t["\u0275ted"](3,null,["",""]))],function(l,n){var e=t["\u0275unv"](n,1,0,l(n,2,0,t["\u0275nov"](n.parent,0),n.context.row.health_color));l(n,1,0,e)},function(l,n){l(n,3,0,n.context.value)})}function h(l){return t["\u0275vid"](0,[t["\u0275pid"](0,a,[]),t["\u0275qud"](402653184,1,{healthTmpl:0}),(l()(),t["\u0275eld"](2,0,null,null,1,"cd-table",[["columnMode","flex"]],null,[[null,"fetchData"]],function(l,n,e){var t=!0;return"fetchData"===n&&(t=!1!==l.component.refresh()&&t),t},r.b,r.a)),t["\u0275did"](3,2867200,null,0,s.a,[t.NgZone,t.ChangeDetectorRef],{data:[0,"data"],columns:[1,"columns"],columnMode:[2,"columnMode"],autoReload:[3,"autoReload"]},{fetchData:"fetchData"}),(l()(),t["\u0275and"](0,[[1,2],["healthTmpl",2]],null,0,null,g))],function(l,n){var e=n.component;l(n,3,0,e.data,e.columns,"flex",0)},null)}var v=e("NUGo"),b=e("S7zO"),y=e("6blF"),C=e("0+/T"),_=e("vCyI"),w=e("kvvV"),R=e("aexS"),I=e("kn/O"),S=e("aa9H"),k=e("L4us"),E=function(){function l(l,n,e,t,u){var i=this;this.authStorageService=l,this.rbdMirroringService=n,this.modalService=e,this.taskWrapper=t,this.i18n=u,this.selection=new _.a,this.data=[],this.permission=this.authStorageService.getPermissions().rbdMirroring;var o={permission:"update",icon:"fa-edit",click:function(){return i.editModeModal()},name:this.i18n("Edit Mode"),canBePrimary:function(){return!0}},a={permission:"create",icon:"fa-plus",name:this.i18n("Add Peer"),click:function(){return i.editPeersModal("add")},disable:function(){return!i.selection.first()||"disabled"===i.selection.first().mirror_mode},visible:function(){return!i.getPeerUUID()},canBePrimary:function(){return!1}},r={permission:"update",icon:"fa-exchange",name:this.i18n("Edit Peer"),click:function(){return i.editPeersModal("edit")},visible:function(){return!!i.getPeerUUID()}},s={permission:"delete",icon:"fa-times",name:this.i18n("Delete Peer"),click:function(){return i.deletePeersModal()},visible:function(){return!!i.getPeerUUID()}};this.tableActions=[o,a,r,s]}return l.prototype.ngOnInit=function(){var l=this;this.columns=[{prop:"name",name:this.i18n("Name"),flexGrow:2},{prop:"mirror_mode",name:this.i18n("Mode"),flexGrow:2},{prop:"leader_id",name:this.i18n("Leader"),flexGrow:2},{prop:"image_local_count",name:this.i18n("# Local"),flexGrow:2},{prop:"image_remote_count",name:this.i18n("# Remote"),flexGrow:2},{prop:"health",name:this.i18n("Health"),cellTemplate:this.healthTmpl,flexGrow:1}],this.subs=this.rbdMirroringService.subscribeSummary(function(n){n&&(l.data=n.content_data.pools)})},l.prototype.ngOnDestroy=function(){this.subs.unsubscribe()},l.prototype.refresh=function(){this.rbdMirroringService.refresh()},l.prototype.editModeModal=function(){var l={poolName:this.selection.first().name};this.modalRef=this.modalService.show(S.a,{initialState:l})},l.prototype.editPeersModal=function(l){var n={poolName:this.selection.first().name,mode:l};"edit"===l&&(n.peerUUID=this.getPeerUUID()),this.modalRef=this.modalService.show(k.a,{initialState:n})},l.prototype.deletePeersModal=function(){var l=this,n=this.selection.first().name,e=this.getPeerUUID();this.modalRef=this.modalService.show(C.a,{initialState:{itemDescription:this.i18n("mirror peer"),itemNames:[n+" ("+e+")"],submitActionObservable:function(){return new y.a(function(t){l.taskWrapper.wrapTaskAroundCall({task:new w.a("rbd/mirroring/peer/delete",{pool_name:n}),call:l.rbdMirroringService.deletePeer(n,e)}).subscribe(void 0,function(l){return t.error(l)},function(){l.rbdMirroringService.refresh(),t.complete()})})}}})},l.prototype.getPeerUUID=function(){var l=this.selection.first(),n=this.data.find(function(n){return l&&l.name===n.name});if(n&&n.peer_uuids)return n.peer_uuids[0]},l.prototype.updateSelection=function(l){this.selection=l},l}(),F=e("DQlY"),D=t["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function V(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,3,"span",[],null,null,null,null,null)),t["\u0275did"](1,278528,null,0,o.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{ngClass:[0,"ngClass"]},null),t["\u0275ppd"](2,1),(l()(),t["\u0275ted"](3,null,["",""]))],function(l,n){var e=t["\u0275unv"](n,1,0,l(n,2,0,t["\u0275nov"](n.parent,0),n.context.row.health_color));l(n,1,0,e)},function(l,n){l(n,3,0,n.context.value)})}function T(l){return t["\u0275vid"](0,[t["\u0275pid"](0,a,[]),t["\u0275qud"](402653184,1,{healthTmpl:0}),(l()(),t["\u0275eld"](2,0,null,null,3,"cd-table",[["columnMode","flex"],["forceIdentifier","true"],["identifier","name"],["selectionType","single"]],null,[[null,"fetchData"],[null,"updateSelection"]],function(l,n,e){var t=!0,u=l.component;return"fetchData"===n&&(t=!1!==u.refresh()&&t),"updateSelection"===n&&(t=!1!==u.updateSelection(e)&&t),t},r.b,r.a)),t["\u0275did"](3,2867200,null,0,s.a,[t.NgZone,t.ChangeDetectorRef],{data:[0,"data"],columns:[1,"columns"],columnMode:[2,"columnMode"],autoReload:[3,"autoReload"],identifier:[4,"identifier"],forceIdentifier:[5,"forceIdentifier"],selectionType:[6,"selectionType"]},{fetchData:"fetchData",updateSelection:"updateSelection"}),(l()(),t["\u0275eld"](4,0,null,0,1,"cd-table-actions",[["class","table-actions"]],null,null,null,v.b,v.a)),t["\u0275did"](5,114688,null,0,b.a,[],{permission:[0,"permission"],selection:[1,"selection"],tableActions:[2,"tableActions"]},null),(l()(),t["\u0275and"](0,[[1,2],["healthTmpl",2]],null,0,null,V))],function(l,n){var e=n.component;l(n,3,0,e.data,e.columns,"flex",0,"name","true","single"),l(n,5,0,e.permission,e.selection,e.tableActions)},null)}var N=e("Da1D"),P=t["\u0275crt"]({encapsulation:2,styles:[],data:{}});function x(l){return t["\u0275vid"](0,[t["\u0275ncd"](null,0)],null,null)}var O=t["\u0275crt"]({encapsulation:0,styles:["[_nghost-%COMP%] {\n      width: 100%;\n      display: flex;\n    }"],data:{}});function q(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"bar",[["aria-valuemin","0"],["role","progressbar"]],[[8,"className",0],[2,"progress-bar-animated",null],[2,"progress-bar-striped",null],[2,"active",null],[1,"aria-valuenow",0],[1,"aria-valuetext",0],[1,"aria-valuemax",0],[4,"height","%"],[4,"width","%"]],null,null,x,P)),t["\u0275did"](1,245760,null,0,N.a,[N.b],{type:[0,"type"],value:[1,"value"]},null),t["\u0275ncd"](0,0)],function(l,n){var e=n.component;l(n,1,0,e.type,e._value)},function(l,n){l(n,0,0,"progress-bar "+(t["\u0275nov"](n,1).type?"progress-bar-"+t["\u0275nov"](n,1).type+" bg-"+t["\u0275nov"](n,1).type:""),!t["\u0275nov"](n,1).isBs3&&t["\u0275nov"](n,1).animate,t["\u0275nov"](n,1).striped,t["\u0275nov"](n,1).isBs3&&t["\u0275nov"](n,1).animate,t["\u0275nov"](n,1).value,t["\u0275nov"](n,1).percent?t["\u0275nov"](n,1).percent.toFixed(0)+"%":"",t["\u0275nov"](n,1).max,"100",t["\u0275nov"](n,1).setBarWidth)})}function M(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"bar",[["aria-valuemin","0"],["role","progressbar"]],[[8,"className",0],[2,"progress-bar-animated",null],[2,"progress-bar-striped",null],[2,"active",null],[1,"aria-valuenow",0],[1,"aria-valuetext",0],[1,"aria-valuemax",0],[4,"height","%"],[4,"width","%"]],null,null,x,P)),t["\u0275did"](1,245760,null,0,N.a,[N.b],{type:[0,"type"],value:[1,"value"]},null),(l()(),t["\u0275ted"](2,0,["",""]))],function(l,n){l(n,1,0,n.context.$implicit.type,n.context.$implicit.value)},function(l,n){l(n,0,0,"progress-bar "+(t["\u0275nov"](n,1).type?"progress-bar-"+t["\u0275nov"](n,1).type+" bg-"+t["\u0275nov"](n,1).type:""),!t["\u0275nov"](n,1).isBs3&&t["\u0275nov"](n,1).animate,t["\u0275nov"](n,1).striped,t["\u0275nov"](n,1).isBs3&&t["\u0275nov"](n,1).animate,t["\u0275nov"](n,1).value,t["\u0275nov"](n,1).percent?t["\u0275nov"](n,1).percent.toFixed(0)+"%":"",t["\u0275nov"](n,1).max,"100",t["\u0275nov"](n,1).setBarWidth),l(n,2,0,n.context.$implicit.label)})}function A(l){return t["\u0275vid"](0,[(l()(),t["\u0275and"](16777216,null,null,1,null,M)),t["\u0275did"](1,278528,null,0,o.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(l()(),t["\u0275and"](0,null,null,0))],function(l,n){l(n,1,0,n.component._value)},null)}function B(l){return t["\u0275vid"](0,[(l()(),t["\u0275and"](16777216,null,null,1,null,q)),t["\u0275did"](1,16384,null,0,o.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,A)),t["\u0275did"](3,16384,null,0,o.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(l,n){var e=n.component;l(n,1,0,!e.isStacked),l(n,3,0,e.isStacked)},null)}var j=e("pKUh"),U=e("YAQW"),G=function(){function l(l,n){this.rbdMirroringService=l,this.i18n=n,this.image_error={data:[],columns:{}},this.image_syncing={data:[],columns:{}},this.image_ready={data:[],columns:{}}}return l.prototype.ngOnInit=function(){var l=this;this.image_error.columns=[{prop:"pool_name",name:this.i18n("Pool"),flexGrow:2},{prop:"name",name:this.i18n("Image"),flexGrow:2},{prop:"description",name:this.i18n("Issue"),flexGrow:4},{prop:"state",name:this.i18n("State"),cellTemplate:this.stateTmpl,flexGrow:1}],this.image_syncing.columns=[{prop:"pool_name",name:this.i18n("Pool"),flexGrow:2},{prop:"name",name:this.i18n("Image"),flexGrow:2},{prop:"progress",name:this.i18n("Progress"),cellTemplate:this.progressTmpl,flexGrow:2},{prop:"state",name:this.i18n("State"),cellTemplate:this.syncTmpl,flexGrow:1}],this.image_ready.columns=[{prop:"pool_name",name:this.i18n("Pool"),flexGrow:2},{prop:"name",name:this.i18n("Image"),flexGrow:2},{prop:"description",name:this.i18n("Description"),flexGrow:4},{prop:"state",name:this.i18n("State"),cellTemplate:this.stateTmpl,flexGrow:1}],this.subs=this.rbdMirroringService.subscribeSummary(function(n){n&&(l.image_error.data=n.content_data.image_error,l.image_syncing.data=n.content_data.image_syncing,l.image_ready.data=n.content_data.image_ready)})},l.prototype.ngOnDestroy=function(){this.subs.unsubscribe()},l.prototype.refresh=function(){this.rbdMirroringService.refresh()},l}(),L=t["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function z(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,3,"span",[],null,null,null,null,null)),t["\u0275did"](1,278528,null,0,o.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{ngClass:[0,"ngClass"]},null),t["\u0275ppd"](2,1),(l()(),t["\u0275ted"](3,null,["",""]))],function(l,n){var e=t["\u0275unv"](n,1,0,l(n,2,0,t["\u0275nov"](n.parent,0),n.context.row.state_color));l(n,1,0,e)},function(l,n){l(n,3,0,n.context.value)})}function W(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"span",[["class","label label-info"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Syncing"]))],null,null)}function $(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"progressbar",[["type","info"]],[[1,"max",0],[2,"progress",null]],null,null,B,O)),t["\u0275did"](1,49152,null,0,N.b,[N.c],{type:[0,"type"],value:[1,"value"]},null)],function(l,n){l(n,1,0,"info",n.context.value)},function(l,n){l(n,0,0,t["\u0275nov"](n,1).max,t["\u0275nov"](n,1).addClass)})}function X(l){return t["\u0275vid"](0,[t["\u0275pid"](0,a,[]),t["\u0275qud"](402653184,1,{stateTmpl:0}),t["\u0275qud"](402653184,2,{syncTmpl:0}),t["\u0275qud"](402653184,3,{progressTmpl:0}),(l()(),t["\u0275eld"](4,0,null,null,13,"tabset",[],[[2,"tab-container",null]],null,null,j.b,j.a)),t["\u0275did"](5,180224,null,0,U.d,[U.e,t.Renderer2,t.ElementRef],null,null),(l()(),t["\u0275eld"](6,0,null,0,3,"tab",[["heading","Issues"]],[[1,"id",0],[2,"active",null],[2,"tab-pane",null]],null,null,null,null)),t["\u0275did"](7,212992,null,0,U.b,[U.d,t.ElementRef,t.Renderer2],{heading:[0,"heading"]},null),(l()(),t["\u0275eld"](8,0,null,null,1,"cd-table",[["columnMode","flex"]],null,[[null,"fetchData"]],function(l,n,e){var t=!0;return"fetchData"===n&&(t=!1!==l.component.refresh()&&t),t},r.b,r.a)),t["\u0275did"](9,2867200,null,0,s.a,[t.NgZone,t.ChangeDetectorRef],{data:[0,"data"],columns:[1,"columns"],columnMode:[2,"columnMode"],autoReload:[3,"autoReload"]},{fetchData:"fetchData"}),(l()(),t["\u0275eld"](10,0,null,0,3,"tab",[["heading","Syncing"]],[[1,"id",0],[2,"active",null],[2,"tab-pane",null]],null,null,null,null)),t["\u0275did"](11,212992,null,0,U.b,[U.d,t.ElementRef,t.Renderer2],{heading:[0,"heading"]},null),(l()(),t["\u0275eld"](12,0,null,null,1,"cd-table",[["columnMode","flex"]],null,[[null,"fetchData"]],function(l,n,e){var t=!0;return"fetchData"===n&&(t=!1!==l.component.refresh()&&t),t},r.b,r.a)),t["\u0275did"](13,2867200,null,0,s.a,[t.NgZone,t.ChangeDetectorRef],{data:[0,"data"],columns:[1,"columns"],columnMode:[2,"columnMode"],autoReload:[3,"autoReload"]},{fetchData:"fetchData"}),(l()(),t["\u0275eld"](14,0,null,0,3,"tab",[["heading","Ready"]],[[1,"id",0],[2,"active",null],[2,"tab-pane",null]],null,null,null,null)),t["\u0275did"](15,212992,null,0,U.b,[U.d,t.ElementRef,t.Renderer2],{heading:[0,"heading"]},null),(l()(),t["\u0275eld"](16,0,null,null,1,"cd-table",[["columnMode","flex"]],null,[[null,"fetchData"]],function(l,n,e){var t=!0;return"fetchData"===n&&(t=!1!==l.component.refresh()&&t),t},r.b,r.a)),t["\u0275did"](17,2867200,null,0,s.a,[t.NgZone,t.ChangeDetectorRef],{data:[0,"data"],columns:[1,"columns"],columnMode:[2,"columnMode"],autoReload:[3,"autoReload"]},{fetchData:"fetchData"}),(l()(),t["\u0275and"](0,[[1,2],["stateTmpl",2]],null,0,null,z)),(l()(),t["\u0275and"](0,[[2,2],["syncTmpl",2]],null,0,null,W)),(l()(),t["\u0275and"](0,[[3,2],["progressTmpl",2]],null,0,null,$))],function(l,n){var e=n.component;l(n,7,0,"Issues"),l(n,9,0,e.image_error.data,e.image_error.columns,"flex",0),l(n,11,0,"Syncing"),l(n,13,0,e.image_syncing.data,e.image_syncing.columns,"flex",0),l(n,15,0,"Ready"),l(n,17,0,e.image_ready.data,e.image_ready.columns,"flex",0)},function(l,n){l(n,4,0,t["\u0275nov"](n,5).clazz),l(n,6,0,t["\u0275nov"](n,7).id,t["\u0275nov"](n,7).active,t["\u0275nov"](n,7).addClass),l(n,10,0,t["\u0275nov"](n,11).id,t["\u0275nov"](n,11).active,t["\u0275nov"](n,11).addClass),l(n,14,0,t["\u0275nov"](n,15).id,t["\u0275nov"](n,15).active,t["\u0275nov"](n,15).addClass)})}var Y=e("cxJu");e.d(n,"a",function(){return Q});var K=t["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function J(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"cd-view-cache",[],null,null,null,u.b,u.a)),t["\u0275did"](1,114688,null,0,i.a,[],{status:[0,"status"]},null),(l()(),t["\u0275eld"](2,0,null,null,10,"div",[["class","row"]],null,null,null,null,null)),(l()(),t["\u0275eld"](3,0,null,null,4,"div",[["class","col-sm-6"]],null,null,null,null,null)),(l()(),t["\u0275eld"](4,0,null,null,1,"legend",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Daemons"])),(l()(),t["\u0275eld"](6,0,null,null,1,"cd-mirroring-daemons",[],null,null,null,h,f)),t["\u0275did"](7,245760,null,0,p,[d.a,c.a,m.a],null,null),(l()(),t["\u0275eld"](8,0,null,null,4,"div",[["class","col-sm-6"]],null,null,null,null,null)),(l()(),t["\u0275eld"](9,0,null,null,1,"legend",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Pools"])),(l()(),t["\u0275eld"](11,0,null,null,1,"cd-mirroring-pools",[],null,null,null,T,D)),t["\u0275did"](12,245760,null,0,E,[R.a,d.a,F.b,I.a,m.a],null,null),(l()(),t["\u0275eld"](13,0,null,null,5,"div",[["class","row"]],null,null,null,null,null)),(l()(),t["\u0275eld"](14,0,null,null,4,"div",[["class","col-md-12"]],null,null,null,null,null)),(l()(),t["\u0275eld"](15,0,null,null,1,"legend",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Images"])),(l()(),t["\u0275eld"](17,0,null,null,1,"cd-mirroring-images",[],null,null,null,X,L)),t["\u0275did"](18,245760,null,0,G,[d.a,m.a],null,null)],function(l,n){l(n,1,0,n.component.status),l(n,7,0),l(n,12,0),l(n,18,0)},null)}function Z(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"cd-mirroring",[],null,null,null,J,K)),t["\u0275did"](1,245760,null,0,Y.a,[d.a],null,null)],function(l,n){l(n,1,0)},null)}var Q=t["\u0275ccf"]("cd-mirroring",Y.a,Z,{},{},[])},Sofw:function(l,n,e){"use strict";e.d(n,"a",function(){return a});var t=e("gIcY"),u=(e("my5R"),e("mtw6")),i=e("QFaf"),o=e("1Ni5"),a=(e("aexS"),e("9nlD"),function(){function l(l,n,e,t,u){this.authStorageService=l,this.bsModalRef=n,this.iscsiService=e,this.notificationService=t,this.i18n=u,this.USER_REGEX=/^[\w\.:@_-]{8,64}$/,this.PASSWORD_REGEX=/^[\w@\-_\/]{12,16}$/,this.permission=this.authStorageService.getPermissions().iscsi}return l.prototype.ngOnInit=function(){var l=this;this.hasPermission=this.permission.update,this.createForm(),this.iscsiService.getDiscovery().subscribe(function(n){l.discoveryForm.patchValue(n)})},l.prototype.createForm=function(){var l=this;this.discoveryForm=new i.a({user:new t.i({value:"",disabled:!this.hasPermission}),password:new t.i({value:"",disabled:!this.hasPermission}),mutual_user:new t.i({value:"",disabled:!this.hasPermission}),mutual_password:new t.i({value:"",disabled:!this.hasPermission})}),o.a.validateIf(this.discoveryForm.get("user"),function(){return l.discoveryForm.getValue("password")||l.discoveryForm.getValue("mutual_user")||l.discoveryForm.getValue("mutual_password")},[t.A.required],[t.A.pattern(this.USER_REGEX)],[this.discoveryForm.get("password"),this.discoveryForm.get("mutual_user"),this.discoveryForm.get("mutual_password")]),o.a.validateIf(this.discoveryForm.get("password"),function(){return l.discoveryForm.getValue("user")||l.discoveryForm.getValue("mutual_user")||l.discoveryForm.getValue("mutual_password")},[t.A.required],[t.A.pattern(this.PASSWORD_REGEX)],[this.discoveryForm.get("user"),this.discoveryForm.get("mutual_user"),this.discoveryForm.get("mutual_password")]),o.a.validateIf(this.discoveryForm.get("mutual_user"),function(){return l.discoveryForm.getValue("mutual_password")},[t.A.required],[t.A.pattern(this.USER_REGEX)],[this.discoveryForm.get("user"),this.discoveryForm.get("password"),this.discoveryForm.get("mutual_password")]),o.a.validateIf(this.discoveryForm.get("mutual_password"),function(){return l.discoveryForm.getValue("mutual_user")},[t.A.required],[t.A.pattern(this.PASSWORD_REGEX)],[this.discoveryForm.get("user"),this.discoveryForm.get("password"),this.discoveryForm.get("mutual_user")])},l.prototype.submitAction=function(){var l=this;this.iscsiService.updateDiscovery(this.discoveryForm.value).subscribe(function(){l.notificationService.show(u.a.success,l.i18n("Updated discovery authentication")),l.bsModalRef.hide()},function(){l.discoveryForm.setErrors({cdSubmitButton:!0})})},l}())},Ur3J:function(l,n,e){"use strict";var t=e("CcnG"),u=e("Ip0R"),i=e("8xTl"),o=e("gIcY"),a=e("IZUe"),r=e("ANnk"),s=e("f/UV"),d=e("aexS"),c=e("gp3X"),p=e("sb0X"),m=e("KVJa"),f=e("Z21x"),g=e("sne2"),h=e("+lcs"),v=e("DQlY"),b=e("F83c"),y=e("VXsX"),C=e("9nlD"),_=e("Jm/i");e.d(n,"a",function(){return k});var w=t["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function R(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"span",[["class","help-block"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["This field is required."]))],null,null)}function I(l){return t["\u0275vid"](0,[t["\u0275pid"](0,u.TitleCasePipe,[]),t["\u0275pid"](0,i.a,[]),(l()(),t["\u0275eld"](2,0,null,null,7,"div",[["class","modal-header"]],null,null,null,null,null)),(l()(),t["\u0275eld"](3,0,null,null,3,"h4",[["class","modal-title pull-left"]],null,null,null,null,null)),(l()(),t["\u0275ted"](4,null,[""," ",""])),t["\u0275ppd"](5,1),t["\u0275ppd"](6,1),(l()(),t["\u0275eld"](7,0,null,null,2,"button",[["aria-label","Close"],["class","close pull-right"],["type","button"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.modalRef.hide()&&t),t},null,null)),(l()(),t["\u0275eld"](8,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["\xd7"])),(l()(),t["\u0275eld"](10,0,null,null,32,"form",[["class","form-horizontal"],["name","snapshotForm"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,e){var u=!0;return"submit"===n&&(u=!1!==t["\u0275nov"](l,12).onSubmit(e)&&u),"reset"===n&&(u=!1!==t["\u0275nov"](l,12).onReset()&&u),u},null,null)),t["\u0275did"](11,16384,null,0,o.D,[],null,null),t["\u0275did"](12,540672,[["formDir",4]],0,o.l,[[8,null],[8,null]],{form:[0,"form"]},null),t["\u0275prd"](2048,null,o.d,null,[o.l]),t["\u0275did"](14,16384,null,0,o.s,[[4,o.d]],null,null),(l()(),t["\u0275eld"](15,0,null,null,18,"div",[["class","modal-body"]],null,null,null,null,null)),(l()(),t["\u0275eld"](16,0,null,null,17,"div",[["class","form-group"]],null,null,null,null,null)),t["\u0275did"](17,278528,null,0,u.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](18,{"has-error":0}),(l()(),t["\u0275eld"](19,0,null,null,3,"label",[["class","control-label col-sm-3"],["for","snapshotName"]],null,null,null,null,null)),(l()(),t["\u0275eld"](20,0,null,null,1,null,null,null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Name"])),(l()(),t["\u0275eld"](22,0,null,null,0,"span",[["class","required"]],null,null,null,null,null)),(l()(),t["\u0275eld"](23,0,null,null,10,"div",[["class","col-sm-9"]],null,null,null,null,null)),(l()(),t["\u0275eld"](24,0,null,null,7,"input",[["autofocus",""],["class","form-control"],["formControlName","snapshotName"],["id","snapshotName"],["name","snapshotName"],["placeholder","Snapshot name..."],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,e){var u=!0;return"input"===n&&(u=!1!==t["\u0275nov"](l,25)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,25).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,25)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,25)._compositionEnd(e.target.value)&&u),u},null,null)),t["\u0275did"](25,16384,null,0,o.e,[t.Renderer2,t.ElementRef,[2,o.b]],null,null),t["\u0275prd"](1024,null,o.p,function(l){return[l]},[o.e]),t["\u0275did"](27,671744,null,0,o.j,[[3,o.d],[8,null],[8,null],[6,o.p],[2,o.F]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,o.q,null,[o.j]),t["\u0275did"](29,16384,null,0,o.r,[[4,o.q]],null,null),t["\u0275did"](30,4210688,null,0,a.a,[t.ElementRef],null,null),t["\u0275did"](31,4210688,null,0,r.a,[[2,s.a],d.a,t.ElementRef],null,null),(l()(),t["\u0275and"](16777216,null,null,1,null,R)),t["\u0275did"](33,16384,null,0,u.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](34,0,null,null,8,"div",[["class","modal-footer"]],null,null,null,null,null)),(l()(),t["\u0275eld"](35,0,null,null,7,"div",[["class","button-group text-right"]],null,null,null,null,null)),(l()(),t["\u0275eld"](36,0,null,null,4,"cd-submit-button",[],null,[[null,"submitAction"]],function(l,n,e){var t=!0;return"submitAction"===n&&(t=!1!==l.component.submit()&&t),t},c.b,c.a)),t["\u0275did"](37,114688,null,0,p.a,[t.ElementRef],{form:[0,"form"]},{submitAction:"submitAction"}),(l()(),t["\u0275ted"](38,0,[""," ",""])),t["\u0275ppd"](39,1),t["\u0275ppd"](40,1),(l()(),t["\u0275eld"](41,0,null,null,1,"cd-back-button",[["name","Close"]],null,null,null,m.b,m.a)),t["\u0275did"](42,49152,null,0,f.a,[u.Location,g.b],{name:[0,"name"],back:[1,"back"]},null)],function(l,n){var e=n.component;l(n,12,0,e.snapshotForm);var u=l(n,18,0,e.snapshotForm.showError("snapshotName",t["\u0275nov"](n,12)));l(n,17,0,"form-group",u),l(n,27,0,"snapshotName"),l(n,33,0,e.snapshotForm.showError("snapshotName",t["\u0275nov"](n,12),"required")),l(n,37,0,e.snapshotForm),l(n,42,0,"Close",e.modalRef.hide)},function(l,n){var e=n.component,u=t["\u0275unv"](n,4,0,l(n,5,0,t["\u0275nov"](n,0),e.action)),i=t["\u0275unv"](n,4,1,l(n,6,0,t["\u0275nov"](n,1),e.resource));l(n,4,0,u,i),l(n,10,0,t["\u0275nov"](n,14).ngClassUntouched,t["\u0275nov"](n,14).ngClassTouched,t["\u0275nov"](n,14).ngClassPristine,t["\u0275nov"](n,14).ngClassDirty,t["\u0275nov"](n,14).ngClassValid,t["\u0275nov"](n,14).ngClassInvalid,t["\u0275nov"](n,14).ngClassPending),l(n,24,0,t["\u0275nov"](n,29).ngClassUntouched,t["\u0275nov"](n,29).ngClassTouched,t["\u0275nov"](n,29).ngClassPristine,t["\u0275nov"](n,29).ngClassDirty,t["\u0275nov"](n,29).ngClassValid,t["\u0275nov"](n,29).ngClassInvalid,t["\u0275nov"](n,29).ngClassPending);var o=t["\u0275unv"](n,38,0,l(n,39,0,t["\u0275nov"](n,0),e.action)),a=t["\u0275unv"](n,38,1,l(n,40,0,t["\u0275nov"](n,1),e.resource));l(n,38,0,o,a)})}function S(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"cd-rbd-snapshot-form",[],null,null,null,I,w)),t["\u0275did"](1,114688,null,0,h.a,[v.a,b.a,y.a,C.a,_.a,g.b],null,null)],function(l,n){l(n,1,0)},null)}var k=t["\u0275ccf"]("cd-rbd-snapshot-form",h.a,S,{},{},[])},VBM6:function(l,n,e){"use strict";var t=e("CcnG"),u=e("EEJc"),i=e("ajRT"),o=e("Ip0R"),a=e("gIcY"),r=e("IZUe"),s=e("ANnk"),d=e("f/UV"),c=e("aexS"),p=e("gp3X"),m=e("sb0X"),f=e("KVJa"),g=e("Z21x"),h=e("sne2"),v=e("L4us"),b=e("DQlY"),y=e("XED3"),C=e("kn/O");e.d(n,"a",function(){return x});var _=t["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function w(l){return t["\u0275vid"](0,[(l()(),t["\u0275ted"](-1,null,["Edit"]))],null,null)}function R(l){return t["\u0275vid"](0,[(l()(),t["\u0275ted"](-1,null,["Add"]))],null,null)}function I(l){return t["\u0275vid"](0,[(l()(),t["\u0275ted"](-1,null,["Edit"]))],null,null)}function S(l){return t["\u0275vid"](0,[(l()(),t["\u0275ted"](-1,null,["Add"]))],null,null)}function k(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"span",[["class","help-block"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["This field is required."]))],null,null)}function E(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"span",[["class","help-block"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["The cluster name is not valid."]))],null,null)}function F(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"span",[["class","help-block"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["This field is required."]))],null,null)}function D(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"span",[["class","help-block"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["The CephX ID is not valid."]))],null,null)}function V(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"span",[["class","help-block"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["The monitory address is not valid."]))],null,null)}function T(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"span",[["class","help-block"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["CephX key must be base64 encoded."]))],null,null)}function N(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,105,"cd-modal",[],null,null,null,u.c,u.b)),t["\u0275did"](1,49152,null,0,i.a,[],{modalRef:[0,"modalRef"]},null),(l()(),t["\u0275eld"](2,0,null,0,7,null,null,null,null,null,null,null)),(l()(),t["\u0275eld"](3,0,null,null,5,null,null,null,null,null,null,null)),t["\u0275did"](4,16384,null,0,o.NgSwitch,[],{ngSwitch:[0,"ngSwitch"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,w)),t["\u0275did"](6,278528,null,0,o.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,o.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,R)),t["\u0275did"](8,16384,null,0,o.NgSwitchDefault,[t.ViewContainerRef,t.TemplateRef,o.NgSwitch],null,null),(l()(),t["\u0275ted"](-1,null,[" pool mirror peer"])),(l()(),t["\u0275eld"](10,0,null,1,95,null,null,null,null,null,null,null)),(l()(),t["\u0275eld"](11,0,null,null,94,"form",[["class","form"],["name","editPeerForm"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,e){var u=!0;return"submit"===n&&(u=!1!==t["\u0275nov"](l,13).onSubmit(e)&&u),"reset"===n&&(u=!1!==t["\u0275nov"](l,13).onReset()&&u),u},null,null)),t["\u0275did"](12,16384,null,0,a.D,[],null,null),t["\u0275did"](13,540672,[["formDir",4]],0,a.l,[[8,null],[8,null]],{form:[0,"form"]},null),t["\u0275prd"](2048,null,a.d,null,[a.l]),t["\u0275did"](15,16384,null,0,a.s,[[4,a.d]],null,null),(l()(),t["\u0275eld"](16,0,null,null,82,"div",[["class","modal-body"]],null,null,null,null,null)),(l()(),t["\u0275eld"](17,0,null,null,14,"p",[],null,null,null,null,null)),(l()(),t["\u0275eld"](18,0,null,null,13,null,null,null,null,null,null,null)),(l()(),t["\u0275eld"](19,0,null,null,5,null,null,null,null,null,null,null)),t["\u0275did"](20,16384,null,0,o.NgSwitch,[],{ngSwitch:[0,"ngSwitch"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,I)),t["\u0275did"](22,278528,null,0,o.NgSwitchCase,[t.ViewContainerRef,t.TemplateRef,o.NgSwitch],{ngSwitchCase:[0,"ngSwitchCase"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,S)),t["\u0275did"](24,16384,null,0,o.NgSwitchDefault,[t.ViewContainerRef,t.TemplateRef,o.NgSwitch],null,null),(l()(),t["\u0275ted"](-1,null,[" the pool mirror peer attributes for pool "])),(l()(),t["\u0275eld"](26,0,null,null,1,"kbd",[],null,null,null,null,null)),(l()(),t["\u0275ted"](27,null,["",""])),(l()(),t["\u0275ted"](-1,null,[" and click "])),(l()(),t["\u0275eld"](29,0,null,null,1,"kbd",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Submit"])),(l()(),t["\u0275ted"](-1,null,["."])),(l()(),t["\u0275eld"](32,0,null,null,18,"div",[["class","form-group"]],null,null,null,null,null)),t["\u0275did"](33,278528,null,0,o.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](34,{"has-error":0}),(l()(),t["\u0275eld"](35,0,null,null,3,"label",[["class","control-label"],["for","clusterName"]],null,null,null,null,null)),(l()(),t["\u0275eld"](36,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Cluster Name"])),(l()(),t["\u0275eld"](38,0,null,null,0,"span",[["class","required"]],null,null,null,null,null)),(l()(),t["\u0275eld"](39,0,null,null,7,"input",[["autofocus",""],["class","form-control"],["formControlName","clusterName"],["id","clusterName"],["name","clusterName"],["placeholder","Name..."],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,e){var u=!0;return"input"===n&&(u=!1!==t["\u0275nov"](l,42)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,42).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,42)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,42)._compositionEnd(e.target.value)&&u),u},null,null)),t["\u0275did"](40,4210688,null,0,r.a,[t.ElementRef],null,null),t["\u0275did"](41,4210688,null,0,s.a,[[2,d.a],c.a,t.ElementRef],null,null),t["\u0275did"](42,16384,null,0,a.e,[t.Renderer2,t.ElementRef,[2,a.b]],null,null),t["\u0275prd"](1024,null,a.p,function(l){return[l]},[a.e]),t["\u0275did"](44,671744,null,0,a.j,[[3,a.d],[8,null],[8,null],[6,a.p],[2,a.F]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,a.q,null,[a.j]),t["\u0275did"](46,16384,null,0,a.r,[[4,a.q]],null,null),(l()(),t["\u0275and"](16777216,null,null,1,null,k)),t["\u0275did"](48,16384,null,0,o.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,E)),t["\u0275did"](50,16384,null,0,o.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](51,0,null,null,17,"div",[["class","form-group"]],null,null,null,null,null)),t["\u0275did"](52,278528,null,0,o.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](53,{"has-error":0}),(l()(),t["\u0275eld"](54,0,null,null,3,"label",[["class","control-label"],["for","clientID"]],null,null,null,null,null)),(l()(),t["\u0275eld"](55,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["CephX ID"])),(l()(),t["\u0275eld"](57,0,null,null,0,"span",[["class","required"]],null,null,null,null,null)),(l()(),t["\u0275eld"](58,0,null,null,6,"input",[["class","form-control"],["formControlName","clientID"],["id","clientID"],["name","clientID"],["placeholder","CephX ID..."],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,e){var u=!0;return"input"===n&&(u=!1!==t["\u0275nov"](l,60)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,60).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,60)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,60)._compositionEnd(e.target.value)&&u),u},null,null)),t["\u0275did"](59,4210688,null,0,s.a,[[2,d.a],c.a,t.ElementRef],null,null),t["\u0275did"](60,16384,null,0,a.e,[t.Renderer2,t.ElementRef,[2,a.b]],null,null),t["\u0275prd"](1024,null,a.p,function(l){return[l]},[a.e]),t["\u0275did"](62,671744,null,0,a.j,[[3,a.d],[8,null],[8,null],[6,a.p],[2,a.F]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,a.q,null,[a.j]),t["\u0275did"](64,16384,null,0,a.r,[[4,a.q]],null,null),(l()(),t["\u0275and"](16777216,null,null,1,null,F)),t["\u0275did"](66,16384,null,0,o.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,D)),t["\u0275did"](68,16384,null,0,o.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](69,0,null,null,14,"div",[["class","form-group"]],null,null,null,null,null)),t["\u0275did"](70,278528,null,0,o.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](71,{"has-error":0}),(l()(),t["\u0275eld"](72,0,null,null,2,"label",[["class","control-label"],["for","monAddr"]],null,null,null,null,null)),(l()(),t["\u0275eld"](73,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Monitor Addresses"])),(l()(),t["\u0275eld"](75,0,null,null,6,"input",[["class","form-control"],["formControlName","monAddr"],["id","monAddr"],["name","monAddr"],["placeholder","Comma-delimited addresses..."],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,e){var u=!0;return"input"===n&&(u=!1!==t["\u0275nov"](l,77)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,77).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,77)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,77)._compositionEnd(e.target.value)&&u),u},null,null)),t["\u0275did"](76,4210688,null,0,s.a,[[2,d.a],c.a,t.ElementRef],null,null),t["\u0275did"](77,16384,null,0,a.e,[t.Renderer2,t.ElementRef,[2,a.b]],null,null),t["\u0275prd"](1024,null,a.p,function(l){return[l]},[a.e]),t["\u0275did"](79,671744,null,0,a.j,[[3,a.d],[8,null],[8,null],[6,a.p],[2,a.F]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,a.q,null,[a.j]),t["\u0275did"](81,16384,null,0,a.r,[[4,a.q]],null,null),(l()(),t["\u0275and"](16777216,null,null,1,null,V)),t["\u0275did"](83,16384,null,0,o.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](84,0,null,null,14,"div",[["class","form-group"]],null,null,null,null,null)),t["\u0275did"](85,278528,null,0,o.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](86,{"has-error":0}),(l()(),t["\u0275eld"](87,0,null,null,2,"label",[["class","control-label"],["for","key"]],null,null,null,null,null)),(l()(),t["\u0275eld"](88,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["CephX Key"])),(l()(),t["\u0275eld"](90,0,null,null,6,"input",[["class","form-control"],["formControlName","key"],["id","key"],["name","key"],["placeholder","Base64-encoded key..."],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,e){var u=!0;return"input"===n&&(u=!1!==t["\u0275nov"](l,92)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,92).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,92)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,92)._compositionEnd(e.target.value)&&u),u},null,null)),t["\u0275did"](91,4210688,null,0,s.a,[[2,d.a],c.a,t.ElementRef],null,null),t["\u0275did"](92,16384,null,0,a.e,[t.Renderer2,t.ElementRef,[2,a.b]],null,null),t["\u0275prd"](1024,null,a.p,function(l){return[l]},[a.e]),t["\u0275did"](94,671744,null,0,a.j,[[3,a.d],[8,null],[8,null],[6,a.p],[2,a.F]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,a.q,null,[a.j]),t["\u0275did"](96,16384,null,0,a.r,[[4,a.q]],null,null),(l()(),t["\u0275and"](16777216,null,null,1,null,T)),t["\u0275did"](98,16384,null,0,o.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](99,0,null,null,6,"div",[["class","modal-footer"]],null,null,null,null,null)),(l()(),t["\u0275eld"](100,0,null,null,5,"div",[["class","button-group text-right"]],null,null,null,null,null)),(l()(),t["\u0275eld"](101,0,null,null,2,"cd-submit-button",[],null,[[null,"submitAction"]],function(l,n,e){var t=!0;return"submitAction"===n&&(t=!1!==l.component.update()&&t),t},p.b,p.a)),t["\u0275did"](102,114688,null,0,m.a,[t.ElementRef],{form:[0,"form"]},{submitAction:"submitAction"}),(l()(),t["\u0275ted"](-1,0,["Submit"])),(l()(),t["\u0275eld"](104,0,null,null,1,"cd-back-button",[["name","Cancel"]],null,null,null,f.b,f.a)),t["\u0275did"](105,49152,null,0,g.a,[o.Location,h.b],{name:[0,"name"],back:[1,"back"]},null)],function(l,n){var e=n.component;l(n,1,0,e.modalRef),l(n,4,0,e.mode),l(n,6,0,"edit"),l(n,13,0,e.editPeerForm),l(n,20,0,e.mode),l(n,22,0,"edit");var u=l(n,34,0,e.editPeerForm.showError("clusterName",t["\u0275nov"](n,13)));l(n,33,0,"form-group",u),l(n,44,0,"clusterName"),l(n,48,0,e.editPeerForm.showError("clusterName",t["\u0275nov"](n,13),"required")),l(n,50,0,e.editPeerForm.showError("clusterName",t["\u0275nov"](n,13),"invalidClusterName"));var i=l(n,53,0,e.editPeerForm.showError("clientID",t["\u0275nov"](n,13)));l(n,52,0,"form-group",i),l(n,62,0,"clientID"),l(n,66,0,e.editPeerForm.showError("clientID",t["\u0275nov"](n,13),"required")),l(n,68,0,e.editPeerForm.showError("clientID",t["\u0275nov"](n,13),"invalidClientID"));var o=l(n,71,0,e.editPeerForm.showError("monAddr",t["\u0275nov"](n,13)));l(n,70,0,"form-group",o),l(n,79,0,"monAddr"),l(n,83,0,e.editPeerForm.showError("monAddr",t["\u0275nov"](n,13),"invalidMonAddr"));var a=l(n,86,0,e.editPeerForm.showError("key",t["\u0275nov"](n,13)));l(n,85,0,"form-group",a),l(n,94,0,"key"),l(n,98,0,e.editPeerForm.showError("key",t["\u0275nov"](n,13),"invalidKey")),l(n,102,0,e.editPeerForm),l(n,105,0,"Cancel",e.modalRef.hide)},function(l,n){var e=n.component;l(n,11,0,t["\u0275nov"](n,15).ngClassUntouched,t["\u0275nov"](n,15).ngClassTouched,t["\u0275nov"](n,15).ngClassPristine,t["\u0275nov"](n,15).ngClassDirty,t["\u0275nov"](n,15).ngClassValid,t["\u0275nov"](n,15).ngClassInvalid,t["\u0275nov"](n,15).ngClassPending),l(n,27,0,e.poolName),l(n,39,0,t["\u0275nov"](n,46).ngClassUntouched,t["\u0275nov"](n,46).ngClassTouched,t["\u0275nov"](n,46).ngClassPristine,t["\u0275nov"](n,46).ngClassDirty,t["\u0275nov"](n,46).ngClassValid,t["\u0275nov"](n,46).ngClassInvalid,t["\u0275nov"](n,46).ngClassPending),l(n,58,0,t["\u0275nov"](n,64).ngClassUntouched,t["\u0275nov"](n,64).ngClassTouched,t["\u0275nov"](n,64).ngClassPristine,t["\u0275nov"](n,64).ngClassDirty,t["\u0275nov"](n,64).ngClassValid,t["\u0275nov"](n,64).ngClassInvalid,t["\u0275nov"](n,64).ngClassPending),l(n,75,0,t["\u0275nov"](n,81).ngClassUntouched,t["\u0275nov"](n,81).ngClassTouched,t["\u0275nov"](n,81).ngClassPristine,t["\u0275nov"](n,81).ngClassDirty,t["\u0275nov"](n,81).ngClassValid,t["\u0275nov"](n,81).ngClassInvalid,t["\u0275nov"](n,81).ngClassPending),l(n,90,0,t["\u0275nov"](n,96).ngClassUntouched,t["\u0275nov"](n,96).ngClassTouched,t["\u0275nov"](n,96).ngClassPristine,t["\u0275nov"](n,96).ngClassDirty,t["\u0275nov"](n,96).ngClassValid,t["\u0275nov"](n,96).ngClassInvalid,t["\u0275nov"](n,96).ngClassPending)})}function P(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"cd-pool-edit-peer-modal",[],null,null,null,N,_)),t["\u0275did"](1,114688,null,0,v.a,[b.a,y.a,C.a],null,null)],function(l,n){l(n,1,0)},null)}var x=t["\u0275ccf"]("cd-pool-edit-peer-modal",v.a,P,{},{},[])},WxU5:function(l,n,e){"use strict";e.d(n,"a",function(){return u}),e("Ekvf"),e("F83c"),e("2EZI");var t=e("kvvV"),u=(e("aexS"),e("kn/O"),function(){function l(l,n,e,t,u,i){this.authStorageService=l,this.rbdService=n,this.modalRef=e,this.fb=t,this.poolService=u,this.taskWrapper=i,this.poolPermission=this.authStorageService.getPermissions().pool}return l.prototype.createForm=function(){this.purgeForm=this.fb.group({poolName:""})},l.prototype.ngOnInit=function(){var l=this;this.poolPermission.read&&this.poolService.list(["pool_name","application_metadata"]).then(function(n){l.pools=n.filter(function(l){return l.application_metadata.includes("rbd")}).map(function(l){return l.pool_name})}),this.createForm()},l.prototype.purge=function(){var l=this,n=this.purgeForm.getValue("poolName")||"";this.taskWrapper.wrapTaskAroundCall({task:new t.a("rbd/trash/purge",{pool_name:n}),call:this.rbdService.purgeTrash(n)}).subscribe(void 0,function(){l.purgeForm.setErrors({cdSubmitButton:!0})},function(){l.modalRef.hide()})},l}())},XED3:function(l,n,e){"use strict";e.d(n,"a",function(){return a});var t=e("26FU"),u=e("CcnG"),i=e("t/Na"),o=e("pL04"),a=function(){function l(l,n){this.http=l,this.ngZone=n,this.summaryDataSource=new t.a(null),this.summaryData$=this.summaryDataSource.asObservable(),this.refreshAndSchedule()}return l.prototype.refresh=function(){var l=this;this.http.get("api/block/mirroring/summary").subscribe(function(n){l.summaryDataSource.next(n)})},l.prototype.refreshAndSchedule=function(){var l=this;this.refresh(),this.ngZone.runOutsideAngular(function(){setTimeout(function(){l.ngZone.run(function(){l.refreshAndSchedule()})},3e4)})},l.prototype.getCurrentSummary=function(){return this.summaryDataSource.getValue()},l.prototype.subscribeSummary=function(l,n){return this.summaryData$.subscribe(l,n)},l.prototype.getPool=function(l){return this.http.get("api/block/mirroring/pool/"+l)},l.prototype.updatePool=function(l,n){return this.http.put("api/block/mirroring/pool/"+l,n,{observe:"response"})},l.prototype.getPeer=function(l,n){return this.http.get("api/block/mirroring/pool/"+l+"/peer/"+n)},l.prototype.addPeer=function(l,n){return this.http.post("api/block/mirroring/pool/"+l+"/peer",n,{observe:"response"})},l.prototype.updatePeer=function(l,n,e){return this.http.put("api/block/mirroring/pool/"+l+"/peer/"+n,e,{observe:"response"})},l.prototype.deletePeer=function(l,n){return this.http.delete("api/block/mirroring/pool/"+l+"/peer/"+n,{observe:"response"})},l.ngInjectableDef=u.defineInjectable({factory:function(){return new l(u.inject(i.c),u.inject(u.NgZone))},token:l,providedIn:o.a}),l}()},Z4cD:function(l,n,e){"use strict";e.d(n,"a",function(){return a});var t=e("mrSG"),u=e("gIcY"),i=e("LvDl"),o=(e("my5R"),e("QFaf")),a=function(){function l(l,n){this.modalRef=l,this.iscsiService=n}return l.prototype.ngOnInit=function(){var l=this,n={backstore:new u.i(this.imagesSettings[this.image].backstore),lun:new u.i(this.imagesSettings[this.image].lun),wwn:new u.i(this.imagesSettings[this.image].wwn)};i.forEach(this.backstores,function(e){var t=l.imagesSettings[l.image][e]||{};i.forIn(l.disk_default_controls[e],function(l,e){n[e]=new u.i(t[e])})}),this.settingsForm=new o.a(n)},l.prototype.getDiskControlLimits=function(l,n){return this.disk_controls_limits?this.disk_controls_limits[l][n]:{type:"int"}},l.prototype.save=function(){var l=this,n=this.settingsForm.controls.backstore.value,e=this.settingsForm.controls.lun.value,u=this.settingsForm.controls.wwn.value,o={};i.forIn(this.settingsForm.controls,function(e,t){""!==e.value&&null!==e.value&&t in l.disk_default_controls[l.settingsForm.value.backstore]&&(o[t]=e.value,i.forEach(l.backstores,function(u){u!==n&&t in(l.imagesSettings[l.image][u]||{})&&(l.imagesSettings[l.image][u][t]=e.value)}))}),this.imagesSettings[this.image].backstore=n,this.imagesSettings[this.image].lun=e,this.imagesSettings[this.image].wwn=u,this.imagesSettings[this.image][n]=o,this.imagesSettings=t.__assign({},this.imagesSettings),this.control.updateValueAndValidity({emitEvent:!1}),this.modalRef.hide()},l}()},a6qe:function(l,n,e){"use strict";e.d(n,"a",function(){return o});var t=e("gIcY"),u=e("LvDl"),i=(e("my5R"),e("QFaf")),o=function(){function l(l,n){this.modalRef=l,this.iscsiService=n}return l.prototype.ngOnInit=function(){var l=this,n={};u.forIn(this.target_default_controls,function(e,u){n[u]=new t.i(l.target_controls.value[u])}),this.settingsForm=new i.a(n)},l.prototype.save=function(){var l={};u.forIn(this.settingsForm.controls,function(n,e){""!==n.value&&null!==n.value&&(l[e]=n.value)}),this.target_controls.setValue(l),this.modalRef.hide()},l.prototype.getTargetControlLimits=function(l){return this.target_controls_limits?this.target_controls_limits[l]:["Yes","No"].includes(this.target_default_controls[l])?{type:"bool"}:{type:"int"}},l}()},aAWM:function(l,n,e){"use strict";e("uIqm");var t=e("PhyI"),u=function(){function l(){}return l.prototype.transform=function(l){return{0:"global",1:"pool",2:"image"}[l]},l}();e("aXbf"),e("o8EM"),e.d(n,"a",function(){return i});var i=function(){function l(l,n,e){this.formatterService=l,this.rbdConfigurationService=n,this.i18n=e,this.sourceField=t.a,this.typeField=t.b}return l.prototype.ngOnInit=function(){this.poolConfigurationColumns=[{prop:"displayName",name:this.i18n("Name")},{prop:"description",name:this.i18n("Description")},{prop:"name",name:this.i18n("Key")},{prop:"source",name:this.i18n("Source"),cellTemplate:this.configurationSourceTpl,pipe:new u},{prop:"value",name:this.i18n("Value"),cellTemplate:this.configurationValueTpl}]},l.prototype.ngOnChanges=function(){var l=this;this.data&&(this.data=this.data.filter(function(n){return l.rbdConfigurationService.getOptionFields().map(function(l){return l.name}).includes(n.name)}))},l}()},aa9H:function(l,n,e){"use strict";var t=e("gIcY"),u=(e("XED3"),e("QFaf")),i=e("kvvV"),o=(e("kn/O"),function(){return function(){}}());e.d(n,"a",function(){return a});var a=function(){function l(l,n,e,t){this.modalRef=l,this.i18n=n,this.rbdMirroringService=e,this.taskWrapper=t,this.bsConfig={containerClass:"theme-default"},this.peerExists=!1,this.mirrorModes=[{id:"disabled",name:this.i18n("Disabled")},{id:"pool",name:this.i18n("Pool")},{id:"image",name:this.i18n("Image")}],this.createForm()}return l.prototype.createForm=function(){this.editModeForm=new u.a({mirrorMode:new t.i("",{validators:[t.A.required,this.validateMode.bind(this)]})})},l.prototype.ngOnInit=function(){var l=this;this.pattern=""+this.poolName,this.rbdMirroringService.getPool(this.poolName).subscribe(function(n){l.setResponse(n)}),this.subs=this.rbdMirroringService.subscribeSummary(function(n){if(l.peerExists=!1,n){var e=n.content_data.pools.find(function(n){return l.poolName===n.name});l.peerExists=e&&e.peer_uuids.length}})},l.prototype.ngOnDestroy=function(){this.subs.unsubscribe()},l.prototype.validateMode=function(l){return"disabled"===l.value&&this.peerExists?{cannotDisable:{value:l.value}}:null},l.prototype.setResponse=function(l){this.editModeForm.get("mirrorMode").setValue(l.mirror_mode)},l.prototype.update=function(){var l=this,n=new o;n.mirror_mode=this.editModeForm.getValue("mirrorMode"),this.taskWrapper.wrapTaskAroundCall({task:new i.a("rbd/mirroring/pool/edit",{pool_name:this.poolName}),call:this.rbdMirroringService.updatePool(this.poolName,n)}).subscribe(void 0,function(){return l.editModeForm.setErrors({cdSubmitButton:!0})},function(){l.rbdMirroringService.refresh(),l.modalRef.hide()})},l}()},bUo2:function(l,n,e){"use strict";var t=e("CcnG"),u=e("gp3X"),i=e("sb0X"),o=e("EEJc"),a=e("ajRT"),r=e("gIcY"),s=e("Ip0R"),d=e("ANnk"),c=e("f/UV"),p=e("aexS"),m=e("D4zM"),f=e("OcYo"),g=e("SZbH"),h=e("KVJa"),v=e("Z21x"),b=e("sne2"),y=e("Sofw"),C=e("DQlY"),_=e("my5R"),w=e("9nlD"),R=e("Jm/i");e.d(n,"a",function(){return q});var I=t["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function S(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"span",[["class","help-block"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["This field is required."]))],null,null)}function k(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"span",[["class","help-block"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Usernames must have a length of 8 to 64 characters and can only contain letters, '.', '@', '-', '_' or ':'."]))],null,null)}function E(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"span",[["class","help-block"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["This field is required."]))],null,null)}function F(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"span",[["class","help-block"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Passwords must have a length of 12 to 16 characters and can only contain letters, '@', '-', '_' or '/'."]))],null,null)}function D(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"span",[["class","help-block"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["This field is required."]))],null,null)}function V(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"span",[["class","help-block"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Usernames must have a length of 8 to 64 characters and can only contain letters, '.', '@', '-', '_' or ':'."]))],null,null)}function T(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"span",[["class","help-block"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["This field is required."]))],null,null)}function N(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"span",[["class","help-block"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Passwords must have a length of 12 to 16 characters and can only contain letters, '@', '-', '_' or '/'."]))],null,null)}function P(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"cd-submit-button",[],null,[[null,"submitAction"]],function(l,n,e){var t=!0;return"submitAction"===n&&(t=!1!==l.component.submitAction()&&t),t},u.b,u.a)),t["\u0275did"](1,114688,null,0,i.a,[t.ElementRef],{form:[0,"form"]},{submitAction:"submitAction"}),(l()(),t["\u0275ted"](-1,0,["Submit"]))],function(l,n){l(n,1,0,n.component.discoveryForm)},null)}function x(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,97,"cd-modal",[],null,null,null,o.c,o.b)),t["\u0275did"](1,49152,null,0,a.a,[],{modalRef:[0,"modalRef"]},null),(l()(),t["\u0275eld"](2,0,null,0,1,null,null,null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Discovery Authentication"])),(l()(),t["\u0275eld"](4,0,null,1,93,null,null,null,null,null,null,null)),(l()(),t["\u0275eld"](5,0,null,null,92,"form",[["class","form-horizontal"],["name","discoveryForm"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,e){var u=!0;return"submit"===n&&(u=!1!==t["\u0275nov"](l,7).onSubmit(e)&&u),"reset"===n&&(u=!1!==t["\u0275nov"](l,7).onReset()&&u),u},null,null)),t["\u0275did"](6,16384,null,0,r.D,[],null,null),t["\u0275did"](7,540672,[["formDir",4]],0,r.l,[[8,null],[8,null]],{form:[0,"form"]},null),t["\u0275prd"](2048,null,r.d,null,[r.l]),t["\u0275did"](9,16384,null,0,r.s,[[4,r.d]],null,null),(l()(),t["\u0275eld"](10,0,null,null,81,"div",[["class","modal-body"]],null,null,null,null,null)),(l()(),t["\u0275eld"](11,0,null,null,16,"div",[["class","form-group"]],null,null,null,null,null)),t["\u0275did"](12,278528,null,0,s.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](13,{"has-error":0}),(l()(),t["\u0275eld"](14,0,null,null,1,"label",[["class","control-label col-sm-4"],["for","user"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["User"])),(l()(),t["\u0275eld"](16,0,null,null,11,"div",[["class","col-sm-8"]],null,null,null,null,null)),(l()(),t["\u0275eld"](17,0,null,null,6,"input",[["autocomplete","off"],["class","form-control"],["formControlName","user"],["id","user"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,e){var u=!0;return"input"===n&&(u=!1!==t["\u0275nov"](l,18)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,18).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,18)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,18)._compositionEnd(e.target.value)&&u),u},null,null)),t["\u0275did"](18,16384,null,0,r.e,[t.Renderer2,t.ElementRef,[2,r.b]],null,null),t["\u0275prd"](1024,null,r.p,function(l){return[l]},[r.e]),t["\u0275did"](20,671744,null,0,r.j,[[3,r.d],[8,null],[8,null],[6,r.p],[2,r.F]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,r.q,null,[r.j]),t["\u0275did"](22,16384,null,0,r.r,[[4,r.q]],null,null),t["\u0275did"](23,4210688,null,0,d.a,[[2,c.a],p.a,t.ElementRef],null,null),(l()(),t["\u0275and"](16777216,null,null,1,null,S)),t["\u0275did"](25,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,k)),t["\u0275did"](27,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](28,0,null,null,22,"div",[["class","form-group"]],null,null,null,null,null)),t["\u0275did"](29,278528,null,0,s.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](30,{"has-error":0}),(l()(),t["\u0275eld"](31,0,null,null,1,"label",[["class","control-label col-sm-4"],["for","password"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Password"])),(l()(),t["\u0275eld"](33,0,null,null,17,"div",[["class","col-sm-8"]],null,null,null,null,null)),(l()(),t["\u0275eld"](34,0,null,null,12,"div",[["class","input-group"]],null,null,null,null,null)),(l()(),t["\u0275eld"](35,0,null,null,6,"input",[["autocomplete","new-password"],["class","form-control"],["formControlName","password"],["id","password"],["type","password"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,e){var u=!0;return"input"===n&&(u=!1!==t["\u0275nov"](l,36)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,36).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,36)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,36)._compositionEnd(e.target.value)&&u),u},null,null)),t["\u0275did"](36,16384,null,0,r.e,[t.Renderer2,t.ElementRef,[2,r.b]],null,null),t["\u0275prd"](1024,null,r.p,function(l){return[l]},[r.e]),t["\u0275did"](38,671744,null,0,r.j,[[3,r.d],[8,null],[8,null],[6,r.p],[2,r.F]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,r.q,null,[r.j]),t["\u0275did"](40,16384,null,0,r.r,[[4,r.q]],null,null),t["\u0275did"](41,4210688,null,0,d.a,[[2,c.a],p.a,t.ElementRef],null,null),(l()(),t["\u0275eld"](42,0,null,null,4,"span",[["class","input-group-btn"]],null,null,null,null,null)),(l()(),t["\u0275eld"](43,0,null,null,1,"button",[["cdPasswordButton","password"],["class","btn btn-default"],["type","button"]],null,[[null,"click"]],function(l,n,e){var u=!0;return"click"===n&&(u=!1!==t["\u0275nov"](l,44).onClick()&&u),u},null,null)),t["\u0275did"](44,81920,null,0,m.a,[t.ElementRef,t.Renderer2],{cdPasswordButton:[0,"cdPasswordButton"]},null),(l()(),t["\u0275eld"](45,0,null,null,1,"button",[["cdCopy2ClipboardButton","password"],["class","btn btn-default"],["type","button"]],null,[[null,"click"]],function(l,n,e){var u=!0;return"click"===n&&(u=!1!==t["\u0275nov"](l,46).onClick()&&u),u},null,null)),t["\u0275did"](46,81920,null,0,f.a,[t.ElementRef,t.Renderer2,g.j],{cdCopy2ClipboardButton:[0,"cdCopy2ClipboardButton"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,E)),t["\u0275did"](48,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,F)),t["\u0275did"](50,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](51,0,null,null,17,"div",[["class","form-group"]],null,null,null,null,null)),t["\u0275did"](52,278528,null,0,s.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](53,{"has-error":0}),(l()(),t["\u0275eld"](54,0,null,null,2,"label",[["class","control-label col-sm-4"],["for","mutual_user"]],null,null,null,null,null)),(l()(),t["\u0275eld"](55,0,null,null,1,null,null,null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Mutual User"])),(l()(),t["\u0275eld"](57,0,null,null,11,"div",[["class","col-sm-8"]],null,null,null,null,null)),(l()(),t["\u0275eld"](58,0,null,null,6,"input",[["autocomplete","off"],["class","form-control"],["formControlName","mutual_user"],["id","mutual_user"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,e){var u=!0;return"input"===n&&(u=!1!==t["\u0275nov"](l,59)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,59).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,59)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,59)._compositionEnd(e.target.value)&&u),u},null,null)),t["\u0275did"](59,16384,null,0,r.e,[t.Renderer2,t.ElementRef,[2,r.b]],null,null),t["\u0275prd"](1024,null,r.p,function(l){return[l]},[r.e]),t["\u0275did"](61,671744,null,0,r.j,[[3,r.d],[8,null],[8,null],[6,r.p],[2,r.F]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,r.q,null,[r.j]),t["\u0275did"](63,16384,null,0,r.r,[[4,r.q]],null,null),t["\u0275did"](64,4210688,null,0,d.a,[[2,c.a],p.a,t.ElementRef],null,null),(l()(),t["\u0275and"](16777216,null,null,1,null,D)),t["\u0275did"](66,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,V)),t["\u0275did"](68,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](69,0,null,null,22,"div",[["class","form-group"]],null,null,null,null,null)),t["\u0275did"](70,278528,null,0,s.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](71,{"has-error":0}),(l()(),t["\u0275eld"](72,0,null,null,1,"label",[["class","control-label col-sm-4"],["for","mutual_password"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Mutual Password"])),(l()(),t["\u0275eld"](74,0,null,null,17,"div",[["class","col-sm-8"]],null,null,null,null,null)),(l()(),t["\u0275eld"](75,0,null,null,12,"div",[["class","input-group"]],null,null,null,null,null)),(l()(),t["\u0275eld"](76,0,null,null,6,"input",[["autocomplete","new-password"],["class","form-control"],["formControlName","mutual_password"],["id","mutual_password"],["type","password"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,e){var u=!0;return"input"===n&&(u=!1!==t["\u0275nov"](l,77)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,77).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,77)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,77)._compositionEnd(e.target.value)&&u),u},null,null)),t["\u0275did"](77,16384,null,0,r.e,[t.Renderer2,t.ElementRef,[2,r.b]],null,null),t["\u0275prd"](1024,null,r.p,function(l){return[l]},[r.e]),t["\u0275did"](79,671744,null,0,r.j,[[3,r.d],[8,null],[8,null],[6,r.p],[2,r.F]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,r.q,null,[r.j]),t["\u0275did"](81,16384,null,0,r.r,[[4,r.q]],null,null),t["\u0275did"](82,4210688,null,0,d.a,[[2,c.a],p.a,t.ElementRef],null,null),(l()(),t["\u0275eld"](83,0,null,null,4,"span",[["class","input-group-btn"]],null,null,null,null,null)),(l()(),t["\u0275eld"](84,0,null,null,1,"button",[["cdPasswordButton","mutual_password"],["class","btn btn-default"],["type","button"]],null,[[null,"click"]],function(l,n,e){var u=!0;return"click"===n&&(u=!1!==t["\u0275nov"](l,85).onClick()&&u),u},null,null)),t["\u0275did"](85,81920,null,0,m.a,[t.ElementRef,t.Renderer2],{cdPasswordButton:[0,"cdPasswordButton"]},null),(l()(),t["\u0275eld"](86,0,null,null,1,"button",[["cdCopy2ClipboardButton","mutual_password"],["class","btn btn-default"],["type","button"]],null,[[null,"click"]],function(l,n,e){var u=!0;return"click"===n&&(u=!1!==t["\u0275nov"](l,87).onClick()&&u),u},null,null)),t["\u0275did"](87,81920,null,0,f.a,[t.ElementRef,t.Renderer2,g.j],{cdCopy2ClipboardButton:[0,"cdCopy2ClipboardButton"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,T)),t["\u0275did"](89,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,N)),t["\u0275did"](91,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](92,0,null,null,5,"div",[["class","modal-footer"]],null,null,null,null,null)),(l()(),t["\u0275eld"](93,0,null,null,4,"div",[["class","button-group text-right"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,P)),t["\u0275did"](95,16384,null,0,s.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](96,0,null,null,1,"cd-back-button",[["name","Cancel"]],null,null,null,h.b,h.a)),t["\u0275did"](97,49152,null,0,v.a,[s.Location,b.b],{name:[0,"name"],back:[1,"back"]},null)],function(l,n){var e=n.component;l(n,1,0,e.bsModalRef),l(n,7,0,e.discoveryForm);var u=l(n,13,0,e.discoveryForm.showError("user",t["\u0275nov"](n,7)));l(n,12,0,"form-group",u),l(n,20,0,"user"),l(n,25,0,e.discoveryForm.showError("user",t["\u0275nov"](n,7),"required")),l(n,27,0,e.discoveryForm.showError("user",t["\u0275nov"](n,7),"pattern"));var i=l(n,30,0,e.discoveryForm.showError("password",t["\u0275nov"](n,7)));l(n,29,0,"form-group",i),l(n,38,0,"password"),l(n,44,0,"password"),l(n,46,0,"password"),l(n,48,0,e.discoveryForm.showError("password",t["\u0275nov"](n,7),"required")),l(n,50,0,e.discoveryForm.showError("password",t["\u0275nov"](n,7),"pattern"));var o=l(n,53,0,e.discoveryForm.showError("mutual_user",t["\u0275nov"](n,7)));l(n,52,0,"form-group",o),l(n,61,0,"mutual_user"),l(n,66,0,e.discoveryForm.showError("mutual_user",t["\u0275nov"](n,7),"required")),l(n,68,0,e.discoveryForm.showError("mutual_user",t["\u0275nov"](n,7),"pattern"));var a=l(n,71,0,e.discoveryForm.showError("mutual_password",t["\u0275nov"](n,7)));l(n,70,0,"form-group",a),l(n,79,0,"mutual_password"),l(n,85,0,"mutual_password"),l(n,87,0,"mutual_password"),l(n,89,0,e.discoveryForm.showError("mutual_password",t["\u0275nov"](n,7),"required")),l(n,91,0,e.discoveryForm.showError("mutual_password",t["\u0275nov"](n,7),"pattern")),l(n,95,0,e.hasPermission),l(n,97,0,"Cancel",e.bsModalRef.hide)},function(l,n){l(n,5,0,t["\u0275nov"](n,9).ngClassUntouched,t["\u0275nov"](n,9).ngClassTouched,t["\u0275nov"](n,9).ngClassPristine,t["\u0275nov"](n,9).ngClassDirty,t["\u0275nov"](n,9).ngClassValid,t["\u0275nov"](n,9).ngClassInvalid,t["\u0275nov"](n,9).ngClassPending),l(n,17,0,t["\u0275nov"](n,22).ngClassUntouched,t["\u0275nov"](n,22).ngClassTouched,t["\u0275nov"](n,22).ngClassPristine,t["\u0275nov"](n,22).ngClassDirty,t["\u0275nov"](n,22).ngClassValid,t["\u0275nov"](n,22).ngClassInvalid,t["\u0275nov"](n,22).ngClassPending),l(n,35,0,t["\u0275nov"](n,40).ngClassUntouched,t["\u0275nov"](n,40).ngClassTouched,t["\u0275nov"](n,40).ngClassPristine,t["\u0275nov"](n,40).ngClassDirty,t["\u0275nov"](n,40).ngClassValid,t["\u0275nov"](n,40).ngClassInvalid,t["\u0275nov"](n,40).ngClassPending),l(n,58,0,t["\u0275nov"](n,63).ngClassUntouched,t["\u0275nov"](n,63).ngClassTouched,t["\u0275nov"](n,63).ngClassPristine,t["\u0275nov"](n,63).ngClassDirty,t["\u0275nov"](n,63).ngClassValid,t["\u0275nov"](n,63).ngClassInvalid,t["\u0275nov"](n,63).ngClassPending),l(n,76,0,t["\u0275nov"](n,81).ngClassUntouched,t["\u0275nov"](n,81).ngClassTouched,t["\u0275nov"](n,81).ngClassPristine,t["\u0275nov"](n,81).ngClassDirty,t["\u0275nov"](n,81).ngClassValid,t["\u0275nov"](n,81).ngClassInvalid,t["\u0275nov"](n,81).ngClassPending)})}function O(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"cd-iscsi-target-discovery-modal",[],null,null,null,x,I)),t["\u0275did"](1,114688,null,0,y.a,[p.a,C.a,_.a,w.a,R.a],null,null)],function(l,n){l(n,1,0)},null)}var q=t["\u0275ccf"]("cd-iscsi-target-discovery-modal",y.a,O,{},{},[])},cxJu:function(l,n,e){"use strict";e.d(n,"a",function(){return t}),e("XED3");var t=function(){function l(l){this.rbdMirroringService=l}return l.prototype.ngOnInit=function(){var l=this;this.subs=this.rbdMirroringService.subscribeSummary(function(n){n&&(l.status=n.content_data.status)})},l.prototype.ngOnDestroy=function(){this.subs.unsubscribe()},l}()},"e/kN":function(l,n,e){"use strict";e.d(n,"a",function(){return s});var t=e("LvDl"),u=(e("my5R"),e("0+/T")),i=(e("sne2"),e("uIqm"),e("x38r")),o=e("vCyI"),a=e("kvvV"),r=(e("+0ag"),e("uhwM"),e("G1/K"),e("aexS"),e("mSOc"),e("VTlA"),e("kn/O"),e("Sofw")),s=function(){function l(l,n,e,u,i,a,r,s,d,c,p){var m=this;this.authStorageService=l,this.i18n=n,this.iscsiService=e,this.listPipe=u,this.taskListService=i,this.cephReleaseNamePipe=a,this.notAvailablePipe=r,this.summaryservice=s,this.modalService=d,this.taskWrapper=c,this.actionLabels=p,this.available=void 0,this.selection=new o.a,this.targets=[],this.builders={"iscsi/target/create":function(l){return{target_iqn:l.target_iqn}}},this.permissions=this.authStorageService.getPermissions(),this.tableActions=[{permission:"create",icon:"fa-plus",routerLink:function(){return"/block/iscsi/targets/create"},name:this.actionLabels.CREATE},{permission:"update",icon:"fa-pencil",routerLink:function(){return"/block/iscsi/targets/edit/"+m.selection.first().target_iqn},name:this.actionLabels.EDIT,disable:function(){return!m.selection.first()||!t.isUndefined(m.getEditDisableDesc())},disableDesc:function(){return m.getEditDisableDesc()}},{permission:"delete",icon:"fa-times",click:function(){return m.deleteIscsiTargetModal()},name:this.actionLabels.DELETE,disable:function(){return!m.selection.first()||!t.isUndefined(m.getDeleteDisableDesc())},disableDesc:function(){return m.getDeleteDisableDesc()}}]}return l.prototype.ngOnInit=function(){var l=this;this.columns=[{name:this.i18n("Target"),prop:"target_iqn",flexGrow:2,cellTransformation:i.a.executing},{name:this.i18n("Portals"),prop:"cdPortals",pipe:this.listPipe,flexGrow:2},{name:this.i18n("Images"),prop:"cdImages",pipe:this.listPipe,flexGrow:2},{name:this.i18n("# Sessions"),prop:"info.num_sessions",pipe:this.notAvailablePipe,flexGrow:1}],this.iscsiService.status().subscribe(function(n){if(l.available=n.available,n.available)l.iscsiService.version().subscribe(function(n){l.cephIscsiConfigVersion=n.ceph_iscsi_config_version,l.taskListService.init(function(){return l.iscsiService.listTargets()},function(n){return l.prepareResponse(n)},function(n){return l.targets=n},function(){return l.onFetchError()},l.taskFilter,l.itemFilter,l.builders)}),l.iscsiService.settings().subscribe(function(n){l.settings=n});else{var e=l.summaryservice.getCurrentSummary(),t=l.cephReleaseNamePipe.transform(e.version);l.docsUrl="http://docs.ceph.com/docs/"+t+"/mgr/dashboard/#enabling-iscsi-management",l.status=n.message}})},l.prototype.ngOnDestroy=function(){this.summaryDataSubscription&&this.summaryDataSubscription.unsubscribe()},l.prototype.getEditDisableDesc=function(){var l=this.selection.first();return l&&l.cdExecuting?l.cdExecuting:l&&t.isUndefined(l.info)?this.i18n("Unavailable gateway(s)"):void 0},l.prototype.getDeleteDisableDesc=function(){var l=this.selection.first();return l&&l.cdExecuting?l.cdExecuting:l&&t.isUndefined(l.info)?this.i18n("Unavailable gateway(s)"):l&&l.info&&l.info.num_sessions?this.i18n("Target has active sessions"):void 0},l.prototype.prepareResponse=function(l){return l.forEach(function(l){l.cdPortals=l.portals.map(function(l){return l.host+":"+l.ip}),l.cdImages=l.disks.map(function(l){return l.pool+"/"+l.image})}),l},l.prototype.onFetchError=function(){this.table.reset()},l.prototype.itemFilter=function(l,n){return l.target_iqn===n.metadata.target_iqn},l.prototype.taskFilter=function(l){return["iscsi/target/create","iscsi/target/edit","iscsi/target/delete"].includes(l.name)},l.prototype.updateSelection=function(l){this.selection=l},l.prototype.deleteIscsiTargetModal=function(){var l=this,n=this.selection.first().target_iqn;this.modalRef=this.modalService.show(u.a,{initialState:{itemDescription:this.i18n("iSCSI target"),itemNames:[n],submitActionObservable:function(){return l.taskWrapper.wrapTaskAroundCall({task:new a.a("iscsi/target/delete",{target_iqn:n}),call:l.iscsiService.deleteTarget(n)})}}})},l.prototype.configureDiscoveryAuth=function(){this.modalService.show(r.a,{})},l}()},eF8U:function(l,n,e){"use strict";var t=e("CcnG"),u=e("gIcY"),i=e("ANnk"),o=e("f/UV"),a=e("aexS"),r=e("Ip0R");e("jMP8"),e.d(n,"a",function(){return s}),e.d(n,"b",function(){return b});var s=t["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function d(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,3,"option",[],null,null,null,null,null)),t["\u0275did"](1,147456,null,0,u.v,[t.ElementRef,t.Renderer2,[2,u.z]],{ngValue:[0,"ngValue"]},null),t["\u0275did"](2,147456,null,0,u.G,[t.ElementRef,t.Renderer2,[8,null]],{ngValue:[0,"ngValue"]},null),(l()(),t["\u0275ted"](3,null,["",""]))],function(l,n){l(n,1,0,n.context.$implicit),l(n,2,0,n.context.$implicit)},function(l,n){l(n,3,0,n.context.$implicit)})}function c(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,11,"select",[["class","form-control custom-select"]],[[8,"id",0],[8,"name",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(l,n,e){var u=!0;return"change"===n&&(u=!1!==t["\u0275nov"](l,1).onChange(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,1).onTouched()&&u),u},null,null)),t["\u0275did"](1,16384,null,0,u.z,[t.Renderer2,t.ElementRef],null,null),t["\u0275prd"](1024,null,u.p,function(l){return[l]},[u.z]),t["\u0275did"](3,671744,null,0,u.j,[[3,u.d],[8,null],[8,null],[6,u.p],[2,u.F]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,u.q,null,[u.j]),t["\u0275did"](5,16384,null,0,u.r,[[4,u.q]],null,null),t["\u0275did"](6,4210688,null,0,i.a,[[2,o.a],a.a,t.ElementRef],null,null),(l()(),t["\u0275eld"](7,0,null,null,2,"option",[],null,null,null,null,null)),t["\u0275did"](8,147456,null,0,u.v,[t.ElementRef,t.Renderer2,[2,u.z]],{ngValue:[0,"ngValue"]},null),t["\u0275did"](9,147456,null,0,u.G,[t.ElementRef,t.Renderer2,[8,null]],{ngValue:[0,"ngValue"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,d)),t["\u0275did"](11,278528,null,0,r.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(l,n){var e=n.component;l(n,3,0,e.setting),l(n,8,0,null),l(n,9,0,null),l(n,11,0,e.limits.values)},function(l,n){var e=n.component;l(n,0,0,t["\u0275inlineInterpolate"](1,"",e.setting,""),t["\u0275inlineInterpolate"](1,"",e.setting,""),t["\u0275nov"](n,5).ngClassUntouched,t["\u0275nov"](n,5).ngClassTouched,t["\u0275nov"](n,5).ngClassPristine,t["\u0275nov"](n,5).ngClassDirty,t["\u0275nov"](n,5).ngClassValid,t["\u0275nov"](n,5).ngClassInvalid,t["\u0275nov"](n,5).ngClassPending)})}function p(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,7,"input",[["class","form-control"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(l,n,e){var u=!0;return"input"===n&&(u=!1!==t["\u0275nov"](l,1)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,1).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,1)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,1)._compositionEnd(e.target.value)&&u),"change"===n&&(u=!1!==t["\u0275nov"](l,2).onChange(e.target.value)&&u),"input"===n&&(u=!1!==t["\u0275nov"](l,2).onChange(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,2).onTouched()&&u),u},null,null)),t["\u0275did"](1,16384,null,0,u.e,[t.Renderer2,t.ElementRef,[2,u.b]],null,null),t["\u0275did"](2,16384,null,0,u.C,[t.Renderer2,t.ElementRef],null,null),t["\u0275prd"](1024,null,u.p,function(l,n){return[l,n]},[u.e,u.C]),t["\u0275did"](4,671744,null,0,u.j,[[3,u.d],[8,null],[8,null],[6,u.p],[2,u.F]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,u.q,null,[u.j]),t["\u0275did"](6,16384,null,0,u.r,[[4,u.q]],null,null),t["\u0275did"](7,4210688,null,0,i.a,[[2,o.a],a.a,t.ElementRef],null,null)],function(l,n){l(n,4,0,n.component.setting)},function(l,n){l(n,0,0,t["\u0275nov"](n,6).ngClassUntouched,t["\u0275nov"](n,6).ngClassTouched,t["\u0275nov"](n,6).ngClassPristine,t["\u0275nov"](n,6).ngClassDirty,t["\u0275nov"](n,6).ngClassValid,t["\u0275nov"](n,6).ngClassInvalid,t["\u0275nov"](n,6).ngClassPending)})}function m(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,6,"input",[["class","form-control"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,e){var u=!0;return"input"===n&&(u=!1!==t["\u0275nov"](l,1)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,1).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,1)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,1)._compositionEnd(e.target.value)&&u),u},null,null)),t["\u0275did"](1,16384,null,0,u.e,[t.Renderer2,t.ElementRef,[2,u.b]],null,null),t["\u0275prd"](1024,null,u.p,function(l){return[l]},[u.e]),t["\u0275did"](3,671744,null,0,u.j,[[3,u.d],[8,null],[8,null],[6,u.p],[2,u.F]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,u.q,null,[u.j]),t["\u0275did"](5,16384,null,0,u.r,[[4,u.q]],null,null),t["\u0275did"](6,4210688,null,0,i.a,[[2,o.a],a.a,t.ElementRef],null,null)],function(l,n){l(n,3,0,n.component.setting)},function(l,n){l(n,0,0,t["\u0275nov"](n,5).ngClassUntouched,t["\u0275nov"](n,5).ngClassTouched,t["\u0275nov"](n,5).ngClassPristine,t["\u0275nov"](n,5).ngClassDirty,t["\u0275nov"](n,5).ngClassValid,t["\u0275nov"](n,5).ngClassInvalid,t["\u0275nov"](n,5).ngClassPending)})}function f(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,23,null,null,null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,10,"div",[["class","radio radio-inline"]],null,null,null,null,null)),(l()(),t["\u0275eld"](3,0,null,null,7,"input",[["class","custom-control-input"],["type","radio"]],[[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(l,n,e){var u=!0;return"input"===n&&(u=!1!==t["\u0275nov"](l,4)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,4).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,4)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,4)._compositionEnd(e.target.value)&&u),"change"===n&&(u=!1!==t["\u0275nov"](l,5).onChange()&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,5).onTouched()&&u),u},null,null)),t["\u0275did"](4,16384,null,0,u.e,[t.Renderer2,t.ElementRef,[2,u.b]],null,null),t["\u0275did"](5,212992,null,0,u.w,[t.Renderer2,t.ElementRef,u.E,t.Injector],{formControlName:[0,"formControlName"],value:[1,"value"]},null),t["\u0275prd"](1024,null,u.p,function(l,n){return[l,n]},[u.e,u.w]),t["\u0275did"](7,671744,null,0,u.j,[[3,u.d],[8,null],[8,null],[6,u.p],[2,u.F]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,u.q,null,[u.j]),t["\u0275did"](9,16384,null,0,u.r,[[4,u.q]],null,null),t["\u0275did"](10,4210688,null,0,i.a,[[2,o.a],a.a,t.ElementRef],null,null),(l()(),t["\u0275eld"](11,0,null,null,1,"label",[["class","custom-control-label"]],[[8,"htmlFor",0]],null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Yes"])),(l()(),t["\u0275eld"](13,0,null,null,10,"div",[["class","radio radio-inline"]],null,null,null,null,null)),(l()(),t["\u0275eld"](14,0,null,null,7,"input",[["class","custom-control-input"],["type","radio"]],[[8,"id",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(l,n,e){var u=!0;return"input"===n&&(u=!1!==t["\u0275nov"](l,15)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,15).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,15)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,15)._compositionEnd(e.target.value)&&u),"change"===n&&(u=!1!==t["\u0275nov"](l,16).onChange()&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,16).onTouched()&&u),u},null,null)),t["\u0275did"](15,16384,null,0,u.e,[t.Renderer2,t.ElementRef,[2,u.b]],null,null),t["\u0275did"](16,212992,null,0,u.w,[t.Renderer2,t.ElementRef,u.E,t.Injector],{formControlName:[0,"formControlName"],value:[1,"value"]},null),t["\u0275prd"](1024,null,u.p,function(l,n){return[l,n]},[u.e,u.w]),t["\u0275did"](18,671744,null,0,u.j,[[3,u.d],[8,null],[8,null],[6,u.p],[2,u.F]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,u.q,null,[u.j]),t["\u0275did"](20,16384,null,0,u.r,[[4,u.q]],null,null),t["\u0275did"](21,4210688,null,0,i.a,[[2,o.a],a.a,t.ElementRef],null,null),(l()(),t["\u0275eld"](22,0,null,null,1,"label",[["class","custom-control-label"]],[[8,"htmlFor",0]],null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["No"]))],function(l,n){var e=n.component;l(n,5,0,e.setting,!0),l(n,7,0,e.setting),l(n,16,0,e.setting,!1),l(n,18,0,e.setting)},function(l,n){var e=n.component;l(n,3,0,e.setting+"True",t["\u0275nov"](n,9).ngClassUntouched,t["\u0275nov"](n,9).ngClassTouched,t["\u0275nov"](n,9).ngClassPristine,t["\u0275nov"](n,9).ngClassDirty,t["\u0275nov"](n,9).ngClassValid,t["\u0275nov"](n,9).ngClassInvalid,t["\u0275nov"](n,9).ngClassPending),l(n,11,0,e.setting+"True"),l(n,14,0,e.setting+"False",t["\u0275nov"](n,20).ngClassUntouched,t["\u0275nov"](n,20).ngClassTouched,t["\u0275nov"](n,20).ngClassPristine,t["\u0275nov"](n,20).ngClassDirty,t["\u0275nov"](n,20).ngClassValid,t["\u0275nov"](n,20).ngClassInvalid,t["\u0275nov"](n,20).ngClassPending),l(n,22,0,e.setting+"False")})}function g(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,6,"span",[],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,p)),t["\u0275did"](2,16384,null,0,r.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,m)),t["\u0275did"](4,16384,null,0,r.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,f)),t["\u0275did"](6,16384,null,0,r.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(l,n){var e=n.component;l(n,2,0,"int"===e.limits.type),l(n,4,0,"str"===e.limits.type),l(n,6,0,"bool"===e.limits.type)},null)}function h(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"span",[["class","help-block"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,1,null,null,null,null,null,null,null)),(l()(),t["\u0275ted"](2,null,["Must be greater than or equal to ","."]))],null,function(l,n){l(n,2,0,n.component.limits.min)})}function v(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"span",[["class","help-block"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,1,null,null,null,null,null,null,null)),(l()(),t["\u0275ted"](2,null,["Must be less than or equal to ","."]))],null,function(l,n){l(n,2,0,n.component.limits.max)})}function b(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,15,"div",[["class","form-group"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,e){var u=!0;return"submit"===n&&(u=!1!==t["\u0275nov"](l,3).onSubmit(e)&&u),"reset"===n&&(u=!1!==t["\u0275nov"](l,3).onReset()&&u),u},null,null)),t["\u0275did"](1,278528,null,0,r.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](2,{"has-error":0}),t["\u0275did"](3,540672,null,0,u.l,[[8,null],[8,null]],{form:[0,"form"]},null),t["\u0275prd"](2048,null,u.d,null,[u.l]),t["\u0275did"](5,16384,null,0,u.s,[[4,u.d]],null,null),(l()(),t["\u0275eld"](6,0,null,null,1,"label",[["class","col-form-label"]],[[8,"htmlFor",0]],null,null,null,null)),(l()(),t["\u0275ted"](7,null,["",""])),(l()(),t["\u0275and"](16777216,null,null,1,null,c)),t["\u0275did"](9,16384,null,0,r.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,g)),t["\u0275did"](11,16384,null,0,r.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,h)),t["\u0275did"](13,16384,null,0,r.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,v)),t["\u0275did"](15,16384,null,0,r.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(l,n){var e=n.component,t=l(n,2,0,e.settingsForm.showError(e.setting,e.formDir));l(n,1,0,"form-group",t),l(n,3,0,e.settingsForm),l(n,9,0,"enum"===e.limits.type),l(n,11,0,"enum"!==e.limits.type),l(n,13,0,e.settingsForm.showError(e.setting,e.formDir,"min")),l(n,15,0,e.settingsForm.showError(e.setting,e.formDir,"max"))},function(l,n){var e=n.component;l(n,0,0,t["\u0275nov"](n,5).ngClassUntouched,t["\u0275nov"](n,5).ngClassTouched,t["\u0275nov"](n,5).ngClassPristine,t["\u0275nov"](n,5).ngClassDirty,t["\u0275nov"](n,5).ngClassValid,t["\u0275nov"](n,5).ngClassInvalid,t["\u0275nov"](n,5).ngClassPending),l(n,6,0,t["\u0275inlineInterpolate"](1,"",e.setting,"")),l(n,7,0,e.setting)})}},gr3l:function(l,n,e){"use strict";e.d(n,"a",function(){return m});var t=e("gIcY"),u=e("LvDl"),i=e("VNr4"),o=(e("my5R"),e("F83c"),e("DNAf")),a=e("a96k"),r=(e("sne2"),e("QFaf")),s=e("1Ni5"),d=e("kvvV"),c=(e("kn/O"),e("Z4cD")),p=e("a6qe"),m=function(){function l(l,n,e,t,u,i,a,r){this.iscsiService=l,this.modalService=n,this.rbdService=e,this.router=t,this.route=u,this.i18n=i,this.taskWrapper=a,this.actionLabels=r,this.api_version=0,this.minimum_gateways=1,this.isEdit=!1,this.portalsSelections=[],this.imagesInitiatorSelections=[],this.groupDiskSelections=[],this.groupMembersSelections=[],this.imagesSettings={},this.messages={portals:new o.a({noOptions:this.i18n("There are no portals available.")},this.i18n),images:new o.a({noOptions:this.i18n("There are no images available.")},this.i18n),initiatorImage:new o.a({noOptions:this.i18n("There are no images available. Please make sure you add an image to the target.")},this.i18n),groupInitiator:new o.a({noOptions:this.i18n("There are no initiators available. Please make sure you add an initiator to the target.")},this.i18n)},this.IQN_REGEX=/^iqn\.(19|20)\d\d-(0[1-9]|1[0-2])\.\D{2,3}(\.[A-Za-z0-9-]+)+(:[A-Za-z0-9-\.]+)*$/,this.USER_REGEX=/^[\w\.:@_-]{8,64}$/,this.PASSWORD_REGEX=/^[\w@\-_\/]{12,16}$/,this.resource=this.i18n("target")}return l.prototype.ngOnInit=function(){var l=this,n=[this.iscsiService.listTargets(),this.rbdService.list(),this.iscsiService.portals(),this.iscsiService.settings(),this.iscsiService.version()];this.router.url.startsWith("/block/iscsi/targets/edit")&&(this.isEdit=!0,this.route.params.subscribe(function(e){l.target_iqn=decodeURIComponent(e.target_iqn),n.push(l.iscsiService.getTarget(l.target_iqn))})),this.action=this.isEdit?this.actionLabels.EDIT:this.actionLabels.CREATE,Object(i.a)(n).subscribe(function(n){var e=u(n[0]).filter(function(n){return n.target_iqn!==l.target_iqn}).flatMap(function(l){return l.disks}).map(function(l){return l.pool+"/"+l.image}).value();"api_version"in n[3]&&(l.api_version=n[3].api_version),l.minimum_gateways=n[3].config.minimum_gateways,l.target_default_controls=n[3].target_default_controls,l.target_controls_limits=n[3].target_controls_limits,l.disk_default_controls=n[3].disk_default_controls,l.disk_controls_limits=n[3].disk_controls_limits,l.backstores=n[3].backstores,l.default_backstore=n[3].default_backstore,l.unsupported_rbd_features=n[3].unsupported_rbd_features,l.required_rbd_features=n[3].required_rbd_features,l.imagesAll=u(n[1]).flatMap(function(l){return l.value}).filter(function(n){return-1===e.indexOf(n.pool_name+"/"+n.name)&&0!==l.getValidBackstores(n).length}).value(),l.imagesSelections=l.imagesAll.map(function(l){return new a.a(!1,l.pool_name+"/"+l.name,"")});var t=[];n[2].forEach(function(l){l.ip_addresses.forEach(function(n){t.push(new a.a(!1,l.name+":"+n,""))})}),l.portalsSelections=t.slice(),l.cephIscsiConfigVersion=n[4].ceph_iscsi_config_version,l.createForm(),n[5]&&l.resolveModel(n[5])})},l.prototype.createForm=function(){var l=this;if(this.targetForm=new r.a({target_iqn:new t.i("iqn.2001-07.com.ceph:"+Date.now(),{validators:[t.A.required,t.A.pattern(this.IQN_REGEX)]}),target_controls:new t.i({}),portals:new t.i([],{validators:[s.a.custom("minGateways",function(n){return u.uniq(n.map(function(l){return l.split(":")[0]})).length<Math.max(1,l.minimum_gateways)})]}),disks:new t.i([],{validators:[s.a.custom("dupLunId",function(n){var e=l.getLunIds(n);return e.length!==u.uniq(e).length}),s.a.custom("dupWwn",function(n){var e=l.getWwns(n);return e.length!==u.uniq(e).length})]}),initiators:new t.f([]),groups:new t.f([]),acl_enabled:new t.i(!1)}),this.cephIscsiConfigVersion>10){var n=new r.a({user:new t.i(""),password:new t.i(""),mutual_user:new t.i(""),mutual_password:new t.i("")});this.setAuthValidator(n),this.targetForm.addControl("auth",n)}},l.prototype.resolveModel=function(l){var n=this;this.targetForm.patchValue({target_iqn:l.target_iqn,target_controls:l.target_controls,acl_enabled:l.acl_enabled}),this.cephIscsiConfigVersion>10&&this.targetForm.patchValue({auth:l.auth});var e=[];u.forEach(l.portals,function(l){e.push(l.host+":"+l.ip)}),this.targetForm.patchValue({portals:e});var t=[];u.forEach(l.disks,function(l){var e=l.pool+"/"+l.image;t.push(e),n.imagesSettings[e]={backstore:l.backstore},n.imagesSettings[e][l.backstore]=l.controls,"lun"in l&&(n.imagesSettings[e].lun=l.lun),"wwn"in l&&(n.imagesSettings[e].wwn=l.wwn),n.onImageSelection({option:{name:e,selected:!0}})}),this.targetForm.patchValue({disks:t}),u.forEach(l.clients,function(l){var e=n.addInitiator();l.luns=u.map(l.luns,function(l){return l.pool+"/"+l.image}),e.patchValue(l)}),u.forEach(l.groups,function(l){var e=n.addGroup();l.disks=u.map(l.disks,function(l){return l.pool+"/"+l.image}),e.patchValue(l),u.forEach(l.members,function(l){n.onGroupMemberSelection({option:new a.a(!0,l,"")})})})},l.prototype.hasAdvancedSettings=function(l){return Object.values(l).length>0},Object.defineProperty(l.prototype,"portals",{get:function(){return this.targetForm.get("portals")},enumerable:!0,configurable:!0}),l.prototype.onPortalSelection=function(){this.portals.setValue(this.portals.value)},l.prototype.removePortal=function(l,n){return this.portalsSelections.forEach(function(l){l.name===n&&(l.selected=!1)}),this.portals.value.splice(l,1),this.portals.setValue(this.portals.value),!1},Object.defineProperty(l.prototype,"disks",{get:function(){return this.targetForm.get("disks")},enumerable:!0,configurable:!0}),l.prototype.removeImage=function(l,n){return this.imagesSelections.forEach(function(l){l.name===n&&(l.selected=!1)}),this.disks.value.splice(l,1),this.removeImageRefs(n),this.targetForm.get("disks").updateValueAndValidity({emitEvent:!1}),!1},l.prototype.removeImageRefs=function(l){var n=this;this.initiators.controls.forEach(function(n){var e=n.value.luns.filter(function(n){return n!==l});n.get("luns").setValue(e)}),this.groups.controls.forEach(function(n){var e=n.value.disks.filter(function(n){return n!==l});n.get("disks").setValue(e)}),u.forEach(this.imagesInitiatorSelections,function(e,t){n.imagesInitiatorSelections[t]=e.filter(function(n){return n.name!==l})}),u.forEach(this.groupDiskSelections,function(e,t){n.groupDiskSelections[t]=e.filter(function(n){return n.name!==l})})},l.prototype.getDefaultBackstore=function(l){var n=this,e=this.default_backstore,t=this.getImageById(l);return this.validFeatures(t,this.default_backstore)||this.backstores.forEach(function(l){l!==n.default_backstore&&n.validFeatures(t,l)&&(e=l)}),e},l.prototype.isLunIdInUse=function(l,n){var e=this.disks.value.filter(function(l){return l!==n});return this.getLunIds(e).includes(l)},l.prototype.getLunIds=function(l){var n=this;return u.map(l,function(l){return n.imagesSettings[l].lun})},l.prototype.nextLunId=function(l){for(var n=this.disks.value.filter(function(n){return n!==l}),e=this.getLunIds(n),t=0;e.includes(t);)t++;return t},l.prototype.getWwns=function(l){var n=this;return u.map(l,function(l){return n.imagesSettings[l].wwn}).filter(function(l){return u.isString(l)&&""!==l})},l.prototype.onImageSelection=function(l){var n=this,e=l.option;if(e.selected){if(this.imagesSettings[e.name])this.isLunIdInUse(this.imagesSettings[e.name].lun,e.name)&&(this.imagesSettings[e.name].lun=this.nextLunId(e.name));else{var t=this.getDefaultBackstore(e.name);this.imagesSettings[e.name]={backstore:t,lun:this.nextLunId(e.name)},this.imagesSettings[e.name][t]={}}u.forEach(this.imagesInitiatorSelections,function(l,t){l.push(new a.a(!1,e.name,"")),n.imagesInitiatorSelections[t]=l.slice()}),u.forEach(this.groupDiskSelections,function(l,t){l.push(new a.a(!1,e.name,"")),n.groupDiskSelections[t]=l.slice()})}else this.removeImageRefs(e.name);this.targetForm.get("disks").updateValueAndValidity({emitEvent:!1})},Object.defineProperty(l.prototype,"initiators",{get:function(){return this.targetForm.get("initiators")},enumerable:!0,configurable:!0}),l.prototype.addInitiator=function(){var l=this,n=new r.a({client_iqn:new t.i("",{validators:[t.A.required,s.a.custom("notUnique",function(n){var e=l.initiators.controls.reduce(function(l,n){return l.concat(n.value.client_iqn)},[]);return e.indexOf(n)!==e.lastIndexOf(n)}),t.A.pattern(this.IQN_REGEX)]}),auth:new r.a({user:new t.i(""),password:new t.i(""),mutual_user:new t.i(""),mutual_password:new t.i("")}),luns:new t.i([]),cdIsInGroup:new t.i(!1)});this.setAuthValidator(n),this.initiators.push(n),u.forEach(this.groupMembersSelections,function(n,e){n.push(new a.a(!1,"","")),l.groupMembersSelections[e]=n.slice()});var e=u.map(this.targetForm.getValue("disks"),function(l){return new a.a(!1,l,"")});return this.imagesInitiatorSelections.push(e),n},l.prototype.setAuthValidator=function(l){s.a.validateIf(l.get("user"),function(){return l.getValue("password")||l.getValue("mutual_user")||l.getValue("mutual_password")},[t.A.required],[t.A.pattern(this.USER_REGEX)],[l.get("password"),l.get("mutual_user"),l.get("mutual_password")]),s.a.validateIf(l.get("password"),function(){return l.getValue("user")||l.getValue("mutual_user")||l.getValue("mutual_password")},[t.A.required],[t.A.pattern(this.PASSWORD_REGEX)],[l.get("user"),l.get("mutual_user"),l.get("mutual_password")]),s.a.validateIf(l.get("mutual_user"),function(){return l.getValue("mutual_password")},[t.A.required],[t.A.pattern(this.USER_REGEX)],[l.get("user"),l.get("password"),l.get("mutual_password")]),s.a.validateIf(l.get("mutual_password"),function(){return l.getValue("mutual_user")},[t.A.required],[t.A.pattern(this.PASSWORD_REGEX)],[l.get("user"),l.get("password"),l.get("mutual_user")])},l.prototype.removeInitiator=function(l){var n=this,e=this.initiators.value[l];this.initiators.removeAt(l),u.forEach(this.groupMembersSelections,function(e,t){e.splice(l,1),n.groupMembersSelections[t]=e.slice()}),this.groups.controls.forEach(function(l){var n=l.value.members.filter(function(l){return l!==e.client_iqn});l.get("members").setValue(n)}),this.imagesInitiatorSelections.splice(l,1)},l.prototype.updatedInitiatorSelector=function(){var l=this;this.initiators.controls.forEach(function(l){l.get("client_iqn").updateValueAndValidity({emitEvent:!1})}),u.forEach(this.groupMembersSelections,function(n,e){u.forEach(n,function(n,e){var t=n.name;n.name=l.initiators.controls[e].value.client_iqn,l.groups.controls.forEach(function(l){var e=l.value.members,u=e.indexOf(t);-1!==u&&(e[u]=n.name),l.get("members").setValue(e)})}),l.groupMembersSelections[e]=l.groupMembersSelections[e].slice()})},l.prototype.removeInitiatorImage=function(l,n,e,t){var u=l.getValue("luns");return u.splice(n,1),l.patchValue({luns:u}),this.imagesInitiatorSelections[e].forEach(function(l){l.name===t&&(l.selected=!1)}),!1},Object.defineProperty(l.prototype,"groups",{get:function(){return this.targetForm.get("groups")},enumerable:!0,configurable:!0}),l.prototype.addGroup=function(){var l=new r.a({group_id:new t.i("",{validators:[t.A.required]}),members:new t.i([]),disks:new t.i([])});this.groups.push(l);var n=u.map(this.targetForm.getValue("disks"),function(l){return new a.a(!1,l,"")});this.groupDiskSelections.push(n);var e=u.map(this.initiators.value,function(l){return new a.a(!1,l.client_iqn,"",!l.cdIsInGroup)});return this.groupMembersSelections.push(e),l},l.prototype.removeGroup=function(l){this.groups.removeAt(l),this.groupDiskSelections.splice(l,1)},l.prototype.onGroupMemberSelection=function(l){var n,e=l.option;this.initiators.controls.forEach(function(l,t){l.value.client_iqn===e.name&&(l.patchValue({luns:[]}),l.get("cdIsInGroup").setValue(e.selected),n=t)}),u.forEach(this.groupMembersSelections,function(l){l[n].enabled=!e.selected})},l.prototype.removeGroupInitiator=function(l,n,e){var t=l.getValue("members")[n];l.getValue("members").splice(n,1),this.groupMembersSelections[e].forEach(function(l){l.name===t&&(l.selected=!1)}),this.groupMembersSelections[e]=this.groupMembersSelections[e].slice(),this.onGroupMemberSelection({option:new a.a(!1,t,"")})},l.prototype.removeGroupDisk=function(l,n,e){var t=l.getValue("disks")[n];l.getValue("disks").splice(n,1),this.groupDiskSelections[e].forEach(function(l){l.name===t&&(l.selected=!1)}),this.groupDiskSelections[e]=this.groupDiskSelections[e].slice()},l.prototype.submit=function(){var l,n=this,e=u.cloneDeep(this.targetForm.value),t={target_iqn:this.targetForm.getValue("target_iqn"),target_controls:this.targetForm.getValue("target_controls"),acl_enabled:this.targetForm.getValue("acl_enabled"),portals:[],disks:[],clients:[],groups:[]};if(this.cephIscsiConfigVersion>10){var i=this.targetForm.get("auth");i.getValue("user")||i.get("user").setValue(""),i.getValue("password")||i.get("password").setValue(""),i.getValue("mutual_user")||i.get("mutual_user").setValue(""),i.getValue("mutual_password")||i.get("mutual_password").setValue("");var o=this.targetForm.getValue("acl_enabled");t.auth={user:o?"":i.getValue("user"),password:o?"":i.getValue("password"),mutual_user:o?"":i.getValue("mutual_user"),mutual_password:o?"":i.getValue("mutual_password")}}e.disks.forEach(function(l){var e=l.split("/"),u=n.imagesSettings[l].backstore;t.disks.push({pool:e[0],image:e[1],backstore:u,controls:n.imagesSettings[l][u],lun:n.imagesSettings[l].lun,wwn:n.imagesSettings[l].wwn})}),e.portals.forEach(function(l){var n=l.indexOf(":");t.portals.push({host:l.substring(0,n),ip:l.substring(n+1)})}),t.acl_enabled&&(e.initiators.forEach(function(l){l.auth.user||(l.auth.user=""),l.auth.password||(l.auth.password=""),l.auth.mutual_user||(l.auth.mutual_user=""),l.auth.mutual_password||(l.auth.mutual_password=""),delete l.cdIsInGroup;var n=[];l.luns.forEach(function(l){var e=l.split("/");n.push({pool:e[0],image:e[1]})}),l.luns=n}),t.clients=e.initiators),t.acl_enabled&&(e.groups.forEach(function(l){var n=[];l.disks.forEach(function(l){var e=l.split("/");n.push({pool:e[0],image:e[1]})}),l.disks=n}),t.groups=e.groups),this.isEdit?(t.new_target_iqn=t.target_iqn,t.target_iqn=this.target_iqn,l=this.taskWrapper.wrapTaskAroundCall({task:new d.a("iscsi/target/edit",{target_iqn:t.target_iqn}),call:this.iscsiService.updateTarget(this.target_iqn,t)})):l=this.taskWrapper.wrapTaskAroundCall({task:new d.a("iscsi/target/create",{target_iqn:t.target_iqn}),call:this.iscsiService.createTarget(t)}),l.subscribe(void 0,function(){n.targetForm.setErrors({cdSubmitButton:!0})},function(){return n.router.navigate(["/block/iscsi/targets"])})},l.prototype.targetSettingsModal=function(){var l={target_controls:this.targetForm.get("target_controls"),target_default_controls:this.target_default_controls,target_controls_limits:this.target_controls_limits};this.modalRef=this.modalService.show(p.a,{initialState:l})},l.prototype.imageSettingsModal=function(l){var n={imagesSettings:this.imagesSettings,image:l,api_version:this.api_version,disk_default_controls:this.disk_default_controls,disk_controls_limits:this.disk_controls_limits,backstores:this.getValidBackstores(this.getImageById(l)),control:this.targetForm.get("disks")};this.modalRef=this.modalService.show(c.a,{initialState:n})},l.prototype.validFeatures=function(l,n){var e=l.features,t=this.required_rbd_features[n];return(e&t)===t&&0==(e&this.unsupported_rbd_features[n])},l.prototype.getImageById=function(l){return this.imagesAll.find(function(n){return l===n.pool_name+"/"+n.name})},l.prototype.getValidBackstores=function(l){var n=this;return this.backstores.filter(function(e){return n.validFeatures(l,e)})},l}()},jMP8:function(l,n,e){"use strict";e.d(n,"a",function(){return u});var t=e("gIcY"),u=(e("QFaf"),function(){function l(){}return l.prototype.ngOnInit=function(){var l=[];"min"in this.limits&&l.push(t.A.min(this.limits.min)),"max"in this.limits&&l.push(t.A.max(this.limits.max)),this.settingsForm.get(this.setting).setValidators(l)},l}())},"k/xb":function(l,n,e){"use strict";e.d(n,"a",function(){return u}),e.d(n,"b",function(){return v}),e.d(n,"c",function(){return i}),e.d(n,"d",function(){return o}),e.d(n,"g",function(){return a}),e.d(n,"h",function(){return r}),e.d(n,"i",function(){return s}),e.d(n,"j",function(){return d}),e.d(n,"k",function(){return c}),e.d(n,"l",function(){return p}),e.d(n,"m",function(){return m}),e.d(n,"n",function(){return f}),e.d(n,"e",function(){return g}),e.d(n,"f",function(){return h});var t=e("sne2"),u=(e("Vhfg"),e("gr3l"),e("e/kN"),e("roDX"),e("cxJu"),e("MyVl"),e("wG1H"),function(){return function(){}}()),i={breadcrumbs:"Images"},o={breadcrumbs:t.a.CREATE},a={breadcrumbs:t.a.EDIT},r={breadcrumbs:t.a.CLONE},s={breadcrumbs:t.a.COPY},d={breadcrumbs:t.a.COPY},c={breadcrumbs:"Mirroring"},p={breadcrumbs:"iSCSI"},m={breadcrumbs:"Overview"},f={breadcrumbs:"Targets"},g={breadcrumbs:t.a.CREATE},h={breadcrumbs:t.a.EDIT},v=function(){return function(){}}()},kccj:function(l,n,e){"use strict";e.d(n,"a",function(){return t});var t=function(){return function(){}}()},l7Jr:function(l,n,e){"use strict";var t=e("CcnG"),u=e("Ip0R"),i=e("eF8U"),o=e("jMP8"),a=e("EEJc"),r=e("ajRT"),s=e("gIcY"),d=e("gp3X"),c=e("sb0X"),p=e("KVJa"),m=e("Z21x"),f=e("sne2"),g=e("a6qe"),h=e("DQlY"),v=e("my5R");e.d(n,"a",function(){return w});var b=t["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function y(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,5,"div",[["class","form-group row"]],null,null,null,null,null)),t["\u0275did"](1,278528,null,0,u.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](2,{"has-error":0}),(l()(),t["\u0275eld"](3,0,null,null,2,"div",[["class","col-sm-12"]],null,null,null,null,null)),(l()(),t["\u0275eld"](4,0,null,null,1,"cd-iscsi-setting",[],null,null,null,i.b,i.a)),t["\u0275did"](5,114688,null,0,o.a,[],{settingsForm:[0,"settingsForm"],formDir:[1,"formDir"],setting:[2,"setting"],limits:[3,"limits"]},null)],function(l,n){var e=n.component,u=l(n,2,0,e.settingsForm.showError(n.context.$implicit.key,t["\u0275nov"](n.parent,7)));l(n,1,0,"form-group row",u),l(n,5,0,e.settingsForm,t["\u0275nov"](n.parent,7),n.context.$implicit.key,e.getTargetControlLimits(n.context.$implicit.key))},null)}function C(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,22,"cd-modal",[],null,null,null,a.c,a.b)),t["\u0275did"](1,49152,null,0,r.a,[],{modalRef:[0,"modalRef"]},null),(l()(),t["\u0275eld"](2,0,null,0,1,null,null,null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Advanced Settings"])),(l()(),t["\u0275eld"](4,0,null,1,18,null,null,null,null,null,null,null)),(l()(),t["\u0275eld"](5,0,null,null,17,"form",[["class","form"],["name","settingsForm"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,e){var u=!0;return"submit"===n&&(u=!1!==t["\u0275nov"](l,7).onSubmit(e)&&u),"reset"===n&&(u=!1!==t["\u0275nov"](l,7).onReset()&&u),u},null,null)),t["\u0275did"](6,16384,null,0,s.D,[],null,null),t["\u0275did"](7,540672,[["formDir",4]],0,s.l,[[8,null],[8,null]],{form:[0,"form"]},null),t["\u0275prd"](2048,null,s.d,null,[s.l]),t["\u0275did"](9,16384,null,0,s.s,[[4,s.d]],null,null),(l()(),t["\u0275eld"](10,0,null,null,5,"div",[["class","modal-body"]],null,null,null,null,null)),(l()(),t["\u0275eld"](11,0,null,null,1,"p",[["class","alert-warning"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Changing these parameters from their default values is usually not necessary."])),(l()(),t["\u0275and"](16777216,null,null,2,null,y)),t["\u0275did"](14,278528,null,0,u.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),t["\u0275pid"](0,u.KeyValuePipe,[t.KeyValueDiffers]),(l()(),t["\u0275eld"](16,0,null,null,6,"div",[["class","modal-footer"]],null,null,null,null,null)),(l()(),t["\u0275eld"](17,0,null,null,5,"div",[["class","button-group text-right"]],null,null,null,null,null)),(l()(),t["\u0275eld"](18,0,null,null,2,"cd-submit-button",[],null,[[null,"submitAction"]],function(l,n,e){var t=!0;return"submitAction"===n&&(t=!1!==l.component.save()&&t),t},d.b,d.a)),t["\u0275did"](19,114688,null,0,c.a,[t.ElementRef],{form:[0,"form"]},{submitAction:"submitAction"}),(l()(),t["\u0275ted"](-1,0,["Confirm"])),(l()(),t["\u0275eld"](21,0,null,null,1,"cd-back-button",[["name","Cancel"]],null,null,null,p.b,p.a)),t["\u0275did"](22,49152,null,0,m.a,[u.Location,f.b],{name:[0,"name"],back:[1,"back"]},null)],function(l,n){var e=n.component;l(n,1,0,e.modalRef),l(n,7,0,e.settingsForm),l(n,14,0,t["\u0275unv"](n,14,0,t["\u0275nov"](n,15).transform(e.settingsForm.controls))),l(n,19,0,e.settingsForm),l(n,22,0,"Cancel",e.modalRef.hide)},function(l,n){l(n,5,0,t["\u0275nov"](n,9).ngClassUntouched,t["\u0275nov"](n,9).ngClassTouched,t["\u0275nov"](n,9).ngClassPristine,t["\u0275nov"](n,9).ngClassDirty,t["\u0275nov"](n,9).ngClassValid,t["\u0275nov"](n,9).ngClassInvalid,t["\u0275nov"](n,9).ngClassPending)})}function _(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"cd-iscsi-target-iqn-settings-modal",[],null,null,null,C,b)),t["\u0275did"](1,114688,null,0,g.a,[h.a,v.a],null,null)],function(l,n){l(n,1,0)},null)}var w=t["\u0275ccf"]("cd-iscsi-target-iqn-settings-modal",g.a,_,{},{},[])},"lz+O":function(l,n,e){"use strict";var t=e("CcnG"),u=e("gIcY"),i=e("ANnk"),o=e("f/UV"),a=e("aexS"),r=e("Ip0R"),s=e("EEJc"),d=e("ajRT"),c=e("gp3X"),p=e("sb0X"),m=e("KVJa"),f=e("Z21x"),g=e("sne2"),h=e("WxU5"),v=e("F83c"),b=e("DQlY"),y=e("2EZI"),C=e("Ekvf"),_=e("kn/O");e.d(n,"a",function(){return F});var w=t["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function R(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,6,"input",[["class","form-control"],["formControlName","poolName"],["placeholder","Pool name..."],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,e){var u=!0;return"input"===n&&(u=!1!==t["\u0275nov"](l,1)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,1).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,1)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,1)._compositionEnd(e.target.value)&&u),u},null,null)),t["\u0275did"](1,16384,null,0,u.e,[t.Renderer2,t.ElementRef,[2,u.b]],null,null),t["\u0275prd"](1024,null,u.p,function(l){return[l]},[u.e]),t["\u0275did"](3,671744,null,0,u.j,[[3,u.d],[8,null],[8,null],[6,u.p],[2,u.F]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,u.q,null,[u.j]),t["\u0275did"](5,16384,null,0,u.r,[[4,u.q]],null,null),t["\u0275did"](6,4210688,null,0,i.a,[[2,o.a],a.a,t.ElementRef],null,null)],function(l,n){l(n,3,0,"poolName")},function(l,n){l(n,0,0,t["\u0275nov"](n,5).ngClassUntouched,t["\u0275nov"](n,5).ngClassTouched,t["\u0275nov"](n,5).ngClassPristine,t["\u0275nov"](n,5).ngClassDirty,t["\u0275nov"](n,5).ngClassValid,t["\u0275nov"](n,5).ngClassInvalid,t["\u0275nov"](n,5).ngClassPending)})}function I(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,3,"option",[],null,null,null,null,null)),t["\u0275did"](1,147456,null,0,u.v,[t.ElementRef,t.Renderer2,[2,u.z]],{value:[0,"value"]},null),t["\u0275did"](2,147456,null,0,u.G,[t.ElementRef,t.Renderer2,[8,null]],{value:[0,"value"]},null),(l()(),t["\u0275ted"](3,null,["",""]))],function(l,n){l(n,1,0,n.context.$implicit),l(n,2,0,n.context.$implicit)},function(l,n){l(n,3,0,n.context.$implicit)})}function S(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,12,"select",[["class","form-control"],["formControlName","poolName"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(l,n,e){var u=!0;return"change"===n&&(u=!1!==t["\u0275nov"](l,1).onChange(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,1).onTouched()&&u),u},null,null)),t["\u0275did"](1,16384,null,0,u.z,[t.Renderer2,t.ElementRef],null,null),t["\u0275prd"](1024,null,u.p,function(l){return[l]},[u.z]),t["\u0275did"](3,671744,null,0,u.j,[[3,u.d],[8,null],[8,null],[6,u.p],[2,u.F]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,u.q,null,[u.j]),t["\u0275did"](5,16384,null,0,u.r,[[4,u.q]],null,null),t["\u0275did"](6,4210688,null,0,i.a,[[2,o.a],a.a,t.ElementRef],null,null),(l()(),t["\u0275eld"](7,0,null,null,3,"option",[["value",""]],null,null,null,null,null)),t["\u0275did"](8,147456,null,0,u.v,[t.ElementRef,t.Renderer2,[2,u.z]],{value:[0,"value"]},null),t["\u0275did"](9,147456,null,0,u.G,[t.ElementRef,t.Renderer2,[8,null]],{value:[0,"value"]},null),(l()(),t["\u0275ted"](-1,null,["All"])),(l()(),t["\u0275and"](16777216,null,null,1,null,I)),t["\u0275did"](12,278528,null,0,r.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(l,n){var e=n.component;l(n,3,0,"poolName"),l(n,8,0,""),l(n,9,0,""),l(n,12,0,e.pools)},function(l,n){l(n,0,0,t["\u0275nov"](n,5).ngClassUntouched,t["\u0275nov"](n,5).ngClassTouched,t["\u0275nov"](n,5).ngClassPristine,t["\u0275nov"](n,5).ngClassDirty,t["\u0275nov"](n,5).ngClassValid,t["\u0275nov"](n,5).ngClassInvalid,t["\u0275nov"](n,5).ngClassPending)})}function k(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,37,"cd-modal",[],null,null,null,s.c,s.b)),t["\u0275did"](1,49152,null,0,d.a,[],{modalRef:[0,"modalRef"]},null),(l()(),t["\u0275eld"](2,0,null,0,1,null,null,null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Purge Trash"])),(l()(),t["\u0275eld"](4,0,null,1,33,null,null,null,null,null,null,null)),(l()(),t["\u0275eld"](5,0,null,null,32,"form",[["class","form"],["name","purgeForm"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,e){var u=!0;return"submit"===n&&(u=!1!==t["\u0275nov"](l,7).onSubmit(e)&&u),"reset"===n&&(u=!1!==t["\u0275nov"](l,7).onReset()&&u),u},null,null)),t["\u0275did"](6,16384,null,0,u.D,[],null,null),t["\u0275did"](7,540672,[["formDir",4]],0,u.l,[[8,null],[8,null]],{form:[0,"form"]},null),t["\u0275prd"](2048,null,u.d,null,[u.l]),t["\u0275did"](9,16384,null,0,u.s,[[4,u.d]],null,null),(l()(),t["\u0275eld"](10,0,null,null,20,"div",[["class","modal-body"]],null,null,null,null,null)),(l()(),t["\u0275eld"](11,0,null,null,12,"p",[],null,null,null,null,null)),(l()(),t["\u0275eld"](12,0,null,null,1,null,null,null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["To purge, select one or"])),(l()(),t["\u0275ted"](-1,null,["\xa0 "])),(l()(),t["\u0275eld"](15,0,null,null,1,"kbd",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["All"])),(l()(),t["\u0275ted"](-1,null,["\xa0 "])),(l()(),t["\u0275eld"](18,0,null,null,1,null,null,null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["pools and click"])),(l()(),t["\u0275ted"](-1,null,["\xa0 "])),(l()(),t["\u0275eld"](21,0,null,null,1,"kbd",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Purge Trash"])),(l()(),t["\u0275ted"](-1,null,[".\xa0 "])),(l()(),t["\u0275eld"](24,0,null,null,6,"div",[["class","form-group"]],null,null,null,null,null)),(l()(),t["\u0275eld"](25,0,null,null,1,"label",[["class","center-block"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Pool:"])),(l()(),t["\u0275and"](16777216,null,null,1,null,R)),t["\u0275did"](28,16384,null,0,r.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,S)),t["\u0275did"](30,16384,null,0,r.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](31,0,null,null,6,"div",[["class","modal-footer"]],null,null,null,null,null)),(l()(),t["\u0275eld"](32,0,null,null,5,"div",[["class","button-group text-right"]],null,null,null,null,null)),(l()(),t["\u0275eld"](33,0,null,null,2,"cd-submit-button",[],null,[[null,"submitAction"]],function(l,n,e){var t=!0;return"submitAction"===n&&(t=!1!==l.component.purge()&&t),t},c.b,c.a)),t["\u0275did"](34,114688,null,0,p.a,[t.ElementRef],{form:[0,"form"]},{submitAction:"submitAction"}),(l()(),t["\u0275ted"](-1,0,["Purge Trash"])),(l()(),t["\u0275eld"](36,0,null,null,1,"cd-back-button",[["name","Cancel"]],null,null,null,m.b,m.a)),t["\u0275did"](37,49152,null,0,f.a,[r.Location,g.b],{name:[0,"name"],back:[1,"back"]},null)],function(l,n){var e=n.component;l(n,1,0,e.modalRef),l(n,7,0,e.purgeForm),l(n,28,0,!e.poolPermission.read),l(n,30,0,e.poolPermission.read),l(n,34,0,e.purgeForm),l(n,37,0,"Cancel",e.modalRef.hide)},function(l,n){l(n,5,0,t["\u0275nov"](n,9).ngClassUntouched,t["\u0275nov"](n,9).ngClassTouched,t["\u0275nov"](n,9).ngClassPristine,t["\u0275nov"](n,9).ngClassDirty,t["\u0275nov"](n,9).ngClassValid,t["\u0275nov"](n,9).ngClassInvalid,t["\u0275nov"](n,9).ngClassPending)})}function E(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"cd-rbd-trash-purge-modal",[],null,null,null,k,w)),t["\u0275did"](1,114688,null,0,h.a,[a.a,v.a,b.a,y.a,C.a,_.a],null,null)],function(l,n){l(n,1,0)},null)}var F=t["\u0275ccf"]("cd-rbd-trash-purge-modal",h.a,E,{},{},[])},my5R:function(l,n,e){"use strict";e.d(n,"a",function(){return r});var t=e("mrSG"),u=e("t/Na"),i=e("xTzq"),o=e("CcnG"),a=e("pL04"),r=function(){function l(l){this.http=l}return l.prototype.listTargets=function(){return this.http.get("api/iscsi/target")},l.prototype.getTarget=function(l){return this.http.get("api/iscsi/target/"+l)},l.prototype.updateTarget=function(l,n){return this.http.put("api/iscsi/target/"+l,n,{observe:"response"})},l.prototype.status=function(){return this.http.get("ui-api/iscsi/status")},l.prototype.settings=function(){return this.http.get("ui-api/iscsi/settings")},l.prototype.version=function(){return this.http.get("ui-api/iscsi/version")},l.prototype.portals=function(){return this.http.get("ui-api/iscsi/portals")},l.prototype.createTarget=function(l){return this.http.post("api/iscsi/target",l,{observe:"response"})},l.prototype.deleteTarget=function(l){return this.http.delete("api/iscsi/target/"+l,{observe:"response"})},l.prototype.getDiscovery=function(){return this.http.get("api/iscsi/discoveryauth")},l.prototype.updateDiscovery=function(l){return this.http.put("api/iscsi/discoveryauth",l)},l.prototype.overview=function(){return this.http.get("ui-api/iscsi/overview")},l.ngInjectableDef=o.defineInjectable({factory:function(){return new l(o.inject(u.c))},token:l,providedIn:a.a}),l=t.__decorate([i.a,t.__metadata("design:paramtypes",[u.c])],l)}()},nP0W:function(l,n,e){"use strict";var t=e("CcnG"),u=e("gIcY"),i=e("EEJc"),o=e("ajRT"),a=e("Ip0R"),r=e("ANnk"),s=e("f/UV"),d=e("aexS"),c=e("gp3X"),p=e("sb0X"),m=e("KVJa"),f=e("Z21x"),g=e("sne2"),h=e("aa9H"),v=e("DQlY"),b=e("Jm/i"),y=e("XED3"),C=e("kn/O");e.d(n,"a",function(){return k});var _=t["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function w(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,3,"option",[],null,null,null,null,null)),t["\u0275did"](1,147456,null,0,u.v,[t.ElementRef,t.Renderer2,[2,u.z]],{value:[0,"value"]},null),t["\u0275did"](2,147456,null,0,u.G,[t.ElementRef,t.Renderer2,[8,null]],{value:[0,"value"]},null),(l()(),t["\u0275ted"](3,null,["",""]))],function(l,n){l(n,1,0,n.context.$implicit.id),l(n,2,0,n.context.$implicit.id)},function(l,n){l(n,3,0,n.context.$implicit.name)})}function R(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"span",[["class","help-block"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Peer clusters must be removed prior to disabling mirror."]))],null,null)}function I(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,43,"cd-modal",[],null,null,null,i.c,i.b)),t["\u0275did"](1,49152,null,0,o.a,[],{modalRef:[0,"modalRef"]},null),(l()(),t["\u0275eld"](2,0,null,0,1,null,null,null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Edit pool mirror mode"])),(l()(),t["\u0275eld"](4,0,null,1,39,null,null,null,null,null,null,null)),(l()(),t["\u0275eld"](5,0,null,null,38,"form",[["class","form"],["name","editModeForm"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,e){var u=!0;return"submit"===n&&(u=!1!==t["\u0275nov"](l,7).onSubmit(e)&&u),"reset"===n&&(u=!1!==t["\u0275nov"](l,7).onReset()&&u),u},null,null)),t["\u0275did"](6,16384,null,0,u.D,[],null,null),t["\u0275did"](7,540672,[["formDir",4]],0,u.l,[[8,null],[8,null]],{form:[0,"form"]},null),t["\u0275prd"](2048,null,u.d,null,[u.l]),t["\u0275did"](9,16384,null,0,u.s,[[4,u.d]],null,null),(l()(),t["\u0275eld"](10,0,null,null,26,"div",[["class","modal-body"]],null,null,null,null,null)),(l()(),t["\u0275eld"](11,0,null,null,8,"p",[],null,null,null,null,null)),(l()(),t["\u0275eld"](12,0,null,null,7,null,null,null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["To edit the mirror mode for pool\xa0 "])),(l()(),t["\u0275eld"](14,0,null,null,1,"kbd",[],null,null,null,null,null)),(l()(),t["\u0275ted"](15,null,["",""])),(l()(),t["\u0275ted"](-1,null,[", select a new mode from the list and click\xa0 "])),(l()(),t["\u0275eld"](17,0,null,null,1,"kbd",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Update"])),(l()(),t["\u0275ted"](-1,null,["."])),(l()(),t["\u0275eld"](20,0,null,null,16,"div",[["class","form-group"]],null,null,null,null,null)),t["\u0275did"](21,278528,null,0,a.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](22,{"has-error":0}),(l()(),t["\u0275eld"](23,0,null,null,2,"label",[["class","control-label"],["for","mirrorMode"]],null,null,null,null,null)),(l()(),t["\u0275eld"](24,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Mode"])),(l()(),t["\u0275eld"](26,0,null,null,8,"select",[["class","form-control"],["formControlName","mirrorMode"],["id","mirrorMode"],["name","mirrorMode"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(l,n,e){var u=!0;return"change"===n&&(u=!1!==t["\u0275nov"](l,28).onChange(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,28).onTouched()&&u),u},null,null)),t["\u0275did"](27,4210688,null,0,r.a,[[2,s.a],d.a,t.ElementRef],null,null),t["\u0275did"](28,16384,null,0,u.z,[t.Renderer2,t.ElementRef],null,null),t["\u0275prd"](1024,null,u.p,function(l){return[l]},[u.z]),t["\u0275did"](30,671744,null,0,u.j,[[3,u.d],[8,null],[8,null],[6,u.p],[2,u.F]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,u.q,null,[u.j]),t["\u0275did"](32,16384,null,0,u.r,[[4,u.q]],null,null),(l()(),t["\u0275and"](16777216,null,null,1,null,w)),t["\u0275did"](34,278528,null,0,a.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,R)),t["\u0275did"](36,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](37,0,null,null,6,"div",[["class","modal-footer"]],null,null,null,null,null)),(l()(),t["\u0275eld"](38,0,null,null,5,"div",[["class","button-group text-right"]],null,null,null,null,null)),(l()(),t["\u0275eld"](39,0,null,null,2,"cd-submit-button",[],null,[[null,"submitAction"]],function(l,n,e){var t=!0;return"submitAction"===n&&(t=!1!==l.component.update()&&t),t},c.b,c.a)),t["\u0275did"](40,114688,null,0,p.a,[t.ElementRef],{form:[0,"form"]},{submitAction:"submitAction"}),(l()(),t["\u0275ted"](-1,0,["Update"])),(l()(),t["\u0275eld"](42,0,null,null,1,"cd-back-button",[["name","Cancel"]],null,null,null,m.b,m.a)),t["\u0275did"](43,49152,null,0,f.a,[a.Location,g.b],{name:[0,"name"],back:[1,"back"]},null)],function(l,n){var e=n.component;l(n,1,0,e.modalRef),l(n,7,0,e.editModeForm);var u=l(n,22,0,e.editModeForm.showError("mirrorMode",t["\u0275nov"](n,7)));l(n,21,0,"form-group",u),l(n,30,0,"mirrorMode"),l(n,34,0,e.mirrorModes),l(n,36,0,e.editModeForm.showError("mirrorMode",t["\u0275nov"](n,7),"cannotDisable")),l(n,40,0,e.editModeForm),l(n,43,0,"Cancel",e.modalRef.hide)},function(l,n){var e=n.component;l(n,5,0,t["\u0275nov"](n,9).ngClassUntouched,t["\u0275nov"](n,9).ngClassTouched,t["\u0275nov"](n,9).ngClassPristine,t["\u0275nov"](n,9).ngClassDirty,t["\u0275nov"](n,9).ngClassValid,t["\u0275nov"](n,9).ngClassInvalid,t["\u0275nov"](n,9).ngClassPending),l(n,15,0,e.poolName),l(n,26,0,t["\u0275nov"](n,32).ngClassUntouched,t["\u0275nov"](n,32).ngClassTouched,t["\u0275nov"](n,32).ngClassPristine,t["\u0275nov"](n,32).ngClassDirty,t["\u0275nov"](n,32).ngClassValid,t["\u0275nov"](n,32).ngClassInvalid,t["\u0275nov"](n,32).ngClassPending)})}function S(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"cd-pool-edit-mode-modal",[],null,null,null,I,_)),t["\u0275did"](1,245760,null,0,h.a,[v.a,b.a,y.a,C.a],null,null)],function(l,n){l(n,1,0)},null)}var k=t["\u0275ccf"]("cd-pool-edit-mode-modal",h.a,S,{},{},[])},nhAp:function(l,n,e){"use strict";var t=e("CcnG"),u=e("gIcY"),i=e("ANnk"),o=e("f/UV"),a=e("aexS"),r=e("Ip0R"),s=e("eF8U"),d=e("jMP8"),c=e("uYzU"),p=e("EEJc"),m=e("ajRT"),f=e("gp3X"),g=e("sb0X"),h=e("KVJa"),v=e("Z21x"),b=e("sne2"),y=e("Z4cD"),C=e("DQlY"),_=e("my5R");e.d(n,"a",function(){return T});var w=t["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function R(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"span",[["class","invalid-feedback"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["This field is required."]))],null,null)}function I(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,29,"span",[],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,1,"legend",[["class","cd-header"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Identifier"])),(l()(),t["\u0275eld"](3,0,null,null,15,"div",[["class","form-group row"]],null,null,null,null,null)),(l()(),t["\u0275eld"](4,0,null,null,14,"div",[["class","col-sm-12"]],null,null,null,null,null)),(l()(),t["\u0275eld"](5,0,null,null,3,"label",[["class","col-form-label"],["for","lun"]],null,null,null,null,null)),(l()(),t["\u0275eld"](6,0,null,null,1,null,null,null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["lun"])),(l()(),t["\u0275eld"](8,0,null,null,0,"span",[["class","required"]],null,null,null,null,null)),(l()(),t["\u0275eld"](9,0,null,null,7,"input",[["class","form-control"],["formControlName","lun"],["id","lun"],["name","lun"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(l,n,e){var u=!0;return"input"===n&&(u=!1!==t["\u0275nov"](l,10)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,10).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,10)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,10)._compositionEnd(e.target.value)&&u),"change"===n&&(u=!1!==t["\u0275nov"](l,11).onChange(e.target.value)&&u),"input"===n&&(u=!1!==t["\u0275nov"](l,11).onChange(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,11).onTouched()&&u),u},null,null)),t["\u0275did"](10,16384,null,0,u.e,[t.Renderer2,t.ElementRef,[2,u.b]],null,null),t["\u0275did"](11,16384,null,0,u.C,[t.Renderer2,t.ElementRef],null,null),t["\u0275prd"](1024,null,u.p,function(l,n){return[l,n]},[u.e,u.C]),t["\u0275did"](13,671744,null,0,u.j,[[3,u.d],[8,null],[8,null],[6,u.p],[2,u.F]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,u.q,null,[u.j]),t["\u0275did"](15,16384,null,0,u.r,[[4,u.q]],null,null),t["\u0275did"](16,4210688,null,0,i.a,[[2,o.a],a.a,t.ElementRef],null,null),(l()(),t["\u0275and"](16777216,null,null,1,null,R)),t["\u0275did"](18,16384,null,0,r.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](19,0,null,null,10,"div",[["class","form-group row"]],null,null,null,null,null)),(l()(),t["\u0275eld"](20,0,null,null,9,"div",[["class","col-sm-12"]],null,null,null,null,null)),(l()(),t["\u0275eld"](21,0,null,null,1,"label",[["class","col-form-label"],["for","wwn"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["wwn"])),(l()(),t["\u0275eld"](23,0,null,null,6,"input",[["class","form-control"],["formControlName","wwn"],["id","wwn"],["name","wwn"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,e){var u=!0;return"input"===n&&(u=!1!==t["\u0275nov"](l,24)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,24).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,24)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,24)._compositionEnd(e.target.value)&&u),u},null,null)),t["\u0275did"](24,16384,null,0,u.e,[t.Renderer2,t.ElementRef,[2,u.b]],null,null),t["\u0275prd"](1024,null,u.p,function(l){return[l]},[u.e]),t["\u0275did"](26,671744,null,0,u.j,[[3,u.d],[8,null],[8,null],[6,u.p],[2,u.F]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,u.q,null,[u.j]),t["\u0275did"](28,16384,null,0,u.r,[[4,u.q]],null,null),t["\u0275did"](29,4210688,null,0,i.a,[[2,o.a],a.a,t.ElementRef],null,null)],function(l,n){var e=n.component;l(n,13,0,"lun"),l(n,18,0,e.settingsForm.showError("lun",t["\u0275nov"](n.parent,12),"required")),l(n,26,0,"wwn")},function(l,n){l(n,9,0,t["\u0275nov"](n,15).ngClassUntouched,t["\u0275nov"](n,15).ngClassTouched,t["\u0275nov"](n,15).ngClassPristine,t["\u0275nov"](n,15).ngClassDirty,t["\u0275nov"](n,15).ngClassValid,t["\u0275nov"](n,15).ngClassInvalid,t["\u0275nov"](n,15).ngClassPending),l(n,23,0,t["\u0275nov"](n,28).ngClassUntouched,t["\u0275nov"](n,28).ngClassTouched,t["\u0275nov"](n,28).ngClassPristine,t["\u0275nov"](n,28).ngClassDirty,t["\u0275nov"](n,28).ngClassValid,t["\u0275nov"](n,28).ngClassInvalid,t["\u0275nov"](n,28).ngClassPending)})}function S(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,4,"option",[],null,null,null,null,null)),t["\u0275did"](1,147456,null,0,u.v,[t.ElementRef,t.Renderer2,[2,u.z]],{value:[0,"value"]},null),t["\u0275did"](2,147456,null,0,u.G,[t.ElementRef,t.Renderer2,[8,null]],{value:[0,"value"]},null),(l()(),t["\u0275ted"](3,null,["",""])),t["\u0275ppd"](4,1)],function(l,n){l(n,1,0,n.context.$implicit),l(n,2,0,n.context.$implicit)},function(l,n){var e=t["\u0275unv"](n,3,0,l(n,4,0,t["\u0275nov"](n.parent,0),n.context.$implicit));l(n,3,0,e)})}function k(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,5,"div",[["class","form-group row"]],null,null,null,null,null)),t["\u0275did"](1,278528,null,0,r.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](2,{"has-error":0}),(l()(),t["\u0275eld"](3,0,null,null,2,"div",[["class","col-sm-12"]],null,null,null,null,null)),(l()(),t["\u0275eld"](4,0,null,null,1,"cd-iscsi-setting",[],null,null,null,s.b,s.a)),t["\u0275did"](5,114688,null,0,d.a,[],{settingsForm:[0,"settingsForm"],formDir:[1,"formDir"],setting:[2,"setting"],limits:[3,"limits"]},null)],function(l,n){var e=n.component,u=l(n,2,0,e.settingsForm.showError(n.context.$implicit.key,t["\u0275nov"](n.parent.parent.parent,12)));l(n,1,0,"form-group row",u),l(n,5,0,e.settingsForm,t["\u0275nov"](n.parent.parent.parent,12),n.context.$implicit.key,e.getDiskControlLimits(n.parent.parent.context.$implicit,n.context.$implicit.key))},null)}function E(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,3,null,null,null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,2,null,k)),t["\u0275did"](2,278528,null,0,r.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),t["\u0275pid"](0,r.KeyValuePipe,[t.KeyValueDiffers]),(l()(),t["\u0275and"](0,null,null,0))],function(l,n){var e=n.component;l(n,2,0,t["\u0275unv"](n,2,0,t["\u0275nov"](n,3).transform(e.disk_default_controls[n.parent.context.$implicit])))},null)}function F(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,E)),t["\u0275did"](2,16384,null,0,r.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](0,null,null,0))],function(l,n){l(n,2,0,n.component.settingsForm.value.backstore===n.context.$implicit)},null)}function D(l){return t["\u0275vid"](0,[t["\u0275pid"](0,c.a,[]),(l()(),t["\u0275eld"](1,0,null,null,42,"cd-modal",[],null,null,null,p.c,p.b)),t["\u0275did"](2,49152,null,0,m.a,[],{modalRef:[0,"modalRef"]},null),(l()(),t["\u0275eld"](3,0,null,0,5,null,null,null,null,null,null,null)),(l()(),t["\u0275eld"](4,0,null,null,1,null,null,null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Configure"])),(l()(),t["\u0275ted"](-1,null,["\xa0 "])),(l()(),t["\u0275eld"](7,0,null,null,1,"small",[],null,null,null,null,null)),(l()(),t["\u0275ted"](8,null,["",""])),(l()(),t["\u0275eld"](9,0,null,1,34,null,null,null,null,null,null,null)),(l()(),t["\u0275eld"](10,0,null,null,33,"form",[["class","form"],["name","settingsForm"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,e){var u=!0;return"submit"===n&&(u=!1!==t["\u0275nov"](l,12).onSubmit(e)&&u),"reset"===n&&(u=!1!==t["\u0275nov"](l,12).onReset()&&u),u},null,null)),t["\u0275did"](11,16384,null,0,u.D,[],null,null),t["\u0275did"](12,540672,[["formDir",4]],0,u.l,[[8,null],[8,null]],{form:[0,"form"]},null),t["\u0275prd"](2048,null,u.d,null,[u.l]),t["\u0275did"](14,16384,null,0,u.s,[[4,u.d]],null,null),(l()(),t["\u0275eld"](15,0,null,null,21,"div",[["class","modal-body"]],null,null,null,null,null)),(l()(),t["\u0275eld"](16,0,null,null,1,"p",[["class","alert-warning"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Changing these parameters from their default values is usually not necessary."])),(l()(),t["\u0275and"](16777216,null,null,1,null,I)),t["\u0275did"](19,16384,null,0,r.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](20,0,null,null,1,"legend",[["class","cd-header"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Settings"])),(l()(),t["\u0275eld"](22,0,null,null,12,"div",[["class","form-group row"]],null,null,null,null,null)),(l()(),t["\u0275eld"](23,0,null,null,11,"div",[["class","col-sm-12"]],null,null,null,null,null)),(l()(),t["\u0275eld"](24,0,null,null,1,"label",[["class","control-label"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Backstore"])),(l()(),t["\u0275eld"](26,0,null,null,8,"select",[["class","form-control"],["formControlName","backstore"],["id","backstore"],["name","backstore"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(l,n,e){var u=!0;return"change"===n&&(u=!1!==t["\u0275nov"](l,27).onChange(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,27).onTouched()&&u),u},null,null)),t["\u0275did"](27,16384,null,0,u.z,[t.Renderer2,t.ElementRef],null,null),t["\u0275prd"](1024,null,u.p,function(l){return[l]},[u.z]),t["\u0275did"](29,671744,null,0,u.j,[[3,u.d],[8,null],[8,null],[6,u.p],[2,u.F]],{name:[0,"name"]},null),t["\u0275prd"](2048,null,u.q,null,[u.j]),t["\u0275did"](31,16384,null,0,u.r,[[4,u.q]],null,null),t["\u0275did"](32,4210688,null,0,i.a,[[2,o.a],a.a,t.ElementRef],null,null),(l()(),t["\u0275and"](16777216,null,null,1,null,S)),t["\u0275did"](34,278528,null,0,r.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,F)),t["\u0275did"](36,278528,null,0,r.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(l()(),t["\u0275eld"](37,0,null,null,6,"div",[["class","modal-footer"]],null,null,null,null,null)),(l()(),t["\u0275eld"](38,0,null,null,5,"div",[["class","button-group text-right"]],null,null,null,null,null)),(l()(),t["\u0275eld"](39,0,null,null,2,"cd-submit-button",[],null,[[null,"submitAction"]],function(l,n,e){var t=!0;return"submitAction"===n&&(t=!1!==l.component.save()&&t),t},f.b,f.a)),t["\u0275did"](40,114688,null,0,g.a,[t.ElementRef],{form:[0,"form"]},{submitAction:"submitAction"}),(l()(),t["\u0275ted"](-1,0,["Confirm"])),(l()(),t["\u0275eld"](42,0,null,null,1,"cd-back-button",[["name","Cancel"]],null,null,null,h.b,h.a)),t["\u0275did"](43,49152,null,0,v.a,[r.Location,b.b],{name:[0,"name"],back:[1,"back"]},null)],function(l,n){var e=n.component;l(n,2,0,e.modalRef),l(n,12,0,e.settingsForm),l(n,19,0,e.api_version>=1),l(n,29,0,"backstore"),l(n,34,0,e.backstores),l(n,36,0,e.backstores),l(n,40,0,e.settingsForm),l(n,43,0,"Cancel",e.modalRef.hide)},function(l,n){l(n,8,0,n.component.image),l(n,10,0,t["\u0275nov"](n,14).ngClassUntouched,t["\u0275nov"](n,14).ngClassTouched,t["\u0275nov"](n,14).ngClassPristine,t["\u0275nov"](n,14).ngClassDirty,t["\u0275nov"](n,14).ngClassValid,t["\u0275nov"](n,14).ngClassInvalid,t["\u0275nov"](n,14).ngClassPending),l(n,26,0,t["\u0275nov"](n,31).ngClassUntouched,t["\u0275nov"](n,31).ngClassTouched,t["\u0275nov"](n,31).ngClassPristine,t["\u0275nov"](n,31).ngClassDirty,t["\u0275nov"](n,31).ngClassValid,t["\u0275nov"](n,31).ngClassInvalid,t["\u0275nov"](n,31).ngClassPending)})}function V(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"cd-iscsi-target-image-settings-modal",[],null,null,null,D,w)),t["\u0275did"](1,114688,null,0,y.a,[C.a,_.a],null,null)],function(l,n){l(n,1,0)},null)}var T=t["\u0275ccf"]("cd-iscsi-target-image-settings-modal",y.a,V,{},{},[])},o8EM:function(l,n,e){"use strict";e.d(n,"a",function(){return o});var t=e("PhyI"),u=e("CcnG"),i=e("Jm/i"),o=function(){function l(l){this.i18n=l,this.sections=[{heading:this.i18n("Quality of Service"),class:"quality-of-service",options:[{name:"rbd_qos_bps_limit",displayName:this.i18n("BPS Limit"),description:this.i18n("The desired limit of IO bytes per second."),type:t.b.bps},{name:"rbd_qos_iops_limit",displayName:this.i18n("IOPS Limit"),description:this.i18n("The desired limit of IO operations per second."),type:t.b.iops},{name:"rbd_qos_read_bps_limit",displayName:this.i18n("Read BPS Limit"),description:this.i18n("The desired limit of read bytes per second."),type:t.b.bps},{name:"rbd_qos_read_iops_limit",displayName:this.i18n("Read IOPS Limit"),description:this.i18n("The desired limit of read operations per second."),type:t.b.iops},{name:"rbd_qos_write_bps_limit",displayName:this.i18n("Write BPS Limit"),description:this.i18n("The desired limit of write bytes per second."),type:t.b.bps},{name:"rbd_qos_write_iops_limit",displayName:this.i18n("Write IOPS Limit"),description:this.i18n("The desired limit of write operations per second."),type:t.b.iops},{name:"rbd_qos_bps_burst",displayName:this.i18n("BPS Burst"),description:this.i18n("The desired burst limit of IO bytes."),type:t.b.bps},{name:"rbd_qos_iops_burst",displayName:this.i18n("IOPS Burst"),description:this.i18n("The desired burst limit of IO operations."),type:t.b.iops},{name:"rbd_qos_read_bps_burst",displayName:this.i18n("Read BPS Burst"),description:this.i18n("The desired burst limit of read bytes."),type:t.b.bps},{name:"rbd_qos_read_iops_burst",displayName:this.i18n("Read IOPS Burst"),description:this.i18n("The desired burst limit of read operations."),type:t.b.iops},{name:"rbd_qos_write_bps_burst",displayName:this.i18n("Write BPS Burst"),description:this.i18n("The desired burst limit of write bytes."),type:t.b.bps},{name:"rbd_qos_write_iops_burst",displayName:this.i18n("Write IOPS Burst"),description:this.i18n("The desired burst limit of write operations."),type:t.b.iops}]}]}return l.getOptionsFromSections=function(l){return l.map(function(l){return l.options}).reduce(function(l,n){return l.concat(n)})},l.prototype.filterConfigOptionsByName=function(n){return l.getOptionsFromSections(this.sections).filter(function(l){return l.name===n})},l.prototype.getOptionValueByName=function(l,n,e){void 0===e&&(e="");var t=this.filterConfigOptionsByName(l);return 1===t.length?t.pop()[n]:e},l.prototype.getWritableSections=function(){return this.sections.map(function(l){return l.options=l.options.filter(function(l){return!l.readOnly}),l})},l.prototype.getOptionFields=function(){return l.getOptionsFromSections(this.sections)},l.prototype.getWritableOptionFields=function(){return l.getOptionsFromSections(this.getWritableSections())},l.prototype.getOptionByName=function(l){return this.filterConfigOptionsByName(l).pop()},l.prototype.getDisplayName=function(l){return this.getOptionValueByName(l,"displayName")},l.prototype.getDescription=function(l){return this.getOptionValueByName(l,"description")},l.ngInjectableDef=u.defineInjectable({factory:function(){return new l(u.inject(i.a))},token:l,providedIn:"root"}),l}()},rFfW:function(l,n,e){"use strict";e.d(n,"a",function(){return a});var t=e("CcnG"),u=e("gIcY"),i=e("QFaf"),o=e("PhyI"),a=(e("aXbf"),e("o8EM"),function(){function l(l,n){this.formatterService=l,this.rbdConfigurationService=n,this.changes=new t.EventEmitter,this.ngDataReady=new t.EventEmitter,this.configurationType=o.b,this.sectionVisibility={}}return l.prototype.ngOnInit=function(){var l=this,n=this.createConfigurationFormGroup();this.form.addControl("configuration",n),n.valueChanges.subscribe(function(){l.changes.emit(l.getDirtyValues.bind(l))}),this.initializeData&&this.initializeData.subscribe(function(n){l.initialData=n.initialData;var e=n.sourceType;l.rbdConfigurationService.getWritableOptionFields().forEach(function(t){var u=n.initialData.filter(function(l){return l.name===t.name}).pop();u&&u.source===e&&l.form.get("configuration."+t.name).setValue(u.value)}),l.ngDataReady.emit()}),this.rbdConfigurationService.getWritableSections().forEach(function(n){return l.sectionVisibility[n.class]=!1})},l.prototype.getDirtyValues=function(l,n){var e=this;if(void 0===l&&(l=!1),l&&!n)throw new Error("ProgrammingError: If local values shall be included, a proper localFieldType argument has to be provided, too");var t={};return this.rbdConfigurationService.getWritableOptionFields().forEach(function(u){var i=e.form.get("configuration").get(u.name);e.initialData&&e.initialData[u.name]===i.value||(i.dirty||l&&i.source===n)&&(t[u.name]=null===i.value?i.value:u.type===o.b.bps?e.formatterService.toBytes(i.value):u.type===o.b.milliseconds?e.formatterService.toMilliseconds(i.value):u.type===o.b.iops?e.formatterService.toIops(i.value):i.value)}),t},l.prototype.createConfigurationFormGroup=function(){var l=new i.a({});return this.rbdConfigurationService.getWritableOptionFields().forEach(function(n){var e;if(n.type!==o.b.milliseconds&&n.type!==o.b.iops&&n.type!==o.b.bps)throw new Error("Type "+n.type+" is unknown, you may need to add it to RbdConfiguration class");e=new u.i(0,u.A.min(0)),l.addControl(n.name,e)}),l},l.prototype.reset=function(l){var n=this.form.get("configuration").get(l);n.disabled?(n.setValue(n.previousValue||0),n.enable(),n.previousValue||n.markAsPristine()):(n.previousValue=n.value,n.setValue(null),n.markAsDirty(),n.disable())},l.prototype.isDisabled=function(l){return this.form.get("configuration").get(l).disabled},l.prototype.toggleSectionVisibility=function(l){this.sectionVisibility[l]=!this.sectionVisibility[l]},l}())},roDX:function(l,n,e){"use strict";e.d(n,"a",function(){return t}),e("my5R"),e("o4+5"),e("uYzU");var t=function(){function l(l,n,e,t){this.iscsiService=l,this.dimlessPipe=n,this.iscsiBackstorePipe=e,this.i18n=t,this.gateways=[],this.images=[]}return l.prototype.ngOnInit=function(){this.gatewaysColumns=[{name:this.i18n("Name"),prop:"name"},{name:this.i18n("State"),prop:"state",cellTemplate:this.statusColorTpl},{name:this.i18n("# Targets"),prop:"num_targets"},{name:this.i18n("# Sessions"),prop:"num_sessions"}],this.imagesColumns=[{name:this.i18n("Pool"),prop:"pool"},{name:this.i18n("Image"),prop:"image"},{name:this.i18n("Backstore"),prop:"backstore",pipe:this.iscsiBackstorePipe},{name:this.i18n("Read Bytes"),prop:"stats_history.rd_bytes",cellTemplate:this.iscsiSparklineTpl},{name:this.i18n("Write Bytes"),prop:"stats_history.wr_bytes",cellTemplate:this.iscsiSparklineTpl},{name:this.i18n("Read Ops"),prop:"stats.rd",pipe:this.dimlessPipe,cellTemplate:this.iscsiPerSecondTpl},{name:this.i18n("Write Ops"),prop:"stats.wr",pipe:this.dimlessPipe,cellTemplate:this.iscsiPerSecondTpl},{name:this.i18n("A/O Since"),prop:"optimized_since",cellTemplate:this.iscsiRelativeDateTpl}]},l.prototype.refresh=function(){var l=this;this.iscsiService.overview().subscribe(function(n){l.gateways=n.gateways,l.images=n.images,l.images.map(function(l){return l.stats_history&&(l.stats_history.rd_bytes=l.stats_history.rd_bytes.map(function(l){return l[1]}),l.stats_history.wr_bytes=l.stats_history.wr_bytes.map(function(l){return l[1]})),l.cdIsBinary=!0,l})})},l}()},u0yg:function(l,n,e){"use strict";e.d(n,"b",function(){return t}),e.d(n,"a",function(){return u});var t=function(){return function(){}}(),u=function(l){return l[l.V1=1]="V1",l[l.V2=2]="V2",l}({})},u2XS:function(l,n,e){"use strict";var t=e("CcnG"),u=e("Ip0R"),i=e("25BL"),o=e("uIqm"),a=e("nuQ0"),r=e("Tff5"),s=e("urB8"),d=e("xtUU"),c=e("3ris"),p=e("Jm/i"),m=e("uYzU"),f=e("iExv");e.d(n,"b",function(){return g}),e.d(n,"c",function(){return _}),e.d(n,"a",function(){return R});var g=t["\u0275crt"]({encapsulation:0,styles:[["tree .fa{font-weight:unset!important}"]],data:{}});function h(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,0,"span",[["class","node-name"]],[[8,"innerHTML",1]],null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["\xa0"])),(l()(),t["\u0275eld"](3,0,null,null,5,"span",[["class","label"]],null,null,null,null,null)),t["\u0275did"](4,278528,null,0,u.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pad"](5,1),t["\u0275pad"](6,1),t["\u0275pod"](7,{"label-success":0,"label-danger":1}),(l()(),t["\u0275ted"](8,null,[" "," "]))],function(l,n){var e=l(n,7,0,l(n,5,0,"logged_in").includes(n.context.$implicit.status),l(n,6,0,"logged_out").includes(n.context.$implicit.status));l(n,4,0,"label",e)},function(l,n){l(n,0,0,n.context.$implicit.value),l(n,8,0,n.context.$implicit.status)})}function v(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,4,"div",[["class","col-sm-6 col-lg-6 metadata"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,1,"legend",[],null,null,null,null,null)),(l()(),t["\u0275ted"](2,null,["",""])),(l()(),t["\u0275eld"](3,0,null,null,1,"cd-table",[["columnMode","flex"]],null,null,null,i.b,i.a)),t["\u0275did"](4,2867200,[[2,4],["detailTable",4]],0,o.a,[t.NgZone,t.ChangeDetectorRef],{data:[0,"data"],columns:[1,"columns"],columnMode:[2,"columnMode"],limit:[3,"limit"]},null)],function(l,n){var e=n.component;l(n,4,0,e.data,e.columns,"flex",0)},function(l,n){l(n,2,0,n.component.title)})}function b(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t["\u0275ted"](1,null,["",""]))],null,function(l,n){l(n,1,0,n.parent.context.value)})}function y(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"strong",[],null,null,null,null,null)),(l()(),t["\u0275ted"](1,null,["",""]))],null,function(l,n){l(n,1,0,n.parent.context.value)})}function C(l){return t["\u0275vid"](0,[(l()(),t["\u0275and"](16777216,null,null,1,null,b)),t["\u0275did"](1,16384,null,0,u.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,y)),t["\u0275did"](3,16384,null,0,u.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](0,null,null,0))],function(l,n){l(n,1,0,void 0===n.context.row.default||n.context.row.default===n.context.row.current),l(n,3,0,void 0!==n.context.row.default&&n.context.row.default!==n.context.row.current)},null)}function _(l){return t["\u0275vid"](0,[t["\u0275qud"](402653184,1,{highlightTpl:0}),t["\u0275qud"](671088640,2,{content:0}),(l()(),t["\u0275eld"](2,0,null,null,7,"div",[["class","col-sm-6 col-lg-6"]],null,null,null,null,null)),(l()(),t["\u0275eld"](3,0,null,null,1,"legend",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["iSCSI Topology"])),(l()(),t["\u0275eld"](5,0,null,null,4,"tree",[],null,[[null,"nodeSelected"]],function(l,n,e){var t=!0;return"nodeSelected"===n&&(t=!1!==l.component.onNodeSelected(e)&&t),t},a.b,a.a)),t["\u0275prd"](512,null,r.TreeService,r.TreeService,[s.NodeDraggableService]),t["\u0275did"](7,770048,null,1,d.TreeComponent,[r.TreeService],{treeModel:[0,"treeModel"]},{nodeSelected:"nodeSelected"}),t["\u0275qud"](335544320,3,{template:0}),(l()(),t["\u0275and"](0,[[3,2]],null,0,null,h)),(l()(),t["\u0275and"](16777216,null,null,1,null,v)),t["\u0275did"](11,16384,null,0,u.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](0,[[1,2],["highlightTpl",2]],null,0,null,C))],function(l,n){var e=n.component;l(n,7,0,e.tree),l(n,11,0,e.data)},null)}function w(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"cd-iscsi-target-details",[],null,null,null,_,g)),t["\u0275did"](1,638976,null,0,c.a,[p.a,m.a,f.a],null,null)],function(l,n){l(n,1,0)},null)}var R=t["\u0275ccf"]("cd-iscsi-target-details",c.a,w,{selection:"selection",settings:"settings",cephIscsiConfigVersion:"cephIscsiConfigVersion"},{},[])},wG1H:function(l,n,e){"use strict";e.d(n,"a",function(){return t}),e("aexS");var t=function(){function l(l){this.authStorageService=l,this.grafanaPermission=this.authStorageService.getPermissions().grafana}return l.prototype.ngOnInit=function(){},l}()}}]);